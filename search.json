{"entries":[{"title":"Blog Archive","url":"/blog/archives/index.html","date":null,"categories":[],"body":" 2014 Bash漏洞-环境变量 Sep 26 2014 posted in linux admin Docker还有OpenShift Sep 24 2014 posted in virtualization Get Data Distributely via Scrapy Aug 09 2014 posted in data processing 机器学习常用算法 Jul 20 2014 posted in data processing Octopress Cheatsheet Jul 15 2014 posted in octopress Milestone Jul 07 2014 posted in 生活杂记 Lunr Search in Octopress Jun 26 2014 posted in octopress Gitlab Quick Deploy Jun 09 2014 posted in linux admin 15. Ovirt-shell May 22 2014 posted in 云端日记 21. Hadoop/Storm 介绍 May 17 2014 posted in 云端日记 14. oVirt使用进阶 May 11 2014 posted in 云端日记 13. 完善平台 May 08 2014 posted in 云端日记 11. 搭建oVirt虚拟化平台 May 07 2014 posted in 云端日记 Add Nat to Ovirt via Vdsm Hooks May 04 2014 posted in virtualization 12. 搭建高可用oVirt（hosted Engine） Apr 29 2014 posted in 云端日记 Migrate Vm From ESiX to oVirt Apr 25 2014 posted in virtualization Intergrate Owncloud With AD(LDAP) Apr 24 2014 posted in ldap , owncloud 10. oVirt简介 Apr 24 2014 posted in 云端日记 9. Glusterfs应用示例及技巧 Apr 21 2014 posted in 云端日记 SAP Cloud Computing Apr 14 2014 posted in data processing OpenLDAP Step by Step How-to Apr 14 2014 posted in ldap 8. 搭建glusterfs作为基础存储 Apr 12 2014 posted in 云端日记 7. Gluster简述 Apr 04 2014 posted in 云端日记 6. FUSE Apr 03 2014 posted in 云端日记 5. 分布式存储的故事 Apr 01 2014 posted in 云端日记 4. 意识流的架构目录（进程信息） Mar 28 2014 posted in 云端日记 3. 要有光 Mar 25 2014 posted in 云端日记 2. 畅想吧 Mar 25 2014 posted in 云端日记 1. 众说纷纭 Mar 24 2014 posted in 云端日记 0. 今天天气怎么样？ Mar 21 2014 posted in 云端日记 -1. 为什么我的序号那么奇葩 Mar 20 2014 posted in 云端日记 Use MAXS to Control Your Device via Ejabberd(plus Ssh, Jingle Voice Talk as a Bonus) Feb 26 2014 posted in im-pbx Setup Dns, Router and Switch Feb 25 2014 posted in networking Foreman/puppet/cfengine/bcfg2/chef Howto Feb 21 2014 posted in networking Deploy Asterisk on CentOS Feb 10 2014 posted in im-pbx 2013-2014 Jan 20 2014 posted in 生活杂记 Heartbeat and Drbd Test High Availability Jan 16 2014 posted in linux admin 2013 Slic for Qemu-kvm Dec 25 2013 posted in virtualization Create a Dummy VGA Adpter Dec 19 2013 posted in device hack 他们都不见了 Dec 16 2013 posted in 新世界 eZ430-Chronos入手 Dec 16 2013 posted in ez430-chronos MyIDC–Everything’s Traceable Dec 11 2013 posted in workshop 无主之地 Dec 02 2013 posted in 新世界 Unix/Linux/MacOS Monitor Tools Nov 29 2013 posted in linux admin How to Lock/unlock/root Nexus 5 Nov 16 2013 posted in device hack Projects to Be Done Recently. Oct 31 2013 posted in memo , workshop Add Usbdevice to Libvirt by Modifying Cgroup Oct 31 2013 posted in virtualization Use Foreman/Nagios/Icinga to Make Life Easy… Sep 24 2013 posted in linux admin 论身体的重要性 Sep 19 2013 posted in 生活杂记 LeapMotion Controlled X4 Sep 15 2013 posted in arduino 2560 , leapmotion , raspberrypi , workshop Kvm Perfermance Test, Including Periphery Virtual Device Sep 14 2013 posted in memo Compile Android Spice(aSpice) Sep 02 2013 posted in virtualization 油画：猫 Aug 17 2013 posted in 新世界 Csico C3550 Instances Aug 05 2013 posted in networking Leapmotion 相关 Aug 02 2013 posted in leapmotion LeapMotion 入手，晒一下开箱以及基本操作 Jul 28 2013 posted in leapmotion Openvswitch Howto Jul 25 2013 posted in networking Gpu Passthrough in Xen Jul 22 2013 posted in virtualization Openstack 配置及其API的简单使用 Jul 18 2013 posted in virtualization 追逐梦想的医生 Jul 16 2013 posted in 新世界 新世界 序章 流白 Jul 07 2013 posted in 新世界 Leap Motion Relative Jul 06 2013 posted in leapmotion 《想当厨子的生物学家是个好黑客》观感 Jun 23 2013 posted in 生活杂记 A Light-weighted VM Webadmin Jun 18 2013 posted in memo 虚拟桌面架构中的 3ds MAX Jun 15 2013 posted in memo Using Gpu in Pi Jun 14 2013 posted in raspberrypi 近来 Jun 02 2013 posted in 生活杂记 How to Solve the ‘boot Storm’ Problem: BCACHE May 27 2013 posted in memo GPU Passthrough, VGA Passthrough in KVM May 23 2013 posted in virtualization Some Data Structure About Clisp May 12 2013 posted in data processing 设计，kvm前端，mybox May 03 2013 posted in memo Rex Apr 15 2013 posted in memo Something About Curl — Connecting IPA Server Using Json as an Example Apr 10 2013 posted in linux admin A Bash Script — Auto Merge Apr 10 2013 posted in program Git Exp. Apr 08 2013 posted in program Deploy & Debug Ovirt in the Intellij Ide Apr 05 2013 posted in virtualization 关于语言 Apr 02 2013 posted in memo Arduino IO生成波形的问题 Mar 23 2013 posted in arduino 2560 Ltsp相关 Mar 15 2013 posted in linux admin Inspire Feb 25 2013 posted in memo OpenVPN Feb 05 2013 posted in networking 菜根谭小记 Jan 22 2013 posted in 生活杂记 Python交互式输入 Jan 14 2013 posted in program Eclipse Multiuser Jan 09 2013 posted in program Owncloud Webdav Intergration Jan 03 2013 posted in owncloud 年终 Jan 01 2013 posted in 生活杂记 2012 Arduino+cpuload+serial+led Dec 09 2012 posted in arduino 2560 IPA Nov 27 2012 posted in ldap 安好？ Nov 19 2012 posted in 生活杂记 Mingw编译remoteviewer Nov 17 2012 posted in virtualization VDSM Oct 29 2012 posted in virtualization tcp协议之上的CCNx Oct 27 2012 posted in networking 画–增补 Oct 24 2012 posted in workshop Arduino Oct 21 2012 posted in arduino 2560 Ovirt Notes Oct 18 2012 posted in virtualization RTX内核 Oct 13 2012 posted in arduino 2560 Wrt54g V5添加usb Oct 12 2012 posted in device hack 黑客与画家（摘抄） Oct 12 2012 posted in 博文收集 让dnspod解析了 Oct 12 2012 posted in 生活杂记 一些笔记（老版笔记已丢失，此为增补） Sep 18 2012 posted in notes 回不去就往前走 Sep 03 2012 posted in 生活杂记 V字仇杀队–经典台词 Jul 05 2012 posted in workshop 回家了 Jun 14 2012 posted in 生活杂记 2012年6月8日 Jun 08 2012 posted in lofyer的日记 毕业 May 23 2012 posted in 生活杂记 2012年5月21日 May 21 2012 posted in lofyer的日记 明天 May 18 2012 posted in 生活杂记 风信子 May 10 2012 posted in 生活杂记 毕业前的日子 May 09 2012 posted in 生活杂记 2012年5月7日 May 07 2012 posted in lofyer的日记 2012年5月5日 May 05 2012 posted in lofyer的日记 2012年5月3日 May 03 2012 posted in lofyer的日记 2012年5月2日 May 03 2012 posted in lofyer的日记 2012年4月30日 Apr 30 2012 posted in lofyer的日记 2012年4月28日 Apr 29 2012 posted in lofyer的日记 2012年4月27日 Apr 27 2012 posted in lofyer的日记 2012年4月26日 Apr 26 2012 posted in lofyer的日记 2012年4月24日 Apr 24 2012 posted in lofyer的日记 2012年4月23日 Apr 23 2012 posted in lofyer的日记 2012年4月21日 Apr 22 2012 posted in lofyer的日记 2011年4月20日 Apr 20 2012 posted in lofyer的日记 2012年4月19日 Apr 19 2012 posted in lofyer的日记 2012年4月17日 Apr 18 2012 posted in lofyer的日记 Unité Apr 15 2012 posted in 博文收集 2012年4月15日 Apr 15 2012 posted in lofyer的日记 2012年4月14日 Apr 14 2012 posted in lofyer的日记 2012年4月12日 Apr 12 2012 posted in lofyer的日记 最近 Apr 11 2012 posted in 生活杂记 2012年4月9日 Apr 09 2012 posted in lofyer的日记 2012年4月6日 Apr 07 2012 posted in lofyer的日记 2012年4月5日 Apr 05 2012 posted in lofyer的日记 2012年3月30日 Mar 30 2012 posted in lofyer的日记 2012年3月29日 Mar 30 2012 posted in lofyer的日记 2012年3月27日 Mar 28 2012 posted in lofyer的日记 2012年3月25日 Mar 26 2012 posted in lofyer的日记 冷云 Mar 26 2012 posted in 生活杂记 关于纪念日 Mar 23 2012 posted in 生活杂记 Yacy Mar 15 2012 posted in memo 裂痕 Mar 14 2012 posted in 生活杂记 2011年3月11日 Mar 12 2012 posted in lofyer的日记 三月份 Mar 10 2012 posted in 生活杂记 2012年3月4日 Mar 04 2012 posted in lofyer的日记 新开始 Mar 04 2012 posted in 生活杂记 2012年1月7日 Jan 08 2012 posted in lofyer的日记 2012年1月4日 Jan 04 2012 posted in lofyer的日记 2012年1月2日 Jan 02 2012 posted in lofyer的日记 2012年1月1日 Jan 01 2012 posted in lofyer的日记 2011 2011年12月29日 Dec 29 2011 posted in lofyer的日记 2011年12月28日 Dec 29 2011 posted in lofyer的日记 2011年12月26日 Dec 26 2011 posted in lofyer的日记 2011年12月23日 Dec 23 2011 posted in lofyer的日记 2011年12月21日 Dec 21 2011 posted in lofyer的日记 2011年12月20日 Dec 20 2011 posted in lofyer的日记 舞者 Dec 19 2011 posted in 生活杂记 2011年12月18日 Dec 18 2011 posted in lofyer的日记 Solace Dec 17 2011 posted in 博文收集 If Christmas Never Came Dec 17 2011 posted in 生活杂记 2011年12月17日 Dec 17 2011 posted in lofyer的日记 荒芜的心迹 Dec 17 2011 posted in 生活杂记 你想要的 Dec 17 2011 posted in 生活杂记 2011年12月15日 Dec 15 2011 posted in lofyer的日记 2011年12月14日 Dec 14 2011 posted in lofyer的日记 2011年12月13日 Dec 13 2011 posted in lofyer的日记 2011年12月12日 Dec 12 2011 posted in lofyer的日记 2011年12月11日 Dec 12 2011 posted in lofyer的日记 2011年12月9日 Dec 09 2011 posted in lofyer的日记 2011年12月8日 Dec 08 2011 posted in lofyer的日记 2011年12月7日 Dec 07 2011 posted in lofyer的日记 2011年12月6日 Dec 06 2011 posted in lofyer的日记 2011年12月5日 Dec 05 2011 posted in lofyer的日记 2011年12月3日 Dec 03 2011 posted in lofyer的日记 2011年12月1日 Dec 01 2011 posted in lofyer的日记 2011年11月29日 Nov 29 2011 posted in lofyer的日记 2011年11月28日 Nov 28 2011 posted in lofyer的日记 2011年11月27日 Nov 28 2011 posted in lofyer的日记 2011年11月26日 Nov 26 2011 posted in lofyer的日记 2011年11月24日 Nov 24 2011 posted in lofyer的日记 2011年11月23日 Nov 23 2011 posted in lofyer的日记 2011年11月21日 Nov 21 2011 posted in lofyer的日记 2011年11年20日 Nov 20 2011 posted in lofyer的日记 名人烟斗：性格与风骨的延伸(后附《斗友话丝》) Nov 20 2011 posted in 博文收集 2011年11月19日 Nov 19 2011 posted in lofyer的日记 2011年11月17日 Nov 18 2011 posted in lofyer的日记 2011年11月16日 Nov 17 2011 posted in lofyer的日记 2011年11月15日 Nov 16 2011 posted in lofyer的日记 2011年11月14日 Nov 15 2011 posted in lofyer的日记 2011年11月13日 Nov 14 2011 posted in lofyer的日记 2011年11月11日 Nov 12 2011 posted in lofyer的日记 2011年11月10日 Nov 11 2011 posted in lofyer的日记 2011年11月9日 Nov 10 2011 posted in lofyer的日记 2011年11月8日 Nov 08 2011 posted in lofyer的日记 2011年11月7日 Nov 07 2011 posted in lofyer的日记 2011年11月5日 Nov 05 2011 posted in lofyer的日记 2011年11月4日 Nov 04 2011 posted in lofyer的日记 2011年11月3日 Nov 04 2011 posted in lofyer的日记 2011年11月1日 Nov 01 2011 posted in lofyer的日记 2011年10月30日 Oct 30 2011 posted in lofyer的日记 2011年10月29日 Oct 29 2011 posted in lofyer的日记 2011年10月28日 Oct 28 2011 posted in lofyer的日记 2011年10月27日 Oct 28 2011 posted in lofyer的日记 2011年10月26日 Oct 27 2011 posted in lofyer的日记 2011年10月25日 Oct 26 2011 posted in lofyer的日记 2011年10月24日 Oct 26 2011 posted in lofyer的日记 2011年10月23日 Oct 23 2011 posted in lofyer的日记 2011年10月22日 Oct 22 2011 posted in lofyer的日记 2011年10月21日 Oct 22 2011 posted in lofyer的日记 2011年10月20日 Oct 21 2011 posted in lofyer的日记 2011年10月15日 Oct 17 2011 posted in lofyer的日记 2011年10月14日 Oct 16 2011 posted in lofyer的日记 2011年10月13日 Oct 15 2011 posted in lofyer的日记 2011年10月12日 Oct 13 2011 posted in lofyer的日记 2011年10月11日 Oct 12 2011 posted in lofyer的日记 2011年10月10日 Oct 11 2011 posted in lofyer的日记 2011年10月8日 Oct 09 2011 posted in lofyer的日记 2011年10月7日 Oct 08 2011 posted in lofyer的日记 2011年10月6日 Oct 06 2011 posted in lofyer的日记 2011年10月5日 Oct 06 2011 posted in lofyer的日记 2011年10月4日 Oct 05 2011 posted in lofyer的日记 2011年10月3日 Oct 03 2011 posted in lofyer的日记 2011年9月30日 Oct 02 2011 posted in lofyer的日记 2011年9月29日 Sep 30 2011 posted in lofyer的日记 2011年9月28日 Sep 28 2011 posted in lofyer的日记 2011年9月26日 Sep 26 2011 posted in lofyer的日记 2011年9月25日 Sep 24 2011 posted in lofyer的日记 2011年9月24日 Sep 24 2011 posted in lofyer的日记 2011年9月22日 Sep 23 2011 posted in lofyer的日记 2011年9月21日 Sep 21 2011 posted in lofyer的日记 2011年9月18日 Sep 19 2011 posted in lofyer的日记 2011年9月17日 Sep 18 2011 posted in lofyer的日记 2011年9月16日 Sep 17 2011 posted in lofyer的日记 2011年9月14日 Sep 14 2011 posted in lofyer的日记 2011年9月13日 Sep 14 2011 posted in lofyer的日记 2011年9月12日 Sep 12 2011 posted in lofyer的日记 2011年9月10日 Sep 11 2011 posted in lofyer的日记 2011年9月9日 Sep 10 2011 posted in lofyer的日记 2011年9月7日 Sep 07 2011 posted in lofyer的日记 你还可爱么 Sep 07 2011 posted in 生活杂记 2011年9月6日 Sep 06 2011 posted in lofyer的日记 2011年9月5日 Sep 05 2011 posted in lofyer的日记 2011年9月4日 Sep 04 2011 posted in lofyer的日记 2011年9月3日 Sep 03 2011 posted in lofyer的日记 2011年8月31日 Sep 02 2011 posted in lofyer的日记 2011年8月30 Aug 30 2011 posted in lofyer的日记 2011年8月29日 Aug 30 2011 posted in lofyer的日记 2011年8月28日 Aug 30 2011 posted in lofyer的日记 2011年8月27日 Aug 27 2011 posted in lofyer的日记 2011年8月25日 Aug 26 2011 posted in lofyer的日记 2011年8月24日 Aug 25 2011 posted in lofyer的日记 2011年8月23日 Aug 24 2011 posted in lofyer的日记 2011年8月22日 Aug 22 2011 posted in lofyer的日记 2011年8月20日 Aug 20 2011 posted in lofyer的日记 2011年8月19日 Aug 20 2011 posted in lofyer的日记 2011年8月18日 Aug 18 2011 posted in lofyer的日记 2011年8月17日 Aug 17 2011 posted in lofyer的日记 2011年8月16日 Aug 16 2011 posted in lofyer的日记 2011年8月15日 Aug 15 2011 posted in lofyer的日记 2011年8月14日 Aug 15 2011 posted in lofyer的日记 2011年8月13日 Aug 13 2011 posted in lofyer的日记 养生之道“养生十六宜”与“十常四勿” Jul 23 2011 posted in 博文收集 I’m Still Here Jul 17 2011 posted in 生活杂记 变异 Jun 08 2011 posted in 生活杂记 遗迹 Jun 03 2011 posted in 生活杂记 偶然–徐志摩 Apr 30 2011 posted in 博文收集 "},{"title":null,"url":"/index.html","date":null,"categories":[],"body":" Blog Archives Recent Posts Bash漏洞-环境变量 Docker还有OpenShift Get Data Distributely via Scrapy 机器学习常用算法 Octopress Cheatsheet Categories arduino 2560 (5) data processing (4) device hack (3) ez430-chronos (1) im-pbx (2) ldap (3) leapmotion (4) linux admin (7) lofyer的日记 (136) memo (10) networking (6) notes (1) octopress (2) owncloud (2) program (4) raspberrypi (2) virtualization (13) workshop (5) 云端日记 (18) 博文收集 (6) 新世界 (5) 生活杂记 (29) "},{"title":"quicknotes","url":"/quicknotes/index.html","date":null,"categories":[],"body":"WebFramework: Django Cappuccino->mockingbird 搜索Tab grep -P \"t\" 批量替换 sed -i \"s/qwe/asd/g\" `grep -rl \"qwe\"` cmake 配置安装完opencv后，将安装路径中到lib/pkg-config/opencv.pc复制到/usr/lib/pkg-config，然后可以进行pkg-config 查找 gnome3任务栏快捷方式的存放位置拖到浏览器或者终端里你就看见了。。 curl POST curl -X POST -d '4142430A02000' http://user:pass@myhost/hudson/job/_jobName_/postBuildResult curl -X POST -d @myfilename http://user:pass@myhost/hudson/job/_jobName_/postBuildResult ddwrt 内网不能访问内网域名 iptables -t nat -I POSTROUTING -o br0 -s 192.168.0.188/24 -d 192.168.0.188/24 -j MASQUERADE vpn的内网的问题 iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j SNAT --to-source 70.8.7.6 iptables -t nat -A POSTROUTING -o eth0 -s 172.16.1.0/24 -j MASQUERADE delete git branch git push origin :yourbranch ipa client reinstall 删除 /etc/ipa/ca.crt 证书 fedora制作安装cd #!/bin/bash livecd-creator --config=/usr/share/spin-kickstarts/fedora-livecd-desktop.ks \\ --fslabel=Test \\ --tmpdir=/root/iso/tmp \\ --cache=/root/iso/cache \\ --nocleanup \\ --cacheonly #为节约下载时间可在以后制作时忽略 mysql grant grant all privileges on *.* to root@'%' identified by '123456'; flush privileges; 打开kvm nested参数 cat /sys/module/kvm_intel/parameters/nested 为N则 modprobe -r kvm-intel modprobe kvm-intel nested=1 Fedora滚动升级版 Rawhide yum install fedora-release-rawhide yum-config-manager --disable fedora updates updates-testing yum-config-manager --enable rawhide yum update yum yum --releasever=rawhide distro-sync --nogpgcheck Opensuse滚动升级版 Tumbleweed zypper ar --refresh http://download.opensuse.org/repositories/openSUSE:/Tumbleweed/standard/ Tumbleweed zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/oss/ 'openSUSE Current OSS' zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/non-oss/ 'openSUSE Current non-OSS' zypper ar --refresh http://download.opensuse.org/update/openSUSE-current/ 'openSUSE Current updates' zypper ar --refresh http://download.opensuse.org/update/openSUSE-non-oss-current/ 'openSUSE Current non-OSS updates' zypper dup vs2012修复补丁 由于升级.net 4.5会出现vs2012部分项目失败，可以打这个补丁修复 Microsoft Visual Studio 2012 更新 (KB2781514) RESTClient 针对RESTful的API可以使用这个工具 http://restclient.org owncloud repo http://software.opensuse.org/download/package?project=isv:ownCloud:devel&package=owncloud-client android google play cp /data/app/googleplay /system/app/ 获取Gravatar头像 curl http://www.gravatar.com/avatar/`echo -n me@mydomain.com | md5sum` > gravatar.jpg Maven insecure SSL -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true bVNC build FreeRDP: checkout dbbb341; cmake .; ant release Singed keystore: keytool -genkey -alias android.keystore -keyalg RSA -validity 20000 -keystore android.keystore http://www.mail-archive.com/spice-devel@lists.freedesktop.org/msg13763.html IPA ADD-USER #!/bin/bash echo -e \"pswd4admin\\n\" | kinit admin echo -e \"$1\\n$1\\n$1\\n\" | ipa user-add echo -e \"$1\\n$1\\n\" | ipa passwd $1 sleep 1 echo -e \"$1\\n$1\\n$1\\n\" | kinit $1 NTP server server 192.168.1.11 mask 255.255.0.0 nomodify 启动ntpd后要等个几分钟，client才能去同步，否则报错说未找到合适的ntp服务器 rsync rsync -zvrtopgal -e ssh --delete --stats --progress --exclude 'ignore.txt' root@lofyer.org:/var/log /home/lofyer/lofyer.org/ CentOS Smartcard SmartCard service: openct pcscd zathura 很好的PDF阅读器 ssh without password # Generate rsa key pair without passphrase [demo@A ~]$ ssh-keygen -t rsa # Copy pub key to B [demo@A ~]$ cat .ssh/id_rsa.pub | ssh alpha@B 'cat >> .ssh/authorized_keys2' # Add private key to A [demo@A ~]$ ssh-add ~/.ssh/id_rsa debian offcie乱码 安装文泉逸字体 apt-get install fonts-wenquanyi debian virt-viewer with spice deb http://mirrors.163.com/debian/ unstable main deb-src http://mirrors.163.com/debian/ unstable main deb http://security.debian.org/ unstable/updates main deb-src http://security.debian.org/ unstable/updates main # unstable-updates, previously known as 'volatile' deb http://mirrors.163.com/debian/ unstable-updates main deb-src http://mirrors.163.com/debian/ unstable-updates main deb http://apt.wxwidgets.org/ unstable-wx main deb-src http://apt.wxwidgets.org/ unstable-wx main Better DNS dns1: 199.91.73.222 dns2: 8.8.8.8 audit log Modify /etc/audit/audit.conf to 8192 or bigger. memcached PHP # apt-get install memcached php5-memcached modify /etc/php5/conf.d/memcached.ini disable TSO GSO to improve virtio-net # ethtool -K eth0 gso off # ethtool -K eth0 tso off disable PackageKit in Fedora /etc/yum/pluginconf.d/refresh-packagekit.conf enabled=0 推荐一种工作方式 集成显卡下运行linux，将另一块硬盘或者vdisk，还有独立显卡passthrough给虚拟机Win7，协议使用spice，这是很爽啊 crt & key to pem openssl x509 -inform DER -outform PEM -in server.crt -out server.crt.pem openssl rsa -inform DER -outform PEM -in server.key -out server.key.pem cat server.crt.pem server.key.pem >> server.pem wireless relay for tomata 设置无线中继时确保主路由和从路由的SSID、密码、加密方式一致，不要使用WPA/WPA-2混合模式 libvirt password # saslpasswd2 -a libvirt root netcat(nc) tips 大传输文件(file transfer) server: nc -l 5555 < file_to_copy client: nc server_ip 5555 > new_file 聊天(chat) client1: nc -l 5555 client2: nc server_ip 5555 克隆硬盘 将sda内容准备克隆到另一台服务器上 1 # dd if=/dev/sda | nc 192.168.228.222 1234 接受数据，并dd到sda 1 # nc -l -p 1234 | dd of=/dev/sda udp connection server: nc -4 -u -l 5555 clinet: nc -4 -u localhost 5555 owncloud repo [isv_ownCloud_community] name=Latest stable community release of ownCloud (CentOS_CentOS-6) type=rpm-md baseurl=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/ gpgcheck=1 gpgkey=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/repodata/repomd.xml.key enabled=1 gnome terminal proxy $ ssh -ND 7070 yourname@yourserver $ gconftool-2 -R /system/proxy # show configuration $ gconftool-2 -s /system/proxy/socks_host -t int 127.0.0.1 $ gconftool-2 -s /system/proxy/socks_port -t int 7070 $ gconftool-2 -s /system/proxy/mode -t string manual # enable $ gconftool-2 -s /system/proxy/mode -t string none # disable update xcode cmd 1 # xcode-select --install "},{"title":"workshop","url":"/workshop/index.html","date":null,"categories":[],"body":"云端日记（In the Cloud） 云计算平台部署，使用，数据收集，表示，源码参见 InTheCloud 在线阅读 InTheCloud MyIDC myidc-main webadmin 一个牛逼的架构前身。。 目标： 1. 轻松在新环境中部署应用，部署规模与操作步骤为非线性比例，主要提供方法，并提供虚拟机为辅助。 2. 网络主流数据搜索内容抓取，海量存储，自定义检索规则。 3. 使用Django重写 小说 对的，没事儿我还喜欢写小说。 日记类： lofyer的日记（已完结） 独立场景类： 新世界（在写） "},{"title":"search","url":"/search/index.html","date":null,"categories":[],"body":"This search page does not work sometime, use Google on the top of right instead. Search results {{#entries}} <article> <h3> {{#date}}<small><time datetime=\"{{pubdate}}\" pubdate>{{displaydate}}</time></small>{{/date}} <a href=\"{{url}}\">{{title}}</a> </h3> </article> {{/entries}} $(function() { $('#search-query').lunrSearch({ indexUrl: '/search.json', // URL of the `search.json` index data for your site results: '#search-results', // jQuery selector for the search results container entries: '.entries', // jQuery selector for the element to contain the results list, must be a child of the results element above. template: '#search-results-template' // jQuery selector for the Mustache.js template }); }); "},{"title":"About me","url":"/about/index.html","date":null,"categories":[],"body":"Not all the articles in this blog can receive comments. You can leave it here and I will reply to you ASAP. EN Name: Dylan Jones Age: 18-34 Edu.: Undergraduate Location: Shanghai Marriage: In a relationship Religion: none Language: Chinese, English, C, Python, Bash, Lisp Exp and Skills keywords: cloud SA , oVirt , OpenStack(Neutron, Glance) , KVM(qemu) , libvirt , Kerberos(IPA, LDAP) , Gluster , Hadoop , Redis , scrapy , Icinga , Nagios , Foreman , iSCSI , iPXE , software-defined networking(SDN) , Django , Web2Py , Kernel hacking , AMQP(RabbitMQ) , XMPP QQ: 578645806 E-mail: lofyer@gmail.com Site: http://blog.lofyer.org Git: MyGit See Workshop for my open work "},{"title":"偶然&#8211;徐志摩","url":"/blog/2011/04/30/%25e5%2581%25b6%25e7%2584%25b6-%25e5%25be%2590%25e5%25bf%2597%25e6%2591%25a9/","date":"2011-04-30 00:00:00 +0800","categories":["博文收集"],"body":"我是天空里的一片云， 偶尔投影在你的波心—— 你不必惊异， 更无须欢喜—— 在转瞬间消灭了踪影。 你我相逢在黑夜的海上， 你有你的，我有我的，方向； 你记得也好， 最好你忘掉， 在这交会时互放的光亮。 "},{"title":"遗迹","url":"/blog/2011/06/03/%25e7%25ac%25ac%25e4%25b8%2580%25e7%25ab%25a0/","date":"2011-06-03 00:00:00 +0800","categories":["生活杂记"],"body":"若如无言 但以情深为语 诉予不复愁肠 倾而雾散梦现 花团锦簇 恍如隔世误入桃花源 不为红尘烦琐蹙眉 心有所向 为时未晚 乘老骥落入神峰 望日坠天际雪皑皑 忽而有所觉 路至巴松错 坠天古鉴 入眼便知人心 皆为纯净 他喜欢这些字，这些字也喜欢他，阴阳师所谓的咒吧。 背上包，远足。 "},{"title":"变异","url":"/blog/2011/06/08/%25e7%25ac%25ac%25e4%25ba%258c%25e7%25ab%25a0-%25e5%258f%2598%25e5%25bc%2582/","date":"2011-06-08 00:00:00 +0800","categories":["生活杂记"],"body":"时候到了，文明，自然，远古，一夜之间都颠覆了。 上帝悄悄走开，黑暗再次降临。 昔日繁华大道如今遍是杂草，人们躲在黑暗中，繁衍。 另一些人只在阳光下活动，他们惧怕黑夜的寒冷。 两个群体为了领地有时会在黎明或者黄昏战斗，输输赢赢的他们不在乎，似乎乐趣就是战斗本身。 右手提着长矛 呵气 草丛中的精灵 猎物就在眼前 历史会原谅你 为了族群 "},{"title":"I&#8217;m still here","url":"/blog/2011/07/17/%25e7%25ac%25ac%25e4%25b8%2589%25e7%25ab%25a0-im-still-here/","date":"2011-07-17 00:00:00 +0800","categories":["生活杂记"],"body":"丢失了，丢失了 如果心里的人走丢了，我会很急 曾经答应过不再出现，可是如今即使出现你也看不见 关于理想，轻易被实现，其实不错 好吧，就这样吧 "},{"title":"养生之道“养生十六宜”与“十常四勿”","url":"/blog/2011/07/23/%25e5%2585%25bb%25e7%2594%259f%25e4%25b9%258b%25e9%2581%2593%25e5%2585%25bb%25e7%2594%259f%25e5%258d%2581%25e5%2585%25ad%25e5%25ae%259c%25e4%25b8%258e%25e5%258d%2581%25e5%25b8%25b8%25e5%259b%259b%25e5%258b%25bf/","date":"2011-07-23 00:00:00 +0800","categories":["博文收集"],"body":" “养生十六宜” 　　1．发宜多梳用木梳每日梳头3—5遍，每遍60次左右。可以疏通头部经络，防止脱发和头发早白。 　　2．面宜多擦用双手轻擦或拍打面部，每次1—2分钟，每日2—3次。因经络系统中足三阳经都起于头面部，擦面可疏通经络，并有面部美容作用。 　　3．目宜常运即眼球转动，速度要均匀，每个转动方向可作2—4个节拍，限睛疲劳适当休息。运目可加速眼睛局部血液循环，防止视力衰退，明目清神， 　　4．耳宜常弹用两掌心掩耳，用食指放在中指上，向下弹响十次，然后突然张口。弹耳可预防耳聋，增强记忆。 　　5．舌宜抵腭舌轻抵上腭又称搭鹊桥，意在使任督两脉相通，从而达到阴阳平衡的目的。 　　6．齿宜常叩叩齿即上、下排牙轻轻咬合，每次轻叩牙齿36次，先叩大牙，再叩门齿。可达到固齿清热疗牙疾之效。 　　7．津宜数咽光鼓腮干漱口，待唾液充满后分三次咽下。能起到滋阴益气的作用。 　　8．浊气常呵体内浊气要慢慢呼出。有清理浊气、补益脏腑的作用。 　　9．背宜常暖背主一身之阳气，是督脉所在处，常暖可使阳气运行并畅达全身经脉，起防病治病作用，可采用按摩、晒太阳等方法。 　　10．胸宜常护胸为心、肺所在，需特别保护，以防外邪侵袭。 　　11．腹宜常摩腹为胃肠等脏器所在，常作腹部按摩有利消化。 　　12．谷道宜常撮谷道指肛门，平时有意识撮提肛门，可防治痔疮、肛裂等疾病。 　　13．肢体宜常摇四肢经常活动，平仅锻炼四肢肌肉、筋骨，也能通过四肢运动促进内脏气血运动，增强体质。 　　14．足心宜常擦以右手心(劳宫穴)擦左足心(涌泉穴)，可以交通心肾，使水火相济，心肾相交，能防治失眠、多梦。 　　15．皮肤宜常干沐浴用手掌、于毛巾沐浴周身皮肤，即全身按摩，能疏通经络，活跃气血，抗衰老防疾病。 　　16．大小便宜闭口勿言古代养生家主张大小便时要精神专注，即不宜开口呼吸，同时轻轻咬住牙齿，可保住气血，有利于浊气糟粕的排泄。 “十常四勿” 回顾中国历史，细数历代帝王，享有高寿的没有几人,其中佼佼者属清朝乾隆皇帝爱新觉罗•弘历.他不仅高寿八十九，而且在位六十年，无人能出其右。        为何自古皇帝多短命，乾隆却身强力壮脑健而独享高寿？这除了与他自幼重视骑马射箭练武有关外，还在于他养生有道。 乾隆的养生之道归纳起来为十六个字：“ 吐呐肺腑，活动筋骨，十常四勿，适时进补 。”以上诸要诀中的“十常四勿”，有必要进一步阐述。      所谓“ 十常 ”，乃指日常生活中多从事此十项基本且重要的“小动作”，即：齿常叩、津常咽、耳常弹、鼻常揉、目常运、面常搓、足常摩、腹常运、肢常伸、肛常提。        所谓“ 四勿 ”，就是不要触犯日常生活中的四项禁忌：食勿言、卧勿语、饮勿醉、色勿迷。 "},{"title":"2011年8月13日","url":"/blog/2011/08/13/2052%25e5%25b9%25b412%25e6%259c%25882%25e6%2597%25a5/","date":"2011-08-13 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月13日 房子外的森林越来越不平静了，今天在湖边看到一只麋鹿的尸体，肚子上裂开大约15厘米的口子，伤口表面好像被什么东西舔舐过。 3-D变速机的驱动器又不工作，检查发现变压器不见了，估计又被卡尔半夜“借”走，短期内他不会回来，看来有必要去镇上买个新的。 老沃森真的老了，刚跑了不到20公里油量表就红灯，昨天刚在Wild那买的一桶DZ#15油。10点钟1刻到了Wild，店主的10岁女儿小林又让我给她讲故事，还好，正好来的路上从12频道听到了关于斯巴达三百勇士的。 回来的路上天空逐渐变暗，现在还是阴阴的，我很喜欢。 老沃森现在在车库里，过会儿去修一下。 车库后边的滴嗒声又来了，随它吧，我搬到这儿之前它就在，总不能撵人家走吧。 "},{"title":"2011年8月14日","url":"/blog/2011/08/15/2011%25e5%25b9%25b48%25e6%259c%258814/","date":"2011-08-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月14日 昨天。。或许。。不该去看它的。。 它来的频率越来越多了，昨天嘴里叼着什么，刚看见我就跑开。走进看地山有摊血，还有几撮动物毛发。 该死，记性越来越差了，花了20分钟才把空气压缩机从地下室翻出来。昨天答应那小姑娘的事儿今天得帮她做了，一个夜视仪。 用压缩机清理下桌面，想起来储物柜里还有D4212SP，其他也够，又花了一下午焊接调试。刚才测试下，清楚地看到了它，美丽的毛发。。明天给她送去吧，反正店主自从我搬来后对我也很照顾。 昨天又梦见了他们，希望今天能有个安稳的睡眠。 "},{"title":"2011年8月15日","url":"/blog/2011/08/15/2011%25e5%25b9%25b48%25e6%259c%258815%25e6%2597%25a5/","date":"2011-08-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月15日 7点钟起床，带上昨天做的夜视仪骑着老沃森去镇上。 阳光穿过树叉照在小路上的感觉很好，可是又不想去仔细品味。 把老沃森停在店主卡车旁时，刚好看见店主开门。进去喝了杯咖啡，店主朋友从盖尔森带来。没事儿他就喜欢磨，装好放在一个木盒里，我很多次都想仔细看看那个盒子，可还没开口就被他眼神否决了。 喝完咖啡后，我把给店主女儿做的玩具交给他，然后离开。 继续向西，因为最近事情比较明显了，那些人要来了。 在湖边给卡尔留了个记号，回来的时候他能看见。 屋后的血腥已经被阳光冲散了，觉得，在屋后盖个小亭子应该不错。 世上本无善恶，也就无所谓为善与为恶了，自己，晚安。 "},{"title":"2011年8月16日","url":"/blog/2011/08/16/2011%25e5%25b9%25b48%25e6%259c%258816%25e6%2597%25a5/","date":"2011-08-16 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月16日 悠闲的一天。 不要浮躁，活在当下。 芭芭拉这本书真的很不错。 "},{"title":"2011年8月17日","url":"/blog/2011/08/17/2011%25e5%25b9%25b48%25e6%259c%258817%25e6%2597%25a5/","date":"2011-08-17 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月17日 早上煮咖啡的时候忽然耳鸣，好久没出现过了。 查看完新闻后没什么事儿，就在走廊睡了，阳光很好。 起来后听见厨房的动静，卡尔回来了。 谈话，旅行有点累，他碰到了蒙人，当然，言语不同，被族长怀疑了，不得已隐身跑开。他看见族长左手上的符号，说很有意思，然后笑了笑。 我们都见过。 留他吃了晚饭，莉莉打来电话，叫卡尔回去，好吧，卡尔无奈的笑了。我说，l‘amour，你小子几年前就没想到如今竟然有个女人如此需要你吧，回去吧，今天可能是跟她在一起的最后一晚了。他也觉得沉重。 屋后的它，一个月后希望还能听见。 "},{"title":"2011年8月18日","url":"/blog/2011/08/18/2011%25e5%25b9%25b48%25e6%259c%258818%25e6%2597%25a5/","date":"2011-08-18 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月18日 5点起床，都准备好了。 有点陌生。 然后是长长的路。 这旅程，有点怀念。   "},{"title":"2011年8月19日","url":"/blog/2011/08/20/2011%25e5%25b9%25b48%25e6%259c%258819%25e6%2597%25a5/","date":"2011-08-20 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月19日 昨天晚上8点左右到达巨石城，一个20年前毁于战火的城市。 在曾经的市中心广场角落发现一堆燃尽的柴火，没超过12小时，应该还在城中某个地方。 卡尔的反向仪（有一段时间我很喜欢这东西，现在这科技已经被封锁了）观察到总共有5个穿军装的人，不像是联合国的，看说话方式觉得是从某地来的雇佣军。 我和卡尔现在在一个名叫“野山花”的小店里，主人离开的很匆忙，以至于掉在柜台的全家福都没看见。相片里一家三口，背面有着像是小孩的幼稚字体，“我爱爸爸妈妈”。 我在房屋周围设置了红外雷达，200米内应该都没事吧。 明天可能会碰到那群人，不过我们也有所准备。 "},{"title":"2011年8月20日","url":"/blog/2011/08/20/2011%25e5%25b9%25b48%25e6%259c%258820%25e6%2597%25a5/","date":"2011-08-20 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月20日 出乎意料的，在进入市保安厅的地下通道里，我们碰到了那群人，可是已经只剩衣服了。 地上的履带印还在，周围也有弹壳和扭曲的14mm战车步枪子弹。 卡尔问我我们是不是先升级下装备和武器再考虑深入，我觉得有这个必要。 我和卡尔都抱怨这次的生意有点不值，因为客户告我们说会遇见OP-1E，估计是故意隐瞒吧。 OP-1E，无界之国打造的战争机器，怎么回来这种地方？ 难道这次的客户是政府的人？ 有点不安。   "},{"title":"2011年8月22日","url":"/blog/2011/08/22/2011%25e5%25b9%25b48%25e6%259c%258822%25e6%2597%25a5/","date":"2011-08-22 00:00:00 +0800","categories":["lofyer的日记"],"body":"tough night 昨天一路跟踪OP-1E，终于，在今天下午2点钟左右遇到它。依旧那么令人充满战斗意念。 微型石墨炸弹瘫痪2.8秒，趁间隙打掉它的中心探测仪，然后它就是个普通机站装甲了。嗯，结果很简单，取出硬盘开始破解，那些激进份子就是有精力啊，算法越来越复杂了。 把数据都拷出来后该溶解的就溶解了。 刚看了日志，有点乱，它一路走来替我们解决了不少麻烦，有点感激它了。 明天进入逃亡者留下的地下室，可能会有很多惊喜。 "},{"title":"2011年8月23日","url":"/blog/2011/08/24/2011%25e5%25b9%25b48%25e6%259c%258823%25e6%2597%25a5/","date":"2011-08-24 00:00:00 +0800","categories":["lofyer的日记"],"body":"穿过了一个大约2000米的甬道，墙上每隔100米便有卡尔上次拿给我的符号，部分还有荧光标识。 记录以后到达出口，一个大约20米高200平米见方的圆形房间，总共5个弧形门，门上都有不同的符号，颜色不一，顺时针为黑白紫绿红。 相信知道这些们通往哪里的人只有昔日的将军了，可惜他在四年前死于车祸，留有个女儿，到现在。。应该刚会打酱油吧。 在这宿营不是个好主意，所以我们退到“黑“道，我们来的门休息。 卡尔一直在翻着硬盘里资料，希望那台机器人脑子里有点能用的信息。 我还是睡觉吧，这里的不安会给我点灵感应该。 "},{"title":"2011年8月24日","url":"/blog/2011/08/25/201/","date":"2011-08-25 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月24日 北风呼啸过 落叶寂寞了百年萧瑟 黑色天空笼罩大地 人们在阴影之中呻吟 仰望与俯首都以为是宿命的转轮 羽翼展开撒尽希望之种 有个人从东方徐徐走来 起初 人们以为那是救世主 他们错了 那是又一个迷失了的人 海底阴暗压抑的让他喘不过气 他害怕 开始四处奔逃 慢慢的 他走上这片大陆 气喘吁吁 记忆中还有那片珊瑚 人们纷纷献给他礼物 他作为回礼在每一寸土地上中下无色花 城外的草地不再干枯 又有了鸟儿的鸣唱 可是 天空依然昏暗 人们觉得被骗了 搜遍城中每一个角落找寻他的踪迹 在一个废弃的庙宇中 人们发现了他的尸体 没有腐烂的痕迹 反而散发出幽香 他右手紧握着左手 很像当地人祈祷的样子 有些僧侣以为这是神的征兆 便在庙宇中修建了他的雕像 并把遗体深埋在其下 在死亡之神出现在这座城市上空的时候 人们恐慌 奔跑 呐喊 绝望 镰刀落下了 就在那座庙宇上 倒塌 先知笑了 这一天来了 从此 天空恢复晴朗 而这座城 成了空城 然后，我和卡尔走进了红色门，里面有客户要的东西。 "},{"title":"2011年8月25日","url":"/blog/2011/08/26/2011%25e5%25b9%25b48%25e6%259c%258825%25e6%2597%25a5/","date":"2011-08-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月25日 门里的内容很精彩啊，路上捡到了一把铬制匕首，还很锋利，估计雇佣兵丢下的。 门口的另一端是一片沙漠，GPS接收不到信号。没办法，从来没有放弃过，一直向南走吧。 卡尔支起帐篷，我架设红外雷达，就是这么一天。 "},{"title":"2011年8月27日","url":"/blog/2011/08/27/2011%25e5%25b9%25b48%25e6%259c%258827%25e6%2597%25a5/","date":"2011-08-27 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月27日 昨天走了一天的沙漠，终于看见一川绿洲了。沙漠中的绿洲虽然我们现在不需要，但还是很欣慰的。 绿洲中有口井，还未干枯，卡尔穿上潜水衣下到低处，发现下面有个很大的空间。 我和卡尔现在在这个大地穴里，里面有散落的金币，上面有石头城的标记。空气温温的，走两步就会出汗，幸亏还有从黑市换来的“鲨鱼皮”，一套轻型便装，散热排汗的效果真不是盖的，据说是从水之城的特种部队偷来的。 地穴内大约一公里的地方有一个高5米，宽4米的石碑，上边弯弯曲曲的应该是这个地穴的地图。地图的尽头有个红色蝴蝶，跟客户描述符合。 地穴里的生物长的很诡异，应该是蜥蜴亲戚吧，不过眼睛都已经退化了。地面上爬行的东西倒无所畏惧，因为它们好像不会爬过大于60度的角，只有空中飞的一些荧光生物，长着约10厘米翼展的翅膀，令我有点不安。 最终选择在入口处扎营，因为深处还有很多未知，人类的本性我还在学习克服。 "},{"title":"2011年8月28日","url":"/blog/2011/08/30/2011%25e5%25b9%25b48%25e6%259c%258828%25e6%2597%25a5/","date":"2011-08-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月28日 中午十分发现出口，原来地穴没有多大。 出口处有三座石像，其中一座下面按找客户说法有一个水晶盒，好像魔幻故事一般，不过看了那么多也不为奇了。 卡尔挖到第二座时果然发现了水晶盒，明显看到里面有一本书。客户的要求之一就是把书带回，水晶盒放回原处。 我们照做了。 刚才没事儿翻了两页，全是弯弯曲曲的符号。 卡尔将书进行全息扫描后用三防布包好塞进包里。 还有最后一个被要求的东西，没多远了，希望快点结束这旅程。 "},{"title":"2011年8月29日","url":"/blog/2011/08/30/2011%25e5%25b9%25b48%25e6%259c%258829%25e6%2597%25a5/","date":"2011-08-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月29日 枯燥的一天，想在海边吹吹风。 下午收到顾客邮件，说明天在东方的迷雾森林里会有人接应我们进入祭塔。 好吧，现在这小溪边扎营了。 "},{"title":"2011年8月30","url":"/blog/2011/08/30/2011%25e5%25b9%25b48%25e6%259c%258830/","date":"2011-08-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月30 西格蒙，老朋友了。 我们三人在祭祀塔前的木屋里讨论下一步行动。 祭祀塔总共12层，每一层都有一个远古机甲把守，不知道这些机甲到现在还能不能用。客户要的东西在第三层，我们只需要到第三层就够了。卡尔想去顶层看看，我和西格蒙都反对。 卡尔把祭祀塔的前三层钥匙给了我们，说客户只交给他这三把。我相信他。 我看了下钥匙，透明外科，每把都刻有不同的符号，令人深刻的是钥匙里的电路很奇特，从外面看，中间的透明三角形芯片布线都一样，都呈星型放射状。每个放射末端都有镭射口，仔细数了下，总共144个。 西格蒙说祭祀钥匙的加密方法总共有12种，每一种都是不可逆向的，这些钥匙的前11把都只用了一种，而第十二层是前十一种与第十二种的组合。说到这些，破解便无望了。 送走西格蒙后，卡尔立刻睡了，估计是觉得遇到了很大的挑战。 无所谓了，睡了。 "},{"title":"2011年8月31日","url":"/blog/2011/09/02/2011%25e5%25b9%25b48%25e6%259c%258831%25e6%2597%25a5/","date":"2011-09-02 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年8月31日 第一层门按照西格蒙教给我们的开锁方法成功的打开了。 卡尔说手表显示这个房间有VX成分，于是我两人都戴上了防毒面具。 这层的建筑风格与先前见过的逃亡者大厅很相似，五个出口，每个都有不同的符号标记。西格蒙说过，以后两层只要打开对应的白门和红门便可。 在大厅的角落里，卡尔发现一个类似于太空舱的建筑，不足3平米的表面用烙金画有麦克斯韦方程、质能方程、希腊文字、中文、星云图等最能代表人类文明的符号。 最后我注意到大厅中央有个直径2米的圆形标记，颜色很浅，隐藏在地面乱糟糟的纹理中。 不得不怀疑设计这大厅人的审美，墙体是暗色吸光材料，使得整个大厅显得阴沉，地面纹理与天花板纹理除了中心一个圆外，其他我哪都找不出显得美的地方。 卡尔把钥匙放进白色门的暗槽里，中心圆亮了。 我惊奇，我诧异，我的手持示波器检测出中心圆发出的光与我们进行时间穿梭时的频率相同。 卡尔也放心了，站了上去。 待卡尔消失后，我也站了上去。我最不喜欢这感觉，一阵眩晕，很想吐。 第二层还算有点内容，墙体有洛基大浮雕，地面是许多同心圆用中心线等分，标记有不同颜色，好像飞镖靶盘啊。 这层空气显示倒是很干净，我们也脱下了面具。 这时我忽然想起来，守护者在哪？ "},{"title":"2011年9月3日","url":"/blog/2011/09/03/2011%25e5%25b9%25b49%25e6%259c%25883%25e6%2597%25a5/","date":"2011-09-03 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月3日 守护者，等了千年。。 卡尔胸口被激光划伤了，烧焦了点表皮。 我把守护者的核能电池取出来了，外壳就留在了塔里。客户发电邮说收到货，已经把钱汇入我的账户里了。 可是现在，我还是没想到，守护者是他们。。 卡尔已经回家了被老沃森送回去了，我提前打电话给莉莉说卡尔被工地的玻璃管划伤，伤口已经被处理了，好好照料他就行了。 屋后的它今晚只是静静的窝着，浅灰毛发被徐风吹动，偶尔看看天空满月，多悠闲的野兽啊。 明天处理两颗电池，自己留下一颗。 "},{"title":"2011年9月4日","url":"/blog/2011/09/04/2011%25e5%25b9%25b49%25e6%259c%25884%25e6%2597%25a5/","date":"2011-09-04 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月4日 今天去了卡尔家，莉莉依旧那么漂亮。 我把核能电池的改造计划给卡尔说了一遍，卡尔说太好了，如果早就有的话省了受这苦了。 在卡尔家吃了午饭后，骑着老沃森来到Wild。老板送了我一包自制的烟丝，说女儿很喜欢那个夜视仪，我俩都笑了，天知道小林要它干嘛。 下午来到狗头胡同，溜达了一圈，陌生的脸孔多了很多，好像最近雇佣兵活动频繁了。挑了个6.2的引擎给沃森换上，感觉确实不错哦。顺便在李老板那淘了些缓冲配件，给新武器用的。 傍晚时候，天空的云彩燃烧 烧红了山峦，给自然最后的奉献 起伏着的地势，隐藏着秘密万千 我的颜色不再只是黑与白 一个人的时候，我会再想起你的笑脸 "},{"title":"2011年9月5日","url":"/blog/2011/09/05/2011%25e5%25b9%25b49%25e6%259c%25885%25e6%2597%25a5/","date":"2011-09-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月5日 早上梦见了头上长根角，还梦见了曾经的她。 有一天我若真的老去，我会不会回忆那些思念的日子？ 就像那时候，好多人在我周围，在俄罗斯边境巡逻，在阿拉斯加搜救，在夏威夷日光浴，在阿富汗贩卖AK。。。看看手上的老茧，那些事似乎就在昨天，他们就住在离我不远而我始终到达不了的地方。 在地下室把核能电池改装了，从里面引出了个核能接口，加在缓冲器的一端，另一端接在发射口。如果缓冲器效果好的话，那就没必要加转换装置了。 卡尔的伤应该差不多了，明天带他去西郊试下这东西。 surprise~ "},{"title":"2011年9月6日","url":"/blog/2011/09/06/2011%25e5%25b9%25b49%25e6%259c%25886%25e6%2597%25a5-2/","date":"2011-09-06 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月6日 早上收到邮件，一名老客户，来自拉巴德。由于政府担心印度与其临近一个大国的军事实力差距扩大，所以暗中联系他，希望他能进行次调查。而后的调查过程中，他在阿里地区发现了一个有轻微辐射的空洞，希望我们能去看看。 虽然不情愿接受这种活，可毕竟是老客户，便回复说可以。 中午与卡尔驱车到西郊，那风景依旧啊，被遗弃的湿地。 说实话，新武器效果确实惊人，缓冲器满能后穿透20厘米厚钢板，并且伤害口径只有6.2毫米。卡尔说要起个名字，我当时就想起屋后的它，说叫“豺”吧，他也觉得不错。 又在卡尔家吃了晚饭，莉莉手艺自从卡尔负伤后进步很大啊。 "},{"title":"你还可爱么","url":"/blog/2011/09/07/%25e4%25bd%25a0%25e8%25bf%2598%25e5%258f%25af%25e7%2588%25b1%25e4%25b9%2588/","date":"2011-09-07 00:00:00 +0800","categories":["生活杂记"],"body":"就像你说的，这么多年过去了，你还可爱么。。 你在桥上低吟，好像你我都熟悉的那首歌 我从旁边经过，你没发现 离近了，便知不是了，我没有失望，因为关于故事的希望已经被深埋   身边人，我们从来不缺，越来越多，或者越来越少 我们能做的越来越多，关心的也越来越少 有一天，你停下来休息，不是因为累了，而仅仅是你想 我没理会，继续走 忽然回头发现你不见了，我开始着急，可是如今也找不到   天空放晴，便会有燕子出来 于是，再也不会有亘古的风、破碎的碑 你我都知道，那些都已过去 我看见音符在湖面飘过，路上行人匆忙没法去捕捉 它们越飘越高，越飘越高，直到人们听不见、看不见、忘却它们存在过   你在人群中，这样便觉得人人都能看见你，或者没人能看见你 好久、好久，人群扩大了，人们的注意力不知道都去哪了 是这样么 是这样的话，那么便没人去理会了   如果最后一句要总结全文的话，那就是 你还可爱么。。 "},{"title":"2011年9月7日","url":"/blog/2011/09/07/2011%25e5%25b9%25b49%25e6%259c%25887%25e6%2597%25a5/","date":"2011-09-07 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月7日 kernel.org被攻击，不知道是个人还是公司所为了。我想如果这人露出什么马脚的话，那他的余生将会是场梦魇。 给卡尔发了封邮件，说准备下，后天去西藏了。 晚饭时候卡尔回复说刚从城里回来，见了西格蒙，寒暄几句后他给卡尔介绍了一个客户。客户的要求很简单，他对上次我们去的祭祀塔很感兴趣，要卡尔带他去，只要找对地方，价钱自然合理。 我同意了，觉得卡尔现在单独行动的能力应该恢复了。 日程提前，明天出发。 "},{"title":"2011年9月9日","url":"/blog/2011/09/10/2011%25e5%25b9%25b49%25e6%259c%25889%25e6%2597%25a5/","date":"2011-09-10 00:00:00 +0800","categories":["lofyer的日记"],"body":"该来的总会来。 昨天连夜赶到西郊，深处的房子里还有些我的老朋友。 一宿没睡了，有点困。 人形机器人曼森，今天凌晨一点十分再次启动。他告诉我代号狩豺行动在格林乔治时间十三点开始。看来要晚些才能去旅游了。 有点出乎意料的是将军秘书也来了，嗯，风韵犹存的女人，希望我俩的过节她早忘记了。 她把我和曼森带到城中心的公园，在灌木从里找到了通往地下城的空间门。我不喜欢地下。。可是，算了，毕竟要报恩的，也是跟过去一个交代了。 如今的地下城比十年前我来的时候发展太多了，全是短距离空间运输机维持交通，城中广场竟然还放着城市全息图像。 在旅馆里，秘书交给我目标的资料，我大概扫了一眼，放在一边，专心和秘书聊天。 曼森一直在下载资料，不知道多少PB才能塞满他的脑壳。 现在不是睡觉时间，再去跟秘书唠会儿吧。 "},{"title":"2011年9月10日","url":"/blog/2011/09/11/2011%25e5%25b9%25b49%25e6%259c%258810%25e6%2597%25a5/","date":"2011-09-11 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月10日 早饭是生鱼片配姜汁，旅馆只提供这一种早餐，不习惯啊。 广场留下记号，很快收到回复，在游乐场碰面。 在桥下收到里奇留下的箱子，装备都在里面。 回到旅馆后秘书已经走了，感觉有点失落。那个破机器在分析下了一整夜的资料，我回去泡杯咖啡的时间里他正好完成。结果出来了，目标在市政厅地下5层的仓库里。 11点了，准备潜入。 "},{"title":"2011年9月12日","url":"/blog/2011/09/12/2011%25e5%25b9%25b49%25e6%259c%258812%25e6%2597%25a5/","date":"2011-09-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月12日 可恶的机器，浮点转化的问题吧，少算了一天。 我们都生活在时钟里，快慢依靠时钟的走动，曼森说，可是将军制造我的时候把我和时钟外的世界链接起来了，所以被跳过的24小时不会影像接下来的行动。 已经到达市政厅地下5层仓库，仓库共有14个房间列在走廊两侧。监视器已经被曼森黑掉，换成了正常画面。我和曼森小心地在走廊里搜索，终于在9号门找到黑橄榄枝标记。 曼森的手就是把万能钥匙，在电子锁上了划下，门开了。他开启隐身探测模式，进去看了下，没有发现什么可疑的东西，然后我便进去了。 房间里摆满了各色的瓶子，上边的标签是生物污染标识。我穿的轻便防化服和全护头盔应该够吧。曼森找到标有B-Namen的瓶子放进钢化瓶中，然后再塞进背包里。 很有好莱坞风格的警铃终于响起，计划顺利。 "},{"title":"2011年9月13日","url":"/blog/2011/09/14/2011%25e5%25b9%25b49%25e6%259c%258813%25e6%2597%25a5/","date":"2011-09-14 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月13日 基因库乱了，曼森毫无头绪。 从Wild老板那拿的烟丝也差不多快抽完了，我给将军秘书发了邮件，回复说需要等。 曼森的右手出现一点腐烂，估计是在分析的时候被污染了。 "},{"title":"2011年9月14日","url":"/blog/2011/09/14/2011%25e5%25b9%25b49%25e6%259c%258814%25e6%2597%25a5/","date":"2011-09-14 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月14日 伦敦西敏寺被盗，秘书发来邮件说达尔文胸前的挂件现在在不丹的帕罗宗。 我回复说，好远。。 曼森终于分析出样品中的DNA排序，现在他已经离开地下城，我自己呆在旅馆。 需要等，反正也是闲着，从本地的商贩那买来城市微缩全息图，开始改造。 "},{"title":"2011年9月16日","url":"/blog/2011/09/17/2011%25e5%25b9%25b49%25e6%259c%258816%25e6%2597%25a5/","date":"2011-09-17 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月16日 人员拥挤，这个地方太吵了。 昨天卡尔回来了，然后我们没休息直接乘将军秘书的私人飞机来到不丹。 天气有点干燥，不过温度还算合适。 早上5点左右将军秘书带我们来到当地军火商Kazatu的宅园，还好，这个地方没有狗。 Kazatu与将军在内战时有过交易，一直持续到内战结束，后来将军下台还主动联系他，而他也十分厚道，帮将军度过难关。 将军已经提前与Kazatu联系，所以Kazatu就直奔主题了。早饭结束就来到他的会客厅之一，“世界和平”，这小子真有喜感。 果然不出所料啊，从混合钛刀到PSG 2 轨道枪，所有我能想到的单兵狙击设备在了。 Kazatu说随便拿，卡尔毫不客气举起了轨道枪，Kazatu保镖Hex眼神即可变的警觉地起来。我觉得没什么可拿的，因为来的时候我已经带的差不多了，包括我的新宝贝。 但是Kazatu见我没拿他就有点不爽了，告诉Hex出去一下，然后他从怀中拿出钥匙打开了“盲人”后面的暗门，从里面取出了个黑盒子，给我。 我现在也没打开，他说需要的时候自然会开。 下午和卡尔、秘书、Kazatu、Hex在马场晃悠了会儿，话说Kazatu养的马真安静，就是悠闲地漫步。 "},{"title":"2011年9月17日","url":"/blog/2011/09/18/2011%25e5%25b9%25b49%25e6%259c%258817%25e6%2597%25a5/","date":"2011-09-18 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月17日 安静的夜晚，喝着Kazatu私藏的干红，徐风吹拂，远处草场不时传来动物的鸣叫。 我们要的都是这份宁静。 "},{"title":"2011年9月18日","url":"/blog/2011/09/19/2011%25e5%25b9%25b49%25e6%259c%258818%25e6%2597%25a5/","date":"2011-09-19 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月18日 所有的昨天都已逝去 我们只有迈着步子往明天走 当下可活 如果琳琅满目 猫头鹰也会失去方向 夜袭的乌云掩盖今天的月亮 引擎声从远处传来 可是它渐行渐远   有人蒙上了上帝的双眼 猜不着 因为彼此都是凡人 "},{"title":"2011年9月21日","url":"/blog/2011/09/21/2011%25e5%25b9%25b49%25e6%259c%258821%25e6%2597%25a5/","date":"2011-09-21 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月21日 目标已被狙击，卡尔在回Kazatu庄园的路上。 我一个人在山脚下，翻过去就是中国境内了。 温度有点低，装备都在自适应背包里，应该没什么影响。 刚才路过了一支登山队员，他们没有发现我。 将军私人频道已经打开，随时可以报告情况。 "},{"title":"2011年9月22日","url":"/blog/2011/09/23/2011%25e5%25b9%25b49%25e6%259c%258822%25e6%2597%25a5/","date":"2011-09-23 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月22日 卡尔刚联系我说帕罗宗的挂件他已经顺便取回，比较神奇的地方就是挂件里面有条小鱼好像一直指向某个地方，他已经将它的指向映射到我的手表上，可以随时观察。 这里距拉萨还有60公里，小鱼指向山南地区方向，应该是那里吧。 改造的全息地图放大后我看到的尽是山峰，偶尔有几只羚羊雪豹什么都路过，达尔文到底隐藏了什么。。 不管了，明天还得继续走。 "},{"title":"2011年9月24日","url":"/blog/2011/09/24/2011%25e5%25b9%25b49%25e6%259c%258824%25e6%2597%25a5/","date":"2011-09-24 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月24日 昨天一路，东北方向。 晚上8点了，现在在浪卡子县城里。 城里不少游客，进城之前我换成了登山装。 在曲德寺里与孙生碰面，他在上次任务后退役，来这作了喇嘛。交谈一番，颇有领会。 终生向善，他也没问我来此作何，只给我在旁边到牧民家里安排了住处，便回寺里了。 他是真到变了很多。。   "},{"title":"2011年9月25日","url":"/blog/2011/09/24/2011%25e5%25b9%25b49%25e6%259c%258825%25e6%2597%25a5/","date":"2011-09-24 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月25日 早上5点临走时候，牧民卓尔送我把藏刀，说是大头喇嘛送给我的。当地人都这么叫他，因为不知道他原名。 六点一刻到达空母错后面的龙卡乡，山南地区一个名不见经传的小乡村。 中午简单吃了几块压缩饼干和巧克力，然后开始测量这片地区的辐射数据。拉巴德客户描述的是阿里地区，我之所以选择山南地区的这个地方是因为日志系统中显示阿里与山南都曾出现过OP-1E机器战甲活动迹象。政府从来不会向没有价值的地区派遣这种战甲，所以我感觉找到这里的原因那么阿里的也就差不多了。 湖边碰见一个朝圣者，膝盖绑着厚厚的牦牛皮，不过也磨损很严重了。我把背包中备用的纳米护膝给他了，已经事先把迷彩刮掉的。作为交换，他送给我一块金属，说是从来的路上捡到的。 现在还在进行分析，检查下周围红外警戒仪休息吧。 "},{"title":"2011年9月26日","url":"/blog/2011/09/26/2011%25e5%25b9%25b49%25e6%259c%258826%25e6%2597%25a5/","date":"2011-09-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月26日 现在时刻早上8点，地点29.016922:90.478506，提前记录。 接下来的30个小时之内我都没法休息。 "},{"title":"2011年9月28日","url":"/blog/2011/09/28/2011%25e5%25b9%25b49%25e6%259c%258828%25e6%2597%25a5/","date":"2011-09-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月28日 地下五十五米，灰白土质快过了，没信号。 昨天发现地宫入口，并在门口捡到OP-1E履带碎片，看样子有段时间了。 辐射探测器显示入口30400nGy/h，为自己健康着想我就回到地面了。 把入口照片发给拉巴德客户，碎片我也拍照发去了。 晚上叫孙生给我联系辆去拉萨的车，我不想再走着了。。虽然衣服动力系统设计很好。。 "},{"title":"2011年9月29日","url":"/blog/2011/09/30/2011%25e5%25b9%25b49%25e6%259c%258829%25e6%2597%25a5/","date":"2011-09-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月29日 好吧，那就开始。 我需要一个人冷静。 她不知道我在这儿，卡尔只是告诉她我要很久才能回来。 十五年前因为她的原因我去参军，七年前因为她的原因我加入将军的雇佣军队，两年前因为她的原因我离开战友们，而她却悄悄离开。 现在回来告诉我当时很紧急，迫不得已不打招呼才走的。期间我问过将军，将军说也很久没有她的消息了，夜幕行动里的十二名战士全部消失，而她正在其中。 我从没埋怨过谁。 犹如霹雳，劈裂了我的心。 我在考虑去留的问题，我想了很多不见她的理由，有几个很满意。呵呵。 明天到飞到帕罗，不管什么了。   "},{"title":"2011年9月30日","url":"/blog/2011/10/02/2011%25e5%25b9%25b49%25e6%259c%258830%25e6%2597%25a5/","date":"2011-10-02 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年9月30日 Kazatu在等着了，将军也在庄园里。 晚宴后，我们三人来到将军在本地的别墅。 将军说，西敏寺的守门人昨晚被发现死于家中，阿里地区和山南地区辐射值异常，相信注意到这些的不止我们。夜狐雇佣军里的间谍发来信息说，阿拉斯加的政府派遣了一批装备精良的雇佣兵到北冰洋的一个小岛上。 Kazatu说不会是矿物，按照历史看来那里应该又有部分遗迹文明活动。 这也不是不可能，阿里地区和南山地区在军方日志中都有提到，上面记载着将军的雇佣兵于这两地都曾遭遇OP-1E。政府军就是利用从遗迹文明发掘的技术创造的它们，可是由于是技术的原因，它们只能在渐渐消失的遗迹文明碎片周围活动。 阿拉斯加这次很可能是发现了大批遗迹文明碎片。 "},{"title":"2011年10月3日","url":"/blog/2011/10/03/2011%25e5%25b9%25b410%25e6%259c%25883%25e6%2597%25a5/","date":"2011-10-03 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月3日 回家的感觉真好，虽说这个木屋我才住了两年。 她白天在卡尔家里，打电话让我过去，我说晚上会去的。 下午去Wild从店主那拿了一罐店主磨制的咖啡，然后直接去了卡尔家。 他们三人在门口等我了 ，她还是老样子。 晚饭期间，我们话并不多，虽然卡尔和莉莉在努力帮我找话题。 我本打算一个人回来，可我听见一个声音，要珍惜。 她在睡觉，我在地下室再折腾会儿，马上上去。 "},{"title":"2011年10月4日","url":"/blog/2011/10/05/10-4/","date":"2011-10-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月4日 我应该原谅的。 她给我的解释让我稍微有了勇气去原谅她。 那次行动发生了无法处理的意外，如她所说，遗迹守护者觉醒了，杀死了其他十一人，最近的一个是上个月被发现死于悉尼某个旅馆中。逃亡中期间她得知，守护者被设定为每年最多处决5个人，她是今年的第六个，也就是说明年守护者才会来找她。 她不想再逃了，所以回来了，就是这么简单。 我让卡尔帮我去搜集有关守护者的消息了。 她仍旧记得我就好。 "},{"title":"2011年10月5日","url":"/blog/2011/10/06/2011%25e5%25b9%25b410%25e6%259c%25885%25e6%2597%25a5/","date":"2011-10-06 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月5日 今天九月初十，祭日。 双鱼星座闪耀。 "},{"title":"2011年10月6日","url":"/blog/2011/10/06/2011%25e5%25b9%25b410%25e6%259c%25886%25e6%2597%25a5/","date":"2011-10-06 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月6日 今天屋后很安静，昨天也是。 早上起床时她准备了早饭，我有些不习惯。 中午我带她去镇上，Wild老板对我很邪恶地笑了笑，我也很邪恶的回应了他。她说不喜欢这里，我就带她去了郊区。 守护者，什么样子。 心很乱。 "},{"title":"2011年10月7日","url":"/blog/2011/10/08/2011%25e5%25b9%25b410%25e6%259c%25887%25e6%2597%25a5/","date":"2011-10-08 00:00:00 +0800","categories":["lofyer的日记"],"body":"晚上陪她去了市里的剧院，凯尔特人的《吟游诗人》。 回来躺在屋后的石头上，望着圆月，我说，精灵就在这石头下面一样欣赏着明月的皎洁，你去看它们，它们便会立刻躲起来。她笑了笑，一只灰色，一只紫色哦。 我把小狼的窝指给她看，正好有两只狼崽在，我们就这样对视着。直到狼妈妈回来，它们才低头偎依在母亲怀里。 卡尔留言说他已经打听出守护者的消息了，详细文件也发给我了。 大概看了一下，按照军方日志，守护者可以变化成任何它接触到形式的生命体，已经被发现使用的武器是可以从身体任意部位长出的毒刺、隐藏在体内的离子炮，弱点尚未发现。 "},{"title":"2011年10月8日","url":"/blog/2011/10/09/2011%25e5%25b9%25b410%25e6%259c%25888%25e6%2597%25a5/","date":"2011-10-09 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月8日 卡尔邮件里有块从守护者身上取下来的挂件，下面记录下分析结果。 尺寸: 125.0mm X 30.2mm X 55.5mm 材质: Ti-5Al-2.5Sn(TA7) 空腔: 123.0mm X 28.2mm X 53.5mm 制造时间: 未知 黑盒测试: 输入能级        输出能级 1E                    1.1E 2E                    2.2E 3E                    3.3E 5E                    5.5E 10E                  11.0E 能量输出形式: 450.2 nm 神经网络部件: 未知 。。。 这个小东西能独立思考，那么也就能与守护者通讯。 看来，守护者离我们不远。 "},{"title":"2011年10月10日","url":"/blog/2011/10/11/2011%25e5%25b9%25b410%25e6%259c%258810%25e6%2597%25a5/","date":"2011-10-11 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月10日 休息了，跟卡尔夫妻俩还有她在未名山里晃悠。 不老泉的传说 吸引女王派遣了军队 十年过去 无一人返回 女王憔悴了，苍老了 一个吟游诗人来到城堡，女王亲自接待他 华贵的衣服，艳抹的梳妆 诗人诧异，说，陛下难道喝了不老泉的水？ 女王苦笑 从此有个故事流传，不老泉里有诗人的灵魂守卫，每一个追寻它的人都将得到诅咒 "},{"title":"2011年10月11日","url":"/blog/2011/10/12/2011%25e5%25b9%25b410%25e6%259c%258811%25e6%2597%25a5/","date":"2011-10-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月11日 我不是摄影师，我也不是编剧，更不是导演，我是观众，躺在沙发上喝着可乐嘴里念叨着台词的观众。 我不想别人看到我的脸，有时候甚至是我自己。 栅栏外人群涌动，是警察和士兵。我坐在红色沙发上，很冷静的样子。我能听见，播放机里鲍伯·迪伦激扬又慵懒的声音。然后是一道光打破了窗户，玻璃破碎的声音。 另一个场景，瀑布，丛林，悬崖，老藤。彩虹就在我脚下，可是我感觉不到冰凉或者温暖。水雾，蒸汽，模糊了视线，可是又逐渐清晰。 又是一个梦，明天返程。 "},{"title":"2011年10月12日","url":"/blog/2011/10/13/2011%25e5%25b9%25b410%25e6%259c%258813%25e6%2597%25a5/","date":"2011-10-13 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月12日 到家了。 回来的路上跟卡尔讨论了下守护者的机械特性，试图从中找到弱点，无果。 四人一起在市中心的“暮光”餐厅就餐，她和莉莉聊的很好。 回来后收到将军秘书的私人邮件，里面有守护者的核心运作原理。不知道她从哪搞到的，我也没问，只说了声谢谢。晚些时候她回复到，祝福我和归来的女友幸福。 得，就这么地吧，再想下去我会决定对不起她。 Tight sleep~ "},{"title":"2011年10月13日","url":"/blog/2011/10/15/2012%25e5%25b9%25b410%25e6%259c%258813%25e6%2597%25a5/","date":"2011-10-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月13日 时间一天天逼近，我感到有压力。 今天继续分析守护者的核心。 "},{"title":"2011年10月14日","url":"/blog/2011/10/16/2011%25e5%25b9%25b410%25e6%259c%258814%25e6%2597%25a5/","date":"2011-10-16 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月14日 累。 从代码来看找到漏洞有： 1.发动careforce后5秒钟内再发动innerforce会出现崩溃，不过只能持续2秒钟，2秒钟内攻击他会造成致命伤害。 2.发动microlaser时如果呼吸管道A遭到IOL-13病毒入侵，管道A会崩溃，修复时间需要50分钟，修复过程中如果发动innerforce会崩溃，持续两秒钟。 3.自修复程序的调试通道接受1.3PB数据的1分钟内，若运动神经出现条件反射C（功能不明），则会造成innerforce效果只有原来的10%，持续1分钟。 PS： highmem区域有部分代码加密方式与祭祀塔相似，我可能需要联系下西格蒙了。 "},{"title":"2011年10月15日","url":"/blog/2011/10/17/2011%25e5%25b9%25b410%25e6%259c%258815%25e6%2597%25a5/","date":"2011-10-17 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月15日 早上收到将军邮件，说他的私人空间站与地面失去联系，希望我能过去看看。 没办法，去不了。 "},{"title":"2011年10月20日","url":"/blog/2011/10/21/2011%25e5%25b9%25b410%25e6%259c%258820%25e6%2597%25a5/","date":"2011-10-21 00:00:00 +0800","categories":["lofyer的日记"],"body":"他失落过，当他第一年入伍没能加入特种部队时 他绝望过，当他第一次被困在黑暗的深海废墟时 他彷徨过，当他第一次离开部队再次走进社会时 他心碎过，当他第一次失去心爱那个她的消息时 终究，这些都不算什么 他认为，这不是他的极限 这些天来，他几乎没和眼，让机器不停入侵各国服务器搜索分析守护者的所有音像文字资料，有野文，有官方日志，有私人记录一堆资料。 他相信直觉，会找到的。 一丝凉风吹过脖颈，他知道他需要休息了。 她的背影一直在他眼前，他不敢怠慢。 或许是压抑了的种子，经过亿万年的沉默，要迎着阳光再次接受这个沧海桑田的世界了。 而它第一个需要突破的，便是它自己的外壳，已经沦为化石的外壳。 "},{"title":"2011年10月21日","url":"/blog/2011/10/22/2011%25e5%25b9%25b410%25e6%259c%258821%25e6%2597%25a5/","date":"2011-10-22 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月21日 卡尔负伤，他在我不知情的情况下找到了守护者并试图攻击。。。 情形有点复杂了，本来守护者应该在11月来到，看来明天就会到达。 不出意外的现在它应该又多了一个目标——卡尔。 今夜开始准备，希望那些材料有用。 "},{"title":"2011年10月22日","url":"/blog/2011/10/22/2011%25e5%25b9%25b410%25e6%259c%258822%25e6%2597%25a5/","date":"2011-10-22 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月22日 可以开始了 "},{"title":"2011年10月23日","url":"/blog/2011/10/23/2011%25e5%25b9%25b410%25e6%259c%258823%25e6%2597%25a5/","date":"2011-10-23 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月23日 A tough day… Really tough a day… Pretty tough… 守护者没有想象中的难以对付，我和西格蒙迂回了半个小时，终于在他释放laser的时候击中他护甲下侧的软骨，爆破成功了。。 碎片收集起来了已经，里面会有很多秘密的吧。 我有点不明白，为什么守护者会先去找已经受伤的卡尔，核心代码里的任务优先级还有其他算法隐藏了么？ 西格蒙明天回去，我和她去送他，莉莉照顾卡尔。 一会儿把作战日志写出来。 "},{"title":"2011年10月24日","url":"/blog/2011/10/26/2011%25e5%25b9%25b410%25e6%259c%258824%25e6%2597%25a5/","date":"2011-10-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月24日 那些我们爱的 还有那些我们恨的 他们在追赶早晨的列车 掂着猫步，甩开群摆，走来 悠扬琴声，水珠散落一地，弹开了青春 又到高潮，巴西舞娘诱人，篝火般鬼魅 "},{"title":"2011年10月25日","url":"/blog/2011/10/26/2011%25e5%25b9%25b410%25e6%259c%258825%25e6%2597%25a5/","date":"2011-10-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月25日 Kazatu要我给他寄去几件守护者碎片，应该是将军告诉他的。 我打算抽出几片我感觉没什么用的寄给他，他或许会感到欣慰些吧。 不过这个守护者身上以我个人实力能用的东西真不多，加密太严重，传输太诡异。 她明天去镇上，我让她自己去，她也感到高兴。 "},{"title":"2011年10月26日","url":"/blog/2011/10/27/2011%25e5%25b9%25b410%25e6%259c%258826%25e6%2597%25a5/","date":"2011-10-27 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月26日 早上她给我打电话，说晚上会有米勒博士的演讲。这么些年来他一直专注于人工智能领域，在机械人学习方面很有造诣，这次的内容是《自适应人类身体的机械思想》。 早些年听过米勒博士，嗯，负面新闻——他对实验人体进行安乐死，然后将大脑取出，放入他自己研制的神经网络电路，结果没能成功激活人体。由于这件事，他被法院以故意谋杀罪判处有期徒刑十年，他也没作反抗老老实实就进去了。 演讲在7点开始，她和我先在对面的咖啡店坐了会儿。 确实，他是一个很有天赋的人。演讲中，他毫无掩饰的引用了十年前的活体实验，说结果其实不是媒体报道的关进监狱。“十年来我从没有被逮捕或者囚禁，我一直受雇于飞猫雇用军队，帮他们制造神经网络电路。现在，他们的时代结束了，你们都能从新闻上看到。而我现在带着我这10年来悄悄实验的结果回到祖国来了！”，“或许你们有过一个体验，既是身体某个部位异常时，比如刀伤病变，而它自己在努力回到从前。它从DNA里获取它最初的消息，吸收能量，恢复它原本的面貌。“，“如果机器能够捕捉到这个过程，那么它便能够学习并且促进自身恢复”，“大脑的缺失可以造成身体不可恢复挫伤，大脑提供了功能和调度，机器先学习大脑功能，然后植入人体从而获得成长的温室”，“想想一下，你有一个钢铁意志般、反应速度在纳秒级、学习能力超强并能快速自愈的战士，而且他绝对服从命令，你会得到什么？” 呵呵，假如我买一个回家的话，那就让他给我敲代码去。 "},{"title":"2011年10月27日","url":"/blog/2011/10/28/2011%25e5%25b9%25b410%25e6%259c%258827%25e6%2597%25a5/","date":"2011-10-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月27日 感觉很糟糕。 我们自由的身体，束缚。 我们如果只是相信，有那么一天会来到，人人都毫无怨念的活着。 我们的信念，我们的行动，都在岩浆中迸发。 水潭边两只狮子，四目相对，低吟。 如果要动手，牺牲的是水潭。 "},{"title":"2011年10月28日","url":"/blog/2011/10/28/2011%25e5%25b9%25b410%25e6%259c%258828%25e6%2597%25a5/","date":"2011-10-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月28日 上午卡尔叫我出来去下黑市，在那里他给我引见了Max。 Max是个辞退的飞猫雇佣兵，曾经在米勒博士手下干过。他给我看了一份文件，是米勒博士关于死体重生的研究结果。卡尔觉得这人挺靠谱，意思就是有钱就能办事儿的那种。 资料本身没什么特别之处，倒是最后落款是西班牙政府的戳。 我们在废墟之城那次的客户是西班牙后裔，而西格蒙交给卡尔的客户也是西班牙的秘密警察。（我承认，我调查了客户背景。） 难道接下来的行动又和西班牙政府有关？ 将军的私人空间站已经修复完毕，懒的去了，和几个工程师沟通下远程调试，又给他们加了个自恢复的维修机械臂。 "},{"title":"2011年10月29日","url":"/blog/2011/10/29/2011%25e5%25b9%25b410%25e6%259c%258829%25e6%2597%25a5/","date":"2011-10-29 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月29日 每一天都是新的，不管是痛苦抑或幸福。 感谢她带给我的一切。 "},{"title":"2011年10月30日","url":"/blog/2011/10/30/2011%25e5%25b9%25b410%25e6%259c%258830%25e6%2597%25a5/","date":"2011-10-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年10月30日 这几天很轻松，陪着她到处跑。 考虑在阿拉斯加安家，她也同意了。 "},{"title":"2011年11月1日","url":"/blog/2011/11/01/2011%25e5%25b9%25b411%25e6%259c%25881%25e6%2597%25a5/","date":"2011-11-01 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月1日 世界不会认可谁，所谓伦理和道德只是强者制约弱者的条文，所谓怜悯和惩戒只是食物链中的代谢产物。 达尔文之前的人类认知中，文明进步是生与死的交替，之后仍然是。 媒体生而为娱乐大众，适当的反对中央集权可以获得更好的平衡，因为盖世太保发烧也得打针吃药。 人类自身便是武器，能创造，能毁灭，当然，最后不免沦为仓库一角的垃圾。 昨天去了教会，跟一群自以为了不起的人扯淡。 今天她做的干炒牡蛎不错，嗯，的确不错哦～ "},{"title":"2011年11月3日","url":"/blog/2011/11/04/2011%25e5%25b9%25b411%25e6%259c%25883%25e6%2597%25a5/","date":"2011-11-04 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月3日 CODE: ENIGMA 赛格纳 –> 赛纷 –> 地中海 在地中海中转货物，卡尔已经联系好买家接头。 这两天不去记录，暗流涌现。 "},{"title":"2011年11月4日","url":"/blog/2011/11/04/2011%25e5%25b9%25b411%25e6%259c%25884%25e6%2597%25a5/","date":"2011-11-04 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月4日 遇到个有点二的中间人，问的太多。 她在家应该没事吧，今夜转机回去。 阿拉斯加那边我打了电话确认，不出意外年底可以过去了。 "},{"title":"2011年11月5日","url":"/blog/2011/11/05/2011%25e5%25b9%25b411%25e6%259c%25885%25e6%2597%25a5/","date":"2011-11-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月5日 有点累。 回来时候路过Wild，老板不在，老板女儿调皮地告诉我说她妈妈回来了。我把从地中海带的一个手链送给她了，然后告诉她如果爸爸回来的话告诉他谢谢帮我照顾老沃森。 我回来时她刚从卡尔家回来，说莉莉教她做了甜点，一会儿做给我当宵夜。 这次送的货好多都是从守护者身上取下的，明天下午三点客户汇款。 她很喜欢我联系的阿拉斯加的那个别墅，下个星期我们会过去看看。 另外，屋后的小狼最近没出现，不知道怎么了，明天早上去后山看看。 "},{"title":"2011年11月7日","url":"/blog/2011/11/07/2011%25e5%25b9%25b411%25e6%259c%25887%25e6%2597%25a5/","date":"2011-11-07 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月7日 昨天早上有预感，带着医药箱去的后山。大约在离房子3公里的一个灌木丛里发现了它，腿上已经腐烂了，它在舔舐着伤口。消毒，包扎，它并没有反抗。 将它抱到老沃森后座，在附近转悠了几分钟，发现有只体型稍微大点的狼远远观望。应该是它对象吧，我猜测。我留了一块干牛肉在它旁边，然后便自己回来了。 她已经定好了两张去巴罗的机票，今天我们去了卡尔家吃了晚饭，明天要早起啊。 "},{"title":"2011年11月8日","url":"/blog/2011/11/08/2011%25e5%25b9%25b411%25e6%259c%25888%25e6%2597%25a5/","date":"2011-11-08 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月8日 有点冷。 现在在酒店，刚跟那人通话，明天上午去。 "},{"title":"2011年11月9日","url":"/blog/2011/11/10/2011%25e5%25b9%25b411%25e6%259c%25889%25e6%2597%25a5/","date":"2011-11-10 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月9日 莉莉出事了，卡尔夜里邮件说。她一个人去市里，然后没回家。 卡尔把匿名邮件发给我，内容很简单，一张莉莉惊吓的相片。 看了下相片信息，全部被处理了，一堆NULL。 我把地下室新密码告诉卡尔，让他自己去拿东西。应该都是小毛贼，好对付。 她很喜欢周围的环境，干净，又不乏幻想。 "},{"title":"2011年11月10日","url":"/blog/2011/11/11/2011%25e5%25b9%25b411%25e6%259c%258810%25e6%2597%25a5/","date":"2011-11-11 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月10日 她在睡觉，我从卡尔发给我的附件中找到这次绑架莉莉的是前飞猫雇佣兵。 飞猫，曾经是中东一代军事霸主。不过，在90年代柏林墙推到之后，曾经的头目被捕，飞猫从此一蹶不振。残余力量在世界各地都有分布，主要去向是其他雇佣部队，或者在野。 夜里又收到邮件，有飞猫的标志。 内容很简单，如果我和卡尔在本月15号之前把由前西班牙GOE退役军人开在帕尔马的一家地下赌场里，拿到他们要的货物的话，就放了莉莉。 我觉得这群小猫咪背后有一个不逊于将军实力的军阀或者财团，要不不会找上我们的。 "},{"title":"2011年11月11日","url":"/blog/2011/11/12/2011%25e5%25b9%25b411%25e6%259c%258811%25e6%2597%25a5/","date":"2011-11-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月11日 下午三点和卡尔到达帕尔马。 首先我们去老朋友格林那，他刚从部队退役不到半年，在当地混的还比较开。 从格林那我们选了一些单兵装备，都不是很新，可性能都很稳定。格林是个公认的武器改装大师，我们很相信他的技术。 现在时间是深夜十一点，格林在外边给我们提供信息，准备行动了，尽量保持低调。 "},{"title":"2011年11月13日","url":"/blog/2011/11/14/%25e5%2592%258c/","date":"2011-11-14 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月13日 卡尔显得有些焦虑了。 昨天夜里基本目标的情况搞清楚了。赌场共分三层，地上一层是个小超市，附近人流很多，不会有人注意到它的情况；地下一层将近500平米，里面游戏设备还算全，客户多是些老板或者势力头目，玩的价码基本都是5万美金以上；地下二层入口只有一个，有两名守卫，配备的都是沙鹰，没法冲进去。 格林今天上午给我们引见了他的兄弟阿拉德，主要在当地搞些军火生意，也是赌场的常客。 格林明白我们的来意，也希望我们尽早离开此地，所以就告诉阿拉德我们是来玩两把大的娱乐下，期望能让他引荐我们进入地下二层。阿拉德同意了。 卡尔回来抱怨说什么军事要塞没进去过，偏偏这个地方要这么麻烦。 人类远比机械兵复杂，习惯就好。 "},{"title":"2011年11月14日","url":"/blog/2011/11/15/2011%25e5%25b9%25b411%25e6%259c%258814%25e6%2597%25a5/","date":"2011-11-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月14日 计划有变，在卡尔死磨软泡之下，格林同意了让我们使用SLP弹。 上午十点左右进去，用了10分钟寒暄，终于进入了BOSS的办公室，是个四十多岁的前GOE教官，名字很长一串，简称李。SLP弹效果发作后，在他背后找到了保险柜，法国库宝，比较麻烦的锁。卡尔随身带的Locker解这个的话速度有些慢，没办法，先花5分钟把桌上的笔记本密码解开，然后做个并行。终于在20分钟后解开了保险柜密码，取出那些人要的东西，撤了。 下午六点和格林我们三人去当地一个中餐店里叙旧。格林现在有点忏悔的意思，和孙生很像。 夜里十一点左右收到那群小猫的邮件，明天在阿尔盖达交货，坐标39.536881，2.859192。 "},{"title":"2011年11月15日","url":"/blog/2011/11/16/2011%25e5%25b9%25b411%25e6%259c%258815%25e6%2597%25a5/","date":"2011-11-16 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月15日 莉莉平安，货也交给他们了。 好吧，接下来，呵呵，追踪货物，卡尔要为莉莉出这口气。 总之，今晚先回去，我也叫她回来了。 "},{"title":"2011年11月16日","url":"/blog/2011/11/17/2011%25e5%25b9%25b411%25e6%259c%258816%25e6%2597%25a5/","date":"2011-11-17 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月16日 种族，地域，有时会让我们思考人与人的差距。 上次西敏寺事件后，将军一直很重视防御，身边警卫加强不少。 货物跟踪显示在巴黎市郊一家汽修厂停留超过两小时，很可能这就是它的最终目的地了。 她说，总觉得米勒博士和绑架莉莉的人有关系。女人的感觉，很可靠吧。 "},{"title":"2011年11月17日","url":"/blog/2011/11/18/2011%25e5%25b9%25b411%25e6%259c%258817%25e6%2597%25a5/","date":"2011-11-18 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月17日 休息下。 下午去Wild老板那买了几盒Cairo烟丝，他又另外送我他自己磨的咖啡，回来搭配起来品品，确实很好。 上次改装的充能枪缓冲器坏了，准确点是芯片许可证过期了，呵呵，当初懒了点没破解，得，又得在地下室过夜了。 "},{"title":"2011年11月19日","url":"/blog/2011/11/19/2011%25e5%25b9%25b411%25e6%259c%258819%25e6%2597%25a5/","date":"2011-11-19 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月19日 还是这样有感觉啊。 卡尔昨天去了教堂。我是好久没见他去过了，上次去的时候是一起退伍后。 卡尔告诉我，虽然莉莉现在好好的，可是他觉得对不起莉莉，从认识她到现在，从来没有发生过这样的事。 于是，今早和卡尔一块指定了作战计划。目标现在还在巴黎。 "},{"title":"名人烟斗：性格与风骨的延伸(后附《斗友话丝》)","url":"/blog/2011/11/20/%25e5%2590%258d%25e4%25ba%25ba%25e7%2583%259f%25e6%2596%2597%25ef%25bc%259a%25e6%2580%25a7%25e6%25a0%25bc%25e4%25b8%258e%25e9%25a3%258e%25e9%25aa%25a8%25e7%259a%2584%25e5%25bb%25b6%25e4%25bc%25b8/","date":"2011-11-20 00:00:00 +0800","categories":["博文收集"],"body":"名人烟斗：性格与风骨的延伸     烟斗是英国探险家沃尔特·佩利爵士（Walter Paley）根据印第安人的启示制成的，以后便成为英国绅士的象征而流行。就连中国清朝的中堂大人李鸿章在出访英国的时候，也曾把玩享用过当时时髦的烟斗。烟斗几乎成为男性的“专利”，反映了其主流乃是男性化的、很少脂粉气的高雅制品。                                            名人性格特质的反映 世界上爱好烟斗的男人，大都是一些严肃的、深沉的、高度理性的男人，丘吉尔（Winston Churchill）在他的《二战回忆录》里写道：就在这个值得纪念的时刻，我手里握着一只结实的石楠根烟斗，斯大林那一排浓重胡须下面叼着一只巨大的枣木烟斗，罗斯福抽的是“骆驼”牌香烟，但是他把他的烟卷装在一支长长的烟嘴里。 萨特在他的著作《存在与虚无》里，把烟斗视为一个哲学例证，他认为香烟是“虚无”的象征，是抽象的、没有固有特性的、容易消失的物体；而烟斗则是“存在”的象征。 爱因斯坦工作时，喜欢把烟丝装满几只烟斗，放成一排，随时取用。他说：“抽烟斗能使判断力更加正确(somewhat calm and objective)。” 林语堂是极富情感的人，他曾说：“口含烟斗者是最合我意的人，这种人都较为和蔼，较为坦白，又大都善于谈天。我总觉得我和这般人必能彼此结交相亲”。 之所以选择烟斗，是收藏者性格特质的潜意识反映：内敛，镇定；自信，自省；谦逊，低调；聪慧，懂得享受和珍惜人生。他们注定是少数的一群，也是特别的一群： 里根、斯大林、麦克阿瑟、巴顿、牛顿、马克吐温…… 直式弯式各不同 烟斗的构造其实很简单，就是将一块木头挖空，形成装填烟丝的斗钵，再加上一个吸烟的烟嘴就行了。 但是，要选择一把漂亮的烟斗就复杂多了，既要考虑其实用价值，也要注意外观造型。首先，观察烟斗的整体外形。烟斗造型的不同，在很大程度上决定了一只烟斗的美感；同时，与吸烟质量也有一定的联系。 斗型最基本的分类，是直式（Straight）和弯式（Bent）。 从力学的角度看，叼烟斗的动作本身就是一组杠杆：直式烟斗叼起来，自然会比弯式要费力一点；但弯式的更容易积聚唾液及烟草燃烧产生的水汽，清洁也不及直式方便；弯式的斗钵更接近脸面，因而燃烧时更容易被烟熏着。 从心理的角度看，直式烟斗会使主人显得比较直率、外向及开朗，弯式则比较儒雅、成熟、世故。 接着，检视斗钵，看整个圆周各处的厚度是否相等，钵底的烟管开口是否对正。斗壁如果厚薄不一，则很容易在几次使用后烧穿，又可能因为受热不均而开裂，而且厚的斗壁不易烧穿，抽烟时也不会烫手。 斗钵有大有小，有圆柱型的，苹果型的，还有自由式的。斗钵壁也有厚有薄，有表面是光亮的（光斗），有用吹沙的办法打掉表面较软的部分而形成麻面的（毛斗）。光亮的斗钵看起来漂亮，但是喜欢毛斗的人则认为麻面有利于散热而且握在手里不易滑脱。 还要看钵底的气口，应该从斗钵的最底处开出，这样有助于烟草的完全燃烧。 最后，检视烟嘴。烟嘴有两种材质：黑色的硫化硬胶和透明的合成树脂。硫化硬胶可以造得轻薄些，且有少许弹性，但是容易咬烂，还会随时间推移而氧化变色。合成树脂口感会硬些，但不易咬坏，也不易氧化。不过，如果遇到心仪的斗型和款式，就赶紧买下！ 烟斗分手工制造及机器制造两种。经工匠精心设计并雕琢而成、充满人性化和个性化的手制烟斗，价格固然比机器大量制产的要高得多。不过它们的使用效果却相差无几，机制烟斗的性价比会较高。 虽然存在这些原则，但选择斗型最基本的出发点，还是“个人喜好”。 250年的石楠木根 把烟斗当作一件艺术品，实在是不为过的。看看对制作烟斗的材料要求有多苛刻吧，做烟斗的材质，要符合诸多条件：质地要坚韧、轻盈、耐裂；干燥、能抗高热、遇火不燃；点燃之后，绝无异味；长期抚摸之后，纹理清晰，光泽耀眼。 据说，1700-1850年间，欧洲不少木匠及烟斗匠，不断地对29种木料的硬度（Hardness）；切裁（Turning）、雕凿（Carving）及磨光（Polishing）的便利性；吸烟质量（Smoking Ablity）；外形（Appearance）以及手感（Tactility）进行测试，希望可以找寻找出合适的造烟斗材料。 经过多年摸索，石楠木（Briar）成为使用最广泛、也被认为是最合适制作烟斗的材料，几乎变成烟斗的代名词，事实上欧洲就有不少人干脆用Briar表示Pipe（烟斗）。至于其他材料如海泡石（Magnesiu）、玉米芯（Corn Cob）、陶土（Clay）制成的烟斗，现在由于并非广泛流行，本身也不具备石楠根的优良特性，这里就略过不谈。 石楠是一种低矮的灌木，主要见于地中海地区海拔500-1,000米的山坡及岩壁上，生长极其缓慢。石楠根的木纹十分奇特，对毛坯不同方向的切割，会产生不同的纹理，出现向上一组组条纹的称之为“火焰纹”，出现大小不同圈圈圆点点的称之为“雀眼纹”。石楠根的年代越久，木纹越漂亮，质地越细腻，令人回味无穷，使之具有很高的欣赏价值，是其它材料无法比拟的。 除了具有坚固耐用、木质细密、保温隔热性能特别好等优点外，最可贵的，是石楠木具有无数个肉眼看不见的“孔”，有助于散失烟草燃烧时的水汽和热量，同时也决定了其质轻的特性。石楠木表层会烧焦、碳化，但本身却极难燃着。另外，这种木质对烟草的风味，只产生十分轻微的影响。 一块真正可以用来制作烟斗的石楠木，通常取自于树龄约250年的成熟石楠木根，取其深埋于地下，位于根、茎间的根瘤部分。 由于生长土壤非常贫瘠的缘故，一个5到10磅重的根瘤，要30年或更长的时间才能长成。这样的根瘤，大概可以做半打烟斗。更大的根瘤，自然就更有价值，但低于这个大小标准的，就几乎不值得挖取了。 根瘤有缺陷，不管大小都被列为次等。如果有多处缺陷，并且需以填料补全者归为三等。完全没有缺陷的石楠根瘤才算是首选，像烟斗名牌Dunhill保证只用首选，每只烟斗要比别的品牌贵100-200美元。1,000个树瘤中能称得上首选的，只有2-3个。 在少数首选石楠木根瘤中，再去选出可以切出瘤心的，为数更少。这种被称之为Double Extra Quality的瘤心叫Plateau。通常只刻粗坯，等买家亲自鉴定后，再手工制作。 上上之选为死根（Dead Root）。百年石楠自然死亡，留下的根瘤在地底自然的干燥，这种根瘤是稀世珍宝，Dunhill 把它称之为DR级，只有天价才能购得。 “副牌”与“贴牌” 很多顶级厂牌，偶尔会出产一些只有细微瑕疵而无损其吸烟质量的烟斗——“副牌”（Seconds）。这些烟斗通常会烙上特别的品牌，以大大低于“正牌”的价格出售。“正牌”在视觉上的确几近完美无暇，但收藏者往往要付出高昂的价格。不过相对其完美性，及收藏、升值潜力，代价再高，也是值得的。 除了“副牌”之外，由于市场推广等理由，一些烟斗以某烟草商或烟草店的牌号命名，实际由顶级烟斗匠代为设计或（及）制造，标价远远低于本家的品牌，但质量却很不错，或许可以称之为“贴牌”烟斗。如英国著名的烟草店James Barber推出的Barber Bs Line，据说是Les Wood（Ferndown）替他们生产的。这从其外形上也可以得到印证，最大的差别，恐怕只缺了Ferndown著名的银饰。 在某种程度上说，用烟斗不但是一种生活方式，也是一种感悟人生的过程。一个男人只有修炼到一定的人生境界，才可能把握好手中的那支烟斗。 下载： 斗友话丝 "},{"title":"2011年11年20日","url":"/blog/2011/11/20/2011%25e5%25b9%25b411%25e5%25b9%25b420%25e6%2597%25a5/","date":"2011-11-20 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11年20日 这个季节有点干燥，但是看不出法国人的浮躁，一脸悠然。 我在巴黎不认识什么人，让卡尔从Red Street买了M9和弹药，我另外要了一把Tac-50。 下午在维修厂附近转了下，没什么人流，周围有几栋已停工的楼房，呵呵，就是喜欢这样的。 这群小猫咪，等着吧。 "},{"title":"2011年11月21日","url":"/blog/2011/11/21/2011%25e5%25b9%25b411%25e6%259c%258821%25e6%2597%25a5/","date":"2011-11-21 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月21日 直接用短波可能会被窃听，改用迷你无线节点转接。 上午卡尔装作送外卖的进去了，回来说有一处，一辆废弃的车的门把手上有比较新的痕迹，估计密室什么的就在里面了。 我在维修厂南方一公里的废楼里架好狙点，正好可以通过厂子大门和窗户观察到里面大半的区域。 话说这个郊区Luca酒店服务不错，虽然周围环境不怎么好，但是房间里摆放的各种书籍帮旅客度过这自私的时间。 "},{"title":"2011年11月23日","url":"/blog/2011/11/23/2011%25e5%25b9%25b411%25e6%259c%258823%25e6%2597%25a5/","date":"2011-11-23 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月23日 好吧，我喜欢这份喧嚣后的寂静。 那个所谓的博士果然在厂子里，卡尔现在在审问他。其他的飞猫成员已经被处理了，只留了个会说话喘气的。 刚刚翻了下他们的日志，上面记录了这几个月来他们的活体实验结果： 代号：LE-1 年龄：28岁 源种族：非洲南方土著 职业：地方军队军人 结果：失败 注射时间：2011年07月03日 14点22分 注释：注射后3分钟心率加快，20分钟全身出现过敏症状，30分钟后出现癫痫症状，35分钟后心跳停止，观察1小时后脑死亡。 代号：LE-2 年龄：19岁 源种族：俄罗斯北方某族 职业：篮球运动员 注射时间：2011年7月8日 7点30分 结果：观察中，准备第二阶段实验。 注释：注射后身体未出现任何症状，心率正常，实验体异常安静，活动正常。 。。。。。。 好多，好多，29个活体，23死亡，现在有6个在观察中，其中一个已经被转移，记录被划去，只剩下代号LE-23。 博士，对不起了，你们先对我们有兴趣的。 "},{"title":"2011年11月24日","url":"/blog/2011/11/24/2011%25e5%25b9%25b411%25e6%259c%258824%25e6%2597%25a5/","date":"2011-11-24 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月24日 不留后患，但考虑到博士是公众人物，放过了。 LE-23脑中植入了检测芯片，与飞猫雇佣军的卫星通讯，按照博士说的方法我们能够进入卫星的操作系统，并用博士的密匙访问芯片。 现在博士能联系到的飞猫已经全死了，他准备去伦敦养老，也挺可怜。 她发邮件说她一个人有点不习惯了，希望我赶快回去。 我和卡尔打算回去再处理LE-23，好吧，回家。 "},{"title":"2011年11月26日","url":"/blog/2011/11/26/2011%25e5%25b9%25b411%25e6%259c%258826%25e6%2597%25a5/","date":"2011-11-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月26日 慵懒的季节，还有偶尔的暖阳可以享受。 忽然觉得，和她在这里活的无拘无束，我无他求了。 "},{"title":"2011年11月27日","url":"/blog/2011/11/28/2011%25e5%25b9%25b411%25e6%259c%258827%25e6%2597%25a5/","date":"2011-11-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月27日 沉默的士兵，冲破了，冲破了，腐朽的枷锁 巴西舞娘晃动，诱人，宛如盘中一颗红樱 古藤甲下遮盖着诅咒的文字，凶神恶煞般 今天访问飞猫卫星，看了下LE-23的身体数据，都挺正常，不过反应速度数据有点高了。顺便翻了下卫星上其他的数据，干脆都拷下来了，这就是飞猫的整部历史。 "},{"title":"2011年11月28日","url":"/blog/2011/11/28/2011%25e5%25b9%25b411%25e6%259c%258828%25e6%2597%25a5/","date":"2011-11-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月28日 早些时候抽的调味，退伍后搬到这个地方去Wild店里跟老板混熟了自己也喜欢上原味的了。 呵呵，现在还记得，我和她刚认识的时候，虽然都已是沧桑世故之人，可是我就喜欢她在我旁边时她那种难以察觉的羞涩。 手头还有一些事纠结着，虽然很有意思，可是我有时又觉得厌倦了，想跟她一块儿去阿拉斯加常住。 明天和她来个无目的的旅行吧。 "},{"title":"2011年11月29日","url":"/blog/2011/11/29/2011%25e5%25b9%25b411%25e6%259c%258829%25e6%2597%25a5/","date":"2011-11-29 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年11月29日 女权主义复活。 "},{"title":"2011年12月1日","url":"/blog/2011/12/01/2011%25e5%25b9%25b412%25e6%259c%25881%25e6%2597%25a5/","date":"2011-12-01 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月1日 只是享受这份静谧。 和她。 "},{"title":"2011年12月3日","url":"/blog/2011/12/03/2011%25e5%25b9%25b412%25e6%259c%25883%25e6%2597%25a5/","date":"2011-12-03 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月3日 我想，新时代应该应该开始了。 趁她出去消费的时候我匆匆从酒店服务员那打听到最近的酒吧，我有时候需要一个人安静，这样才能继续思考。 昏暗的光线，照亮角落的世界，那有一个瘸腿的士兵在呻吟。他倚在墙上，回忆侵袭着身体的每条神经，颤抖着。寒风，偶尔会吹进来，他立起衣领，拉低帽沿，眯起眼睛，然后就会感受到些许温馨。 停止这些胡言乱语吧。 否则我会迷失，再也找不到出口，麻木不仁。 ok，回去，睡觉。 "},{"title":"2011年12月5日","url":"/blog/2011/12/05/2011%25e5%25b9%25b412%25e6%259c%25885%25e6%2597%25a5/","date":"2011-12-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月5日 到家了。 晚上我们去了卡尔家，大厨莉莉做了几道泰国菜，嗯，有点不适应。 卡尔这几天一直在观察LE-23的数据，觉得事情在往我们都不想的方向发展。 昨天认识了一个来自中欧某地下教会的人，他告诉我他通过一个朋友介绍，希望我能帮他做个战斗机器人，价格好说。我在怀疑那个朋友是谁的时候，他说是将军。 刚给将军秘书通信，她说将军最近在西班牙有行动，表面上目的是支持当地军方展开打击黑势力活动，其实是要搜索一个叫做西斯·贝尔的人。任务日志中只是简单说了下西斯是个恐怖份子，具体事件之类的没有介绍。 嗯，让卡尔帮我把手，这几天把战斗机器人做出来，正好也让他摆脱下焦虑。 "},{"title":"2011年12月6日","url":"/blog/2011/12/06/2011%25e5%25b9%25b412%25e6%259c%25886%25e6%2597%25a5/","date":"2011-12-06 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月6日 This is a world we created. This is a world we destroyed. We are surrounded by greedy souls. We are looking for ourselves. Someone  who wants to be someone, is observing.     "},{"title":"2011年12月7日","url":"/blog/2011/12/07/2011%25e5%25b9%25b412%25e6%259c%25887%25e6%2597%25a5/","date":"2011-12-07 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月7日 话说一转眼快圣诞了。 她说她圣诞给我一个大大的惊喜，好吧，我很期待。 我记得去年这个时候我在尼泊尔和卡尔寻找遗迹碎片，也是在那，他认识了莉莉。今天卡尔和我说他们也想搬去阿拉斯加，欢迎。 时间过的真快，战斗机器人预计在12号完成一阶段设计。 屋后的它们，好一阵子没见了。 "},{"title":"2011年12月8日","url":"/blog/2011/12/08/2011%25e5%25b9%25b412%25e6%259c%25888%25e6%2597%25a5/","date":"2011-12-08 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月8日 人生就是某个恶魔或者天使的代理人从一堆堆碎片里给你选几个你想要或者不想要的生活，然后他们站在旁边对你指指点点，知道你完全适应这些碎片为止。 假如你想从新开始，也就是选择一个新的代理人，那么他们就会生气，气急败坏的结果就是你或者你周围的人遭殃，尽管别人的代理人脾气很好； 假如你表现不好，就是你老半天也适应不了这种生活，代理人就会放弃你，他们操纵你的思想，让你产生轻生的想法，然后进入低谷，如果最后你过了这个槛，那么会有一个新的代理人来代替原来的，如果你没有过，那么，对不起了； 假如你的代理人和别人的代理人有身体或者心理的接触，那么你和那个人也会有相应的反应，比如伤害，比如爱情； 或许你猜到了，每一个婴儿和每一个亡者都有代理人，假如逝者被世界遗弃，那么他的代理人就去代理新的生命，不管你同意与否，你我的代理人以前不一定代理过谁，又或者他在同时代理谁和谁； 某天，你晕倒在路上，你的代理人会点支烟，然后坐下来，看着你倒在那。有些代理人看见你和你的代理人关系如此，便会怜悯你，然后和上帝交流希望把你交给他管理，如果上帝不同意，那就没办法，等着你的代理人把烟抽完，如果同意了，两个代理人便会有交涉，然后你和另外个代理人的人便有交涉，然后，可能会有缘分随机出现； 胡言乱语。 "},{"title":"2011年12月9日","url":"/blog/2011/12/09/2011%25e5%25b9%25b412%25e6%259c%25889%25e6%2597%25a5/","date":"2011-12-09 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月9日 从泰国定的那批芯片和硬盘还没到，机器人会有所延迟了。 我联系了现在在泰国的克劳德，他说最近有一些人以政府名义高价购买大批LARM芯片和WET硬盘存货，我的定的那批他已经托人留下来了，明早发货。 呵呵，估计又有什么事了吧。 "},{"title":"2011年12月11日","url":"/blog/2011/12/12/%25e5%2595%258a/","date":"2011-12-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月11日 她今天早上去了早市。话说这个小镇我觉得比较有意思的就是还有早市的存在，尽管光顾的人越来越少。她说她回来的路上看见了达蒙，和三个人在一辆奔驰LK上。 达蒙，全名是肯特 达蒙退伍前我和他有过一面之缘，在一次追捕行动中他负责在目的地接应我。后来我得知他是前飞猫头的一个左右手，在野后被将军聘请。 卡尔说昨天晚上收到货后就开始组装调试，现在已经差不多了，只差武器系统调试了，明早去后山试下。还有教会那人已经取得联系，安排明晚在市中码头交易。 "},{"title":"2011年12月12日","url":"/blog/2011/12/12/2011%25e5%25b9%25b412%25e6%259c%258812%25e6%2597%25a5/","date":"2011-12-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月12日 这该是怎么了呢。。 我需要串联起来。。 "},{"title":"2011年12月13日","url":"/blog/2011/12/13/2011%25e5%25b9%25b412%25e6%259c%258813%25e6%2597%25a5/","date":"2011-12-13 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月13日 有时候，在一个地方呆久了，便会麻木，身体如此，心亦然。 今天和Wild老板聊了些关于价值的问题，他说他10年前来到这里，那时候还没多少人，随着开荒者增多，他逐渐认识了很多新朋友，包括现在的妻子。他说，不管到哪里，他心里头总觉得安稳，然后才有存在感，进而是对于家人朋友的价值，最后落实到自我体现。 说这些的时候，我心里感觉有些矛盾。骨子里，我感觉自己是个旅人，或者是浪人。但是我不求动荡，也不喜安稳，想在两者中间寻找一个切实的平衡点。 而立之年已过，心里虽颇平静，但偶有暗流涌现，波澜不惊，为喜好奔走。 生当如此吧。 "},{"title":"2011年12月14日","url":"/blog/2011/12/14/2011%25e5%25b9%25b412%25e6%259c%258814%25e6%2597%25a5/","date":"2011-12-14 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月14日 肯特·达蒙，这个人，直觉告诉我背后有故事。 卡尔说LE-23的数据已经收集并做好分析了，可以采取Sigma战术制服他。 暂且将达蒙放下，明天启程去马德里，已经和赛罗菲斯取得联系，到时他会提供帮助。 "},{"title":"2011年12月15日","url":"/blog/2011/12/15/2011%25e5%25b9%25b412%25e6%259c%258815%25e6%2597%25a5/","date":"2011-12-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月15日 马德里的空气似乎不是那么清新。 在塞罗菲斯家赶上了晚饭，饭后的甜点很是喜欢。这次来给他带了礼物，在ebay上从一个英国佬那淘的玉质老斗，成色很不错，而且还散发着一股V草的幽香。 晚饭后萨罗菲斯带我们去了他的储藏室，开了一瓶82，抚摸着曾经最爱的左轮Giant Python，唉，怀念那时候。 萨罗菲斯退伍妻子两年前已经去了，5岁的儿子Peter在寄宿学校，所以平常也就他一个人在房子里。今天可能会睡很晚，尽管很累，但是我希望尽早解决这乱麻。 "},{"title":"你想要的","url":"/blog/2011/12/17/%25e4%25bd%25a0%25e6%2583%25b3%25e8%25a6%2581%25e7%259a%2584/","date":"2011-12-17 00:00:00 +0800","categories":["生活杂记"],"body":"不管你在哪，我都会给这条青石板铺成的小路在我记忆里腾出点空间，只有你我记得的约定   阳光从指隙间流过，洒在地上，给小绿芽来个spa 墙头上那只白猫眯着眼睛，小灰雀没看见它，在它身后蹦跶 藤椅上坐着的你，暖暖的，懒懒的，你想要的情景   然后呢，我在这画里添点什么，你觉得还缺什么呢？ 你继续蒙娜丽莎样的微笑，这让我很是纠结，那我就随你意吧   军营里的杰克吹着他的萨克斯，入伍前，他在“落日”乐队 沙漠的风，吹开碎石上的散沙，露出纪念你的碑石，乐声到了这儿 保罗坐在卡车旁，擦地铮亮的M16A靠在左肩上，一张有点褶皱的相片拿在左手上 保罗说”jack,another song,please” 杰克没搭理他，继续吹奏他最喜欢的布列瑟农 保罗说”ok,I’m approching you,my love”，声音低地只有枪和照片能听见 沙漠里的落日总是很好看，不是么   原谅我扯远了，但是没关系的事物我不扯，应该是这种感觉的。   嗯，我还有话要说 你不喜欢那种比较令人纠结的事物，所以，我把后院的爬山虎都给拔了，然后种上点榕树，你应该会喜欢它开的花的 在树下面围上厚布，为什么，那只懒猫喜欢 秋天的夜里，院里偶尔会有难得的静谧，你偶尔会在这时候想起一些人，这些人偶尔也会出现在你眼前   很多的很多，你单纯地期待，嗯，于逆流中静待属于自己的那份美好~ 最灿烂单纯的笑容~   兔斯基说，当信念和希望都消失的时候，还剩下什么？谁知道呢，反正我在纸上。 这跟讨论世界末日时该去哪旅游差不多~ 悲剧英雄似地活着，很累，不如带你去香榭丽舍大街买张凯旋门的邮票，然后乘船去科西嘉岛跟拿破仑合个影 撑开伞 雨滴划过 惆怅捻碎冬梅一朵 陋室昨夜北风割破美人脸 指轻点   "},{"title":"荒芜的心迹","url":"/blog/2011/12/17/%25e8%258d%2592%25e8%258a%259c%25e7%259a%2584%25e5%25bf%2583%25e8%25bf%25b9/","date":"2011-12-17 00:00:00 +0800","categories":["生活杂记"],"body":"黑夜，阴冷，寥星，残破雕像，杂草丛生。 他想了下，该还是不该。 城镇中心教堂的老神父，耐心听着他罗嗦的忏悔，也不是罗嗦，老是重复那几句话而已。他终究说出了。 四年前，他还很年轻，敢独自越过沙漠，漂过大洋。对他来说，是享受，一个人冷静思考的美好时光。 有一天，他遇见了一个自称亚当的青年，亚当告诉他说他在寻找一个叫夏娃的少女，如果你见着了她，请一定回来告诉我。可他怎么知道他什么样呢？亚当说，那是个你见了都会心动的真正的女人。他觉得有点可笑，便玩笑似的答应了。 过了一年，他回来了，碰见了一个女人，他说，你是夏娃么，我对你有点动心。她说是。他问你认识亚当么？不认识，她的回答让他很吃惊。可是他说他拜托每一个路过的旅行者都找你，你怎么可能不认识呢？夏娃笑了，的确，很迷人。她对他挥挥手，便走开了。他没有追上去，呆在原地，思考着。 不知不觉的三年过去了，他有一天忽然觉得累了，便在这个城镇住了下来，每周都来做礼拜。上个月他收到亚当的来信，信中说谢谢你，我找到她了。他更是诧异了，心中还稍微有些不安。于是便来对神父忏悔。 神父抚摸着他的头，孩子，这些都是上帝的旨意，你多虑了。 他安静了。离开。 第二天，背上行囊，继续旅行。 他又看见沿途，黑夜，阴冷，寥星，残破雕像，杂草丛生。 "},{"title":"2011年12月17日","url":"/blog/2011/12/17/2011%25e5%25b9%25b412%25e6%259c%258817%25e6%2597%25a5/","date":"2011-12-17 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月17日 只是踩点和记录。 反正没什么事儿，去了一个远离市中心的小教堂，准确的说是一个寺庙，里面的只有一个留着金色长发的老外。他说他是个monk，我淡淡的笑，然后我便在附近闲逛。 安静，闲逸，惊喜～嗯，在草丛中发现了一面已经皲裂的石碑，上面字虽小但是很公正，有点蝇头小楷的意思。 宅门斑驳不禁西风 老井草木唯饷细雨 昔日旧人 散落一地浮华 再见恨晚 尽互喧 尽相谈 晨曦袅袅青烟 。。。 补不上了，先回去吧，休息，休息。 "},{"title":"if christmas never came","url":"/blog/2011/12/17/if-christmas-never-came/","date":"2011-12-17 00:00:00 +0800","categories":["生活杂记"],"body":"喜欢雪飘落在石碑旁的枯蔷薇上­ 不要季节的轮回­ 如果圣诞不再来­ 教堂钟声只有回荡­ 如果圣诞不再来­ 情人们就不会说再见­ 如果圣诞不再来­ 就不会需要再去忘记谁­ 没有沉寂的夜­ 也没有举着蜡烛的天使­ 商店挂满糖果的小松想起了去年孩子们的笑魇­ 渐行渐远的思念，正好是十二点的愿望­ 走进人群吧，去找寻造物者赐予的礼物­ 如果化成河流经过你屋旁­ 也是作为纯洁灵魂最后的坚守­ 冰冻的河水不敢映射你点燃的篝火­ 一眼转瞬不过十年­ 记不得­ 温馨的只是灯光­ 没有奢求­ 你日记里关于他的一切­ 我画不出的眼睛­ 就是画不出了。。­ 海盗们喜欢朗姆­ 八音盒轻轻拂过­ 海风，潮水，月光­ 兔子说提拉米苏­ 我说我不饿­ 帆或许会扬起­ 放浪的罪人经不起流年的黯然­ "},{"title":"Solace","url":"/blog/2011/12/17/solace/","date":"2011-12-17 00:00:00 +0800","categories":["博文收集"],"body":"Travelers, it is late. Life’s sun is going to set. During these brief days that you have strength,be quick and spare no efforts of your wings.   Denial Feeling lonely and ignoble indicates that you haven’t been patient. Friendship and loyalty have patience as the strength of their connection.   Anger The undisciplined person doesn’t wrong himself alone… but sets fire to the whole world. With will, fire becomes sweet water.   Bargaining Be observant if thou wouldst have a pure heart, for something is born to thee in consequence of every action.   Depression Dear soul, if you were not friends with the vast nothing inside, why would you always be casting your net into it, and waiting so patiently? You were born with wings.Why prefer to crawl through life?   Acceptance Only from the heart can you touch the sky. Let the beauty of what you love be what you do.   This is love: to fly toward a secret sky, to cause a hundred veils to fall each moment. First to let go of life, to take a step without feet. "},{"title":"2011年12月18日","url":"/blog/2011/12/18/2011%25e5%25b9%25b412%25e6%259c%258818%25e6%2597%25a5/","date":"2011-12-18 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月18日 在普拉多博物馆对面租了一间房，透过中间的树林正好看见LE-23的巡逻车。 上次过后他就在这个区当警察，不知道谁给安排的。他似乎也喜欢这份工作，基本每天都把警车停在门口，进博物馆一带就是一天，而这一带的治安是整个市区最好的，加上特殊照顾吧，所以没人会阻止他这么做。 卡尔已经跟踪他回家了，带上了监视设备，马上可以上线了。 我让塞罗菲斯给我们联系了收钱办事儿的外科医生，因为我们可能会需要这个LE-23说出该说的。 "},{"title":"舞者","url":"/blog/2011/12/19/%25e8%2588%259e%25e8%2580%2585/","date":"2011-12-19 00:00:00 +0800","categories":["生活杂记"],"body":"长笛，号角 吹散魂魄，天葬者的苍鹰 渐进渐远，拐角处一抹血红 千年香火盛传，最忆无边苦海 老者长诵，鼓声不息 莞尔入幻境，斑斓色彩 霓虹羽衣，铜铃喧嚣 神魔皆静，善莫大焉 "},{"title":"2011年12月20日","url":"/blog/2011/12/20/2011%25e5%25b9%25b412%25e6%259c%258820%25e6%2597%25a5/","date":"2011-12-20 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月20日 LE-23仍在昏迷中，医生手术取出了跟踪器。 预计在凌晨两点清醒，已带到塞罗菲斯提给我们的地下室，并且问题也准备好了。 "},{"title":"2011年12月21日","url":"/blog/2011/12/21/2011%25e5%25b9%25b412%25e6%259c%258821%25e6%2597%25a5/","date":"2011-12-21 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月21日 醒了。 他说他曾经是个德国医生，原名已忘记，只记得现在叫做麦克·唐。飞猫猖獗之时，中东地区要求博士制造一个能给其他雇佣军势力压倒性优势的东西，于是一个半月以后他便被安排到中东地区。首先是他带领一个四人小分队抢了穆勒斯家族的一处油田；然后独自一人捣毁了将军在当地的一个据点；多次独自进行暗杀行动；最后他自己比较满意的便是亲自结束了飞猫头目，维特。 他说他与肯特•达蒙有过一次交手，他来马德里也是被达蒙安排。当年也便是达蒙让他背叛了飞猫。 游荡的灵魂啊。 卡尔与将军秘书通信，秘书说将军已经来到马德里，将在总统府呆上两天，达蒙在他身边。 或许预感是错的，我总不希望有背叛发生。 "},{"title":"2011年12月23日","url":"/blog/2011/12/23/2011%25e5%25b9%25b412%25e6%259c%258823%25e6%2597%25a5/","date":"2011-12-23 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月23日 昨天把麦克放了，因为达蒙已经开始通知警局搜索了。 今天早上有人敲门，说是紧急疏散。我们跟随队伍走了大约一公里后便掉头回来了。途中得知是月光广场出现强辐射源，政府已派专家组过去，并开始疏散群众。 我知道，这是达蒙想要的东西。 麦克刚才和我们联系，他敷衍达蒙说去了一个朋友家，不必大惊小怪，达蒙相信了。 现在跟卡尔还有塞罗菲斯在广场旁一座空房子里，广场中全是警察，麦克应该也在其中。 今晚会有一出好戏看了。 "},{"title":"2011年12月26日","url":"/blog/2011/12/26/2011%25e5%25b9%25b412%25e6%259c%258826%25e6%2597%25a5/","date":"2011-12-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月26日 呵呵，整个事件就是一出闹剧，因为背叛。 将军来西班牙的目的就是要带走这里的遗迹碎片，如他愿，现在已经带回本部了。 达蒙被麦克亲手解决，现在作为隶属于将军的一支特种部队的教练，也回到本部了。 那个博士的实验很成功，因为麦克的身体，真的能像金刚狼一样自动修复。 将军说要送我一片遗迹碎片，被我婉拒了，我不需要这种害人不利己的东西。 今晚月光很好，现在和她在后山露营，我怀念的旧时光。 "},{"title":"2011年12月28日","url":"/blog/2011/12/29/2011%25e5%25b9%25b412%25e6%259c%258828%25e6%2597%25a5/","date":"2011-12-29 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月28日 和她一块儿购置了家具，她亲自设计了三层楼的每一个房间，格调都是我们喜欢的，简约而精致。 我在周围安装了监控防盗设备，地下室作为主控室，同时让卡尔过几天把我原来地下室的东西都找个中间人转运到这儿来。 莉莉给她电话说她和卡尔商量也要搬来阿拉斯加。 好多年了，拥有稳定的朋友一直是我认为莫大的幸福。 "},{"title":"2011年12月29日","url":"/blog/2011/12/29/2011%25e5%25b9%25b412%25e6%259c%258829%25e6%2597%25a5/","date":"2011-12-29 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年12月29日 现在的双子湖依然优美。 记得Snake就是住在这附近吧，或许会在当地的香烟俱乐部碰到他，呵呵。 没办法，老沃森我也托卡尔找个合适的主人了，然后我找到店长让他帮我来款新沃森，他答应一个星期内到。 有些习惯，良久，就跟随一生了。 "},{"title":"2012年1月1日","url":"/blog/2012/01/01/2012%25e5%25b9%25b41%25e6%259c%25881%25e6%2597%25a5/","date":"2012-01-01 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年1月1日 呵气，新一年。 "},{"title":"2012年1月2日","url":"/blog/2012/01/02/2012%25e5%25b9%25b41%25e6%259c%25882%25e6%2597%25a5/","date":"2012-01-02 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年1月2日 好久没这么开心了。 她哭丧着脸说很抱歉圣诞礼物现在才到，然后把从门外把大箱子吃力地拖进来。 她让我猜，我偏是不猜，其实我心里还是想着意外发生的。 我轻轻打开箱子，拨开干燥的草被，又是一个箱子。。喜欢她调皮的笑。 终于在打开的第四个箱子里找到了一只檀木盒，上面刻着我的名字。 给我的惊喜，Derek最中意的其中一款老英式烟斗，朴素主义。 现在我真的想的很多，有些故事需要结局的。 "},{"title":"2012年1月4日","url":"/blog/2012/01/04/2011%25e5%25b9%25b41%25e6%259c%25884%25e6%2597%25a5/","date":"2012-01-04 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年1月4日 卡尔和莉莉昨天来了，很满意我给他们推荐的房子，以后是邻居了。 早上收到原来的货，收拾完后去本地的电子市场买了些芯片，又淘了些二手机械臂，我想再做些东西玩。 还好，一个全新的环境，新的开始吧。 "},{"title":"2012年1月7日","url":"/blog/2012/01/08/819/","date":"2012-01-08 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年1月7日 荒诞的世界里生活着无辜的人，他们日夜劳作，只为满足。 有一天，平衡被打破，他们便惊慌失措。为了保持他们千百年来形成的习惯，他们不得不征服，不得不进步。 政权建立了，贫富分化了，而这些，都只是一个过程，一个进化的过程，不是他们，而是世界在进化。 长久以来，人类意识达到了一个临界点，类似锯齿，每隔几十年便有一次高峰，而这次，是迈向一个新纪元的时刻。 社会最底层的基础不会改变，因为引导意识洪流的仍是脑中的满足。 陪她驱车在未名的野林里晃悠了两天，见识了自然的威力，乱发言。 "},{"title":"新开始","url":"/blog/2012/03/04/%25e6%2596%25b0%25e5%25bc%2580%25e5%25a7%258b/","date":"2012-03-04 00:00:00 +0800","categories":["生活杂记"],"body":"换空间了，域名也用正式的了。 旧文章已导入，并且开始更新。 "},{"title":"2012年3月4日","url":"/blog/2012/03/04/2012%25e5%25b9%25b43%25e6%259c%25884%25e6%2597%25a5/","date":"2012-03-04 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年3月4日 异星战争结束，卡尔和莉莉在地中海一个小岛上旅行。 我这两月来，累。 "},{"title":"三月份","url":"/blog/2012/03/10/%25e4%25b8%2589%25e6%259c%2588%25e4%25bb%25bd/","date":"2012-03-10 00:00:00 +0800","categories":["生活杂记"],"body":"三月份了，还在下雪，继续宅 "},{"title":"2011年3月11日","url":"/blog/2012/03/12/2011%25e5%25b9%25b43%25e6%259c%258811%25e6%2597%25a5/","date":"2012-03-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年3月11日 终于收到她的来信。 信中她说道战舰提前完工，将军希望我能参与。 怎么说呢，我厌倦了，这些。 曾经有段时间，我一直思考本善与本恶的问题，结果就是这得分人。 现在挺好的，没事儿叫上卡尔出去打猎，和当地同样爱好烟斗的人品烟论斗，等等我曾经追求的生活。 我想我是越来越懒了，可是日复一日我便会有新想法，引擎转不停。 "},{"title":"裂痕","url":"/blog/2012/03/14/%25e8%25a3%2582%25e7%2597%2595-2/","date":"2012-03-14 00:00:00 +0800","categories":["生活杂记"],"body":"风雪中掠过一只飞鸟 草原尽头是被大火覆盖的城市 好像还有人站在海边 他们惆怅着，似乎黑夜就要到来 你若能带走她 便将她带去，一个温暖明亮的世界 这世界，已然成寂寞的世界 众人追寻先人脚步，可是也找不到那宝藏 "},{"title":"Yacy","url":"/blog/2012/03/15/yacy-2/","date":"2012-03-15 00:00:00 +0800","categories":["memo"],"body":"寒假前没事儿给翻译成了中文，在1.02中出现。三千多行。。。 http://gitorious.org/yacy "},{"title":"关于纪念日","url":"/blog/2012/03/23/%25e5%2585%25b3%25e4%25ba%258e%25e7%25ba%25aa%25e5%25bf%25b5%25e6%2597%25a5/","date":"2012-03-23 00:00:00 +0800","categories":["生活杂记"],"body":"生日，昨天，想起的加上我也就四个人。 怎么说呢，大家都比较忙吧。 "},{"title":"冷云","url":"/blog/2012/03/26/%25e5%2586%25b7%25e4%25ba%2591-2/","date":"2012-03-26 00:00:00 +0800","categories":["生活杂记"],"body":"优雅地退却这舞台，因为无人理睬 注目礼太多，人潮太拥挤，呼吸已奢侈 一团，一团，一团，冰冻了苦心 装载不起我俩的渡船，说它害怕 忽然那时，不知为何，便成一现昙花 赌一刻，博一时，心乱如麻，因为眼中沙吧 纵然浮夸，当知病态如我   "},{"title":"2012年3月25日","url":"/blog/2012/03/26/2012%25e5%25b9%25b43%25e6%259c%258825%25e6%2597%25a5/","date":"2012-03-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年3月25日 终于落地了。 空间站的值守人员在我回来之前已全部适应糟糕的宇宙空间，希望他们能坚持半年。 她一直在家，做了些新装修，感觉很温暖。 晚上和卡尔找智利人买了武器，在太空战开始之前地面上还有一些事要做。 "},{"title":"2012年3月27日","url":"/blog/2012/03/28/2011%25e5%25b9%25b43%25e6%259c%258827%25e6%2597%25a5/","date":"2012-03-28 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年3月27日 昨天下午四点十分，市中心发生爆炸，警察初步调查说是天然气泄露。 两个月了吧，还有些不习惯这个城市，尽管有了节奏。 卡尔电话来说已经安排完毕，可以按计划进行。 "},{"title":"2012年3月29日","url":"/blog/2012/03/30/2012%25e5%25b9%25b43%25e6%259c%258829%25e6%2597%25a5/","date":"2012-03-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年3月29日 他在死的时候留下了一张地图，卡尔觉得像是目标的家。 今天下午2:30，目标家人尚认为他在出差，所以活动照常进行，妻子去公司上班，儿子在社区操场打篮球。 按照地图，我们在他家中地下室发现了一个暗箱，古老的英格玛加密。地图右下角提示AMANA，我们没有贸然打开。 刚从米奇·德利那买了一个微型反恐机器人，明天再打开箱子看看吧。 "},{"title":"2012年3月30日","url":"/blog/2012/03/30/2012%25e5%25b9%25b43%25e6%259c%258830%25e6%2597%25a5-2/","date":"2012-03-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年3月30日 同样是爸爸妈妈都不在家的时间，我们用机器人打开了箱子。 只是一副相片，右下角日期是1972.3。相片中的两个人穿着白大褂，身后是法西斯旗帜，有一个类似猩猩的动物蹲在他们中间。 如果组织力量还有残留的话，那么将军部队中应该有人知道。 "},{"title":"2012年4月5日","url":"/blog/2012/04/05/2012%25e5%25b9%25b44%25e6%259c%25885%25e6%2597%25a5-2/","date":"2012-04-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月5日 卡尔从黎巴嫩回来了。 在贝鲁特遇到了达蒙，他在附近的小镇上开了个酒馆。 他说他听说过组织，当时在实验室中，醒来后他在一堆仪器中看见了组织的标志，因为很特殊，便有所留意。 我想，这一条条可以串联起来了。 "},{"title":"2012年4月6日","url":"/blog/2012/04/07/2012%25e5%25b9%25b44%25e6%259c%25886%25e6%2597%25a5/","date":"2012-04-07 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月6日 古巴北部地区曾经有支雇佣军，专门吸收二战遗留下来的好战份子。在1953年，首领玛吉纳被美国间谍暗杀，他的跟随者为报复美国在世界各地展开了一系列活动，包括著名的古巴导弹危机，美苏军备竞赛等。 听人说本拉登父亲也曾追随过玛吉纳，难说了。 将军曾担心的组织就是这支世界范围的玛吉纳信徒，也是二战遗留的极端份子。 关于历史，就这些吧。 她在家养了只猫，从当地的老好人梅姑姑那要的，不错哦。 "},{"title":"2012年4月9日","url":"/blog/2012/04/09/2012%25e5%25b9%25b44%25e6%259c%25889%25e6%2597%25a5/","date":"2012-04-09 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月9日 听到大头喇嘛逝世的消息，不得已心伤。 奏响新的乐章 为了他们 不朽的灵魂 在历史中沉积力量 岩浆流经之地 将化为我血脉 黑夜笼罩之地 将化为我眼睛 山石动撼之地 将化为我骨骼 洪流覆盖之地 将化为我肌肤 借苍茫命运之轮 重铸理想之乡 沙卷海啸之洲 终归平静 蛇毒蛟猛之泽 终有人烟 星夜之花 不经流年 安魂之曲 绕梁坊间 一线 一天 一人 已然一世 "},{"title":"最近","url":"/blog/2012/04/11/%25e6%259c%2580%25e8%25bf%2591/","date":"2012-04-11 00:00:00 +0800","categories":["生活杂记"],"body":"最近在写毕业论文，快结束了 闲时间很多，可以dota，可以翻相册。。 有些，难以忘却，甚至怀念，直至想念 不知道最近怎么样，所以便不再去想 搜索痕迹，有过去的味道 可是，时间总是向前的 那么，就那么滴吧 "},{"title":"2012年4月12日","url":"/blog/2012/04/12/2012%25e5%25b9%25b44%25e6%259c%258812%25e6%2597%25a5/","date":"2012-04-12 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月12日 今天的哈尔滨下雪了。 秘书邮件说作战日志中曾提到在防洪纪念塔下有遗迹碎片的信号出现，由于当时紧张的外交局势，将军没能够获得碎片。 现在我们住在中央大街的一个酒店里，从窗户正好能看到纪念塔。 卡尔刚刚联系了一个能搞到武器的家伙，明天中午交易。 "},{"title":"2012年4月14日","url":"/blog/2012/04/14/2012%25e5%25b9%25b44%25e6%259c%258814%25e6%2597%25a5/","date":"2012-04-14 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月14日 事情变得有些棘手了。 昨天在公园内交易的时候，我们被两个俄罗斯人盯上，看步态和手势应该是阿尔法小组的人。 卡尔在今早在江边选好了施工点，最快估计需要两天才能完工。 至于那两个俄罗斯人，交给将军去办吧。 "},{"title":"2012年4月15日","url":"/blog/2012/04/15/2012%25e5%25b9%25b44%25e6%259c%258815%25e6%2597%25a5/","date":"2012-04-15 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月15日 施工第一天结束，同时没发现可疑人员。 刚刚收到秘书邮件，说俄罗斯方面已经解决，可以放心继续。 "},{"title":"Unité","url":"/blog/2012/04/15/unite/","date":"2012-04-15 00:00:00 +0800","categories":["博文收集"],"body":"Unité Victor Hugo Par-dessus l’horizon aux collines brunies, Le soleil, cette fleur des splendeurs infinies, Se penchait sur la terre à l’heure du couchant ; Une humble marguerite, éclose au bord d’un champ, Sur un mur gris, croulant parmi l’avoine folle, Blanche épanouissait sa candide auréole ; Et la petite fleur, par-dessus le vieux mur, Regardait fixement, dans l’éternel azur, Le grand astre épanchant sa lumière immortelle. «Et, moi, j’ai des rayons aussi !» lui disait-elle. 小花 地平线衬着褐色的山岗， 太阳如一朵永不凋谢的红花， 在傍晚的低空里徜徉； 田野边上，一朵不起眼的雏菊， 爬上了灰色的墙， 却被四周的野麦压弯， 可它终是开了， 纯白的花晕，一样的怒放。 可爱的小花，站在古墙上面， 目不转睛的看着天空中， 这伟大的星球发出不朽的光， 并对它说，“我，我也能吐露芬芳！ ” "},{"title":"2012年4月17日","url":"/blog/2012/04/18/2012%25e5%25b9%25b44%25e6%259c%258817%25e6%2597%25a5/","date":"2012-04-18 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月17日 已找到碎片，12能级，算是比较高的了，竟然在这个地方藏了那么久。 现在已到达福州，把碎片交给了二队队长皮特森。还有，他告诉我他品尝了所有沙县小吃后，总算相中位于郊区一家。那么多年，好吃的习惯没变啊。   "},{"title":"2012年4月19日","url":"/blog/2012/04/19/2012%25e5%25b9%25b44%25e6%259c%258819%25e6%2597%25a5/","date":"2012-04-19 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月19日 我疑问，另一个自己去哪了，我是否是完整的。 突兀的灵魂，一支画笔。 从后山回来的路上，有两只夜莺对唱，记得那是82年的夜晚，我杀了一匹狼。 我还记得它的眼睛，憎恨与怜悯；我同样看见自己，颤抖，流血的左臂。 二十年了，我曾沦为战争机器，杀戮，伦理与道德都被教导是懦夫的借口。现在，我真的感到有些乏力。 她在家了，像往常一样。 我要做决定，一个重大决定。 "},{"title":"2011年4月20日","url":"/blog/2012/04/20/2011%25e5%25b9%25b44%25e6%259c%258820%25e6%2597%25a5/","date":"2012-04-20 00:00:00 +0800","categories":["lofyer的日记"],"body":"2011年4月20日 曾经的古巴组织叫做“Jacinto”，听说在世界各地都有分布。 那么，和上次那个组织便有联系了。 需要再联系一下博士和麦克。 "},{"title":"2012年4月21日","url":"/blog/2012/04/22/2012%25e5%25b9%25b44%25e6%259c%258821%25e6%2597%25a5/","date":"2012-04-22 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月21日 今天听卡尔讲了个关于遗迹的故事。 那是在他15岁的时候，他随雇佣军队黑豹迁移到阿富汗执行任务。那时大约是七月份，沙漠中更是烤串的温度。他所在的五人小组驻扎在一处废弃的老宅中，他是年龄最小的。大约到了午夜一时，无线电耳机里传来警报，正在休息的四人立刻坐了起来。大约有10秒时间，警报解除，他们也都带上武器悄悄走出里屋来到二楼顶去找站岗的宾得——小组组长。 到楼顶后，四周一片漆黑，只有角落一处映射出人影的光，时隐时现。四人立刻举起手中的m16瞄向光源。 那光似乎察觉到了他们的存在，即刻跃起两米多高，往周围黑暗散射开，又于南方越100米聚集，最终飞离他们的视线消失在一堆沙丘后。 待他们回过神后，发现宾得裸体躺在地上，身上并无伤痕。察觉宾得还有呼吸后，他们将他抬到楼下进行紧急治疗，并守在他身边。 第二天早上，他醒了，说昨晚觉得有人在他背后咳嗽了一声，一回头便没了知觉。 大约五年后，宾得再次回到阿富汗，凭着记忆和直觉，找到了当年的老宅，并在下面挖出了能量耗尽的遗迹守护者和一块金属板。 卡尔记得，板上有一堆莫名的符号，他唯一认得的就是“一只沙漠中的花”。 "},{"title":"2012年4月23日","url":"/blog/2012/04/23/2012%25e5%25b9%25b44%25e6%259c%258823%25e6%2597%25a5/","date":"2012-04-23 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月23日 自从遗迹文明被发掘以来，已经有差不多20年了。 碎片 碎片 碎片 很想知道完整的样子。 博士和麦克都说组织中确实见过类似风信子的图案，可具体忘记是在哪了。 或许，Jacinto是黑暗中的力量，好像目睹它的强大。 "},{"title":"2012年4月24日","url":"/blog/2012/04/24/2012%25e5%25b9%25b44%25e6%259c%258824%25e6%2597%25a5/","date":"2012-04-24 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月24日 肩膀酸，神经莫名紧张，总在这两天。 "},{"title":"2012年4月26日","url":"/blog/2012/04/26/2012%25e5%25b9%25b44%25e6%259c%258826%25e6%2597%25a5/","date":"2012-04-26 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月26日 要有人去创造故事，要有人去倾听故事，这才叫完整。 我费了很大精力去追求，如果说不在乎结果，那么我在骗自己。 躺在床上问自己，这么做那么做，究竟是为什么，可下床 的时候又跟自己说，做吧，年轻人。 想想年轻时的自己，服从命令，为了爱情，活下去的理由就是自由。 可现在，或许都有了，羁绊的线，我和她。 今天的晚霞真的很美。 "},{"title":"2012年4月27日","url":"/blog/2012/04/27/2012%25e5%25b9%25b44%25e6%259c%258827%25e6%2597%25a5/","date":"2012-04-27 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月27日 明天求婚。 "},{"title":"2012年4月28日","url":"/blog/2012/04/29/2012%25e5%25b9%25b44%25e6%259c%258828%25e6%2597%25a5/","date":"2012-04-29 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月28日 釜山财团崔山明邮件来说他的人在附近山林一座遗弃的未名寺发现将军亲信莱斯的尸体，已通知将军。尸体手中攥着一封血书，他们并没有交给将军，而是希望我过去顺着血书上的符号和文字找到赖斯来釜山的原因，若是将军肯定有所隐瞒，希望我能看在崔社长救过我一命的份上，如实调查。我回复两天后出发。 她答应了，水到渠成。 "},{"title":"2012年4月30日","url":"/blog/2012/04/30/2012%25e5%25b9%25b44%25e6%259c%258830%25e6%2597%25a5/","date":"2012-04-30 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年4月30日 釜山市下着阴雨，在窗户边抽斗烟后就开始分析那张纸。 最近家中的数据服务器网络略不稳定，不过还好，今夜能出结果。 崔社长邀我明天中午去明光酒店参加舞会，他找了几个当地名流来，应该是他怀疑与事件有关的人员。 "},{"title":"2012年5月2日","url":"/blog/2012/05/03/2012%25e5%25b9%25b45%25e6%259c%25882%25e6%2597%25a5/","date":"2012-05-03 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年5月2日 回到旅馆房间已是午夜11点，整个建筑这时显得非常安静，有些诡异。 分析结果已经传回来了，假如我设计的程式逻辑没错的话，那么莱丝的应该是在与人合伙寻找十年前Jacinto在这留下的未知物品，然后莱丝想独食的目的被发现，被合伙人暴毙于此，其中合伙人可能是：78%，前第二军副指挥Dracula；76%，战争自由人Jason；50%，大烟枪Lucas；50%，釜山财团头目崔山明。 虽然崔山明是我救命恩人，但是我也不能掉以轻心。 刚看监控，有个高领遮面的男人来过，在房间内扫了两眼便走了。 这里，已经不安全了。 "},{"title":"2012年5月3日","url":"/blog/2012/05/03/2012%25e5%25b9%25b45%25e6%259c%25883%25e6%2597%25a5/","date":"2012-05-03 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年5月3日 她发来邮件说她把家里从新布置了一遍，她又买下了郊区一个废弃工厂准备建成工作室。 我很欣慰，她又拾起画笔了。 "},{"title":"2012年5月5日","url":"/blog/2012/05/05/2012%25e5%25b9%25b45%25e6%259c%25885%25e6%2597%25a5/","date":"2012-05-05 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年5月5日 其实我不期望是这个结果。 昨天发现旅店那个人是崔社长的手下后，便被他们一直跟踪，看样子是想办了我。 在未名寺中，将军领着达蒙等人及时赶到，处理了崔的三名部下，同时也抓住了崔。 在审问开始前，我先离开了，再不愿回去。 "},{"title":"2012年5月7日","url":"/blog/2012/05/07/2012%25e5%25b9%25b45%25e6%259c%25887%25e6%2597%25a5/","date":"2012-05-07 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年5月7日 偶尔也有风轻云淡的态度。 这两天在整理一些资料，我想写本书。 "},{"title":"毕业前的日子","url":"/blog/2012/05/09/%25e6%25af%2595%25e4%25b8%259a%25e5%2589%258d%25e7%259a%2584%25e6%2597%25a5%25e5%25ad%2590/","date":"2012-05-09 00:00:00 +0800","categories":["生活杂记"],"body":"老王又说论文有点小问题，要改下。 还有深圳公司户口和档案好像比较难办啊，不行户口还留家里吧。 还有，中间大概隔了三天没碰草，现在再抽就有“小别难相亲”的感觉了。 "},{"title":"风信子","url":"/blog/2012/05/10/%25e9%25a3%258e%25e4%25bf%25a1%25e5%25ad%2590/","date":"2012-05-10 00:00:00 +0800","categories":["生活杂记"],"body":"落云寺前，晨露暮泪 轻舟已过夏荷，倾尔复返 街角灰灯，行人魂断 再入星云间，揽众神所守 将行之时，叶亦纷纷   一眼望川，便知多少春秋 不语，不书，不知 回首，等待，不见   黄沙掩铁戟，乱风碎衣襟 无期之约，不归之人，方懂汝心   道旁石碑，觅，不见 "},{"title":"明天","url":"/blog/2012/05/18/%25e6%2598%258e%25e5%25a4%25a9/","date":"2012-05-18 00:00:00 +0800","categories":["生活杂记"],"body":"答辩 然后，就没有然后了 "},{"title":"2012年5月21日","url":"/blog/2012/05/21/2012%25e5%25b9%25b45%25e6%259c%258821%25e6%2597%25a5/","date":"2012-05-21 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年5月21日 日记本在屋子的废墟中找到了。 这场大火烧掉了我的过去，给我一个完整的未来。 "},{"title":"毕业","url":"/blog/2012/05/23/%25e6%25af%2595%25e4%25b8%259a/","date":"2012-05-23 00:00:00 +0800","categories":["生活杂记"],"body":"不要喝酒，喝酒不要超过2瓶，两瓶不要是白的。 我想，到时候，有人会哭的像泥人吧。 "},{"title":"2012年6月8日","url":"/blog/2012/06/08/2012%25e5%25b9%25b46%25e6%259c%25888%25e6%2597%25a5/","date":"2012-06-08 00:00:00 +0800","categories":["lofyer的日记"],"body":"2012年6月8日 end of the tour marriage, parsley and flowers "},{"title":"回家了","url":"/blog/2012/06/14/%25e5%259b%259e%25e5%25ae%25b6%25e4%25ba%2586/","date":"2012-06-14 00:00:00 +0800","categories":["生活杂记"],"body":"繁琐的事儿安排给他们了，在这里贴一张寝室老周写的文章。 不说“再见”507 哈尔滨的夏天十分凉爽，这样的夏天对于我这个即将离开的南方人来说真是不可多得的奢侈。正是在这美好的时光里，离别的愁绪却塞满了整个寝室，整个校园！ 去年的这个时候，也是这样的天气，也是这样的场景，各色领边的学士服穿梭于校园里的各个角落。那时的我，正坐在二号楼的教室里上着单片机课，老师在讲台上讲得唾沫横飞，而我和我的小基友们正打望着窗外黑丝学姐们，穿着学士服摆着各种各样的pose用相机定格住那一瞬间。那时的我对今天有些期待，但真没想到这个场景来得这么滴快，让我有些措手不及！ 我本是多愁善感的，但在我的潜意识里我不认为我是一个会为离别而感到难舍难分的人。我时常想，没事我们有手机，我们有校内，我们有QQ。但就在老大上出租车关上车门那一瞬间；老二放开手，微笑的说：洪锋，我走了，到海南了一定要找我；老三给我打电话告诉我：走了，各种卡都在你床上，你到时帮我退了。我的心猛然下沉了，走了走了真的走了。我的同学、我的室友、日日夜夜相伴的小基友们、成天开黑虐菜的DOTA队友们。 昨日欢声笑语的507就剩下四人了，再也听不见老大的那句：含住它了；老二再也不能教我们海南话的里的流氓语了；再也没有老三的经典外卖搭配，酱炒蛋两盒饭加一瓶可乐了；再也没有小六起床的高呼：小客搬电脑过来DO啊。 缘分让我们这天南海北的八人相聚507；那份深深的情让我们在507欢度三年，虽然有苦有甜，有喜又忧；我相信就算我们散落于天涯海角，那份浓浓的思念也会把我们的心紧连一起！ 兄弟们，一路走好！咱们不说“再见”！因为那太假！只要我们想见，24小时内绝对能相见！ 507经典语录： 周黎明（老大）：含住它！（一语道破了百千上万同胞们的心声） 吴挺标（老二）：蓝路蓝乎乎一般！（海南语最直白的表白） 将迪（老三）  ：FUCK SHIT 日 干 操！（多么霸气的爷们当年这句话唬住了多少位DOTA界的大神） 宗学龙（老四）：此人名言太多，为咱们解析了三四班全部女生，无人不知，无所不晓，俗称江湖百晓生！ 李天路（小六）：小客搬电脑DO啊！（每天早上唤醒正在春梦的DOTA基友们） 宋晓强（小七）：我得减肥~(≧▽≦)/~啦啦啦；操你二大爷加三姥姥四姑滴！（俗不可耐啊） 高兴龙（小八）：不在乎天长地久；只在乎今晚一宿！（这句话就不说什么了，大家都明白滴） 还有小强的补充：替你补充下老五的资料，老五，又名周神，以“没有拆不散的夫妻，只有不努力的小三”为座右铭，主打歌是什么我叫小莫（此处省略好多字），脾气好，是大家共同的小基友。 奶奶个熊最后连我的姓都tm打错，吃屎长大的吧你。。 "},{"title":"V字仇杀队&#8211;经典台词","url":"/blog/2012/07/05/v/","date":"2012-07-05 00:00:00 +0800","categories":["workshop"],"body":" http://lofyer.github.io/uploads/2012/10/Q%E6%92%AD%E7%94%B5%E5%BD%B1V%E5%AD%97%E4%BB%87%E6%9D%80%E9%98%9F.rmvb09-57-06.mp3 Remember, remember The 5th of November 要记住，要记住，11月的5日 The gunpowder treason and plot 火药阴谋和叛乱 I know of no reason Why the gunpowder treason Should ever be forgot 我不知有何理由可以忘记火药阴谋 We are told to remember the idea and not the man 我们被教导要记住思想，不是人 Because a man can fail He can be caught, he can be killed and forgotten 因为人可能失败 他可能会被捕 他会被杀死、被遗忘 But 400 years later……an idea can still change the world 但400年后思想仍可改变世界 I have witnessed firsthand the power of ideas. 我亲眼目睹了思想的威力 I’ve seen people kill in the name of them… 我见过人们以它为名杀戮 …and die defending them 为维护它而送命 But you cannot kiss an idea……cannot touch it or hold it 但你不能杀死思想不能触到它或者捧着它 Ideas do not bleed. They do not feel pain. 思想不会流血，不会感到痛苦 思想不会死去 They do not love.他们不会爱 And it is not an idea that I miss 但我最思念的不是思想 It is a man A man that made me remember the 5th of November. 是一个男人，让我记住11月5日的男人 A man that I will never forget. 一个我永不会忘记的男人 That with devotion’s visage and pious action we do sugar o’er the devil himself. 人们往往用至诚的外表和虔敬的 行动，掩饰一颗魔鬼般的 Who is but the form following the function of what……and what I am is a man in a mask. 我是谁？名字只是事物的代号而已 而我是一个戴面具的人 I’m merely remarking upon the paradox of asking a masked man who he is. 我不过是指出一个矛盾， 需要问一个戴面具的人是谁吗？ But on this most auspicious of nights……permit me then, in lieu of the more commonplace sobriquet……to suggest the characterof this dramatis persona. 这样一个美好的夜晚请允许我建议用更平常的语言来介绍一位戏剧性的角色 In view, a humble vaudevillian veteran……cast vicariously as both victim and villain by the vicissitudes of fate. This visage, no mere veneer of vanity… …is a vestige of the vox populi, now vacant, vanished. However, this valorous visitation of a bygone vexation stands vivified… …and has vowed to vanquish these venal and virulent vermin vanguarding vice… …and vouchsafing the violently vicious and voracious violation of volition. The only verdict is vengeance, a vendetta… …held as a votive not in vain, for the value and veracity of such… …shall one day vindicate the vigilant and the virtuous. Verily, this vichyssoise of verbiage veers most verbose. So let me simply add that it’s my very good honor to meet you……and you may call me V. 一位谦虚的杂耍老手代苦难命运的受害者和加害者演出这个面孔，不只是虚华的外表它是遗存的人民呼声 现已空洞消亡 不过，我这对过往烦恼的勇敢访问者 恢复了生命的活力 决心铲除那些引来 腐败堕落邪恶的毒虫 遏制他们狂暴的恶毒的 以及贪婪的对意志的破坏 对他们唯一的裁决就是复仇 正义和警惕的信念不会落空 它们的价值和真理终将实现 当然，我这段莫名其妙的杂碎汤 带来的是最冗长的自我介绍 所以简单地说，能遇见您 是我很大的荣幸，请叫我V The DCD was Tchaikovsky’s 1812 Overture.CD是柴科夫斯基的《1812序曲》 Whereby important events of the past… -……历史的重要时刻…… …usually associated with someone’s death or the end of some awful, bloody struggle… 通常是跟某人的死去或者 苦难挣扎的结束有关 …are celebrated with a nice holiday… …I thought we could mark this November the 5th… 然后以一个美好的 假日来纪念 我想我们可以把这个11月5日作为 …a day that is, sadly, no longer remembered… 可悲地不再被记住的一天 …by taking some time out of our daily lives to sit down and have a little chat. 只需从我们的日常生活 里抽出一点时间 There are, of course, those who do not want us to speak. 坐下来谈一会话 当然有些人不希望我们发言 Let me think, let me think. Even now, orders are being shouted into telephones… …and men with guns will soon be on their way. – It’s Chancellor Sutler. – Damn it! 就在现在，电话里吼叫着命令 – 带枪的人们正在路上 – 是苏特勒元首 该死！ Why? Because while the truncheon may be used in lieu of conversation… 因为尽管沉默代替了谈话 …words will always retain their power. 言语却总是能保持它的力量 Words offer the means to meaning… 含义深刻的言语 …and, for those who will listen, the enunciation of truth. 它向那些愿意倾听的 人们发出真相的宣告 …there is something terribly wrong with this country, isn’t there? 而真相是，这个国家 有些事情错得可怕 Cruelty and injustice, intolerance and oppression. 残暴、不公、歧视和镇压 And where once you had the freedom to object……to think and speak as you saw fit……you now have censors and surveillance coercing your conformity……and soliciting submission. 你曾经有过反对的自由可以说出你想说的话。你现在有了传感器和监视系统强迫你随大流 How did this happen? Who’s to blame? 这是怎么发生的？ 这要怪谁？ Certainly there are those who are more responsible than others. 有谁比大家更需要负上责任？ And they will be held accountable. 他们会遭到惩罚的 But again, truth be told, if you’re looking for the guilty… 但是，真相讲完了 你要找罪人的话 …you need only look into a mirror.你只需要照照镜子 I know why you did it. I know you were afraid. 我知道你为什么这样做 我知道你害怕 Who wouldn’t be? War, terror, disease. 战争、KB事件、疾病 There were a myriad of problems which conspired……to corrupt your reasonand rob you of your common sense. 它们就像杂草种子 用来摧毁你的理智 Fear got the best of you. 恐惧控制了你 And in your panic, you turned to the now High Chancellor Adam Sutler. 你在慌乱中投向了元首先生 ——亚当·苏特勒 He promised you order, he promised you peace……and all he demanded in return was your silent, obedient consent. 他向你许诺秩序 他向你许诺和平 所要的回报不过 是你的服从和沉默 Last night, I sought to end that silence. 昨晚我决定结束这种沉默 Last night, I destroyed the Old Bailey… 昨晚我摧毁了老巴里街 …to remind this country of what it has forgotten. 以提醒这个国家忘记的事情 More than 400 years ago, a great citizen wished to imbed the 5th of November……forever in our memory. 将近400年前 一位伟大的公民打算将11月5日 永远刻入我们的记忆中 His hope was to remind the world that fairness, justice and freedom……are more than words. 以此提醒世界公平、正义和自由 不只是口头说说 They are perspectives. So if you’ve seen nothing……if the crimes of this government remain unknown to you……then I would suggest that you allow the 5th of November to pass unmarked. 它们是人的权利所以如果你什么也没看见 对这个go-vern-ment犯下 的罪行一无所知 我建议你让这个 11月5日平淡地过去 But if you see what I see……if you feel as I feel, and if you would seek as I seek……then I ask you to stand beside me,one year from tonight……outside the gates of Parliament. 可是如果你看见我所见的如果你有跟我一样的感受如果你像我一样去寻觅 我请你在一年以后的今晚站到议会大厦的外面 团结一致，我们将使11月5日 永远不会被忘怀 I dare do all that may become a man. Who dares more is none. 只要是男子汉做的事，我都敢做 没有人比我有更大的胆量 Macbeth.《麦克白》 But I’d only told them the truth. Was that so selfish? 我只是告诉他们真相 那是否太自私？ Our integrity sells for so little, but it is all we really have. 我们的尊严是那么地小 但那是我们仅有的 It is the very last inch of us. 那是我们最后一寸领地 But within that inch……we are free. 但在那一寸领地里，我们是自由的 Beneath this mask there is more than flesh. 这张面具之下不止是肉体 Beneath this mask there is an idea, Mr. Creedy. 这张面具之下是一种 思想，克里蒂先生 And ideas are bulletproof. 思想是杀不死的 "},{"title":"回不去就往前走","url":"/blog/2012/09/03/%25e5%259b%259e%25e4%25b8%258d%25e5%258e%25bb%25e5%25b0%25b1%25e5%25be%2580%25e5%2589%258d%25e8%25b5%25b0/","date":"2012-09-03 00:00:00 +0800","categories":["生活杂记"],"body":"昨天我试图追寻往日的痕迹，未果。 多年来有过很多次尝试，一个人自作多情的尝试，每次都期待奇迹发生。 如果我有一天真的远去，那我会给自己不回头的勇气。 "},{"title":"一些笔记（老版笔记已丢失，此为增补）","url":"/blog/2012/09/18/%25e7%25ac%2594%25e8%25ae%25b0/","date":"2012-09-18 00:00:00 +0800","categories":["notes"],"body":"WebFramework: Django Cappuccino->mockingbird 搜索Tab grep -P \"t\" 批量替换 sed -i \"s/qwe/asd/g\" `grep -rl \"qwe\"` cmake 配置安装完opencv后，将安装路径中到lib/pkg-config/opencv.pc复制到/usr/lib/pkg-config，然后可以进行pkg-config 查找 gnome3任务栏快捷方式的存放位置拖到浏览器或者终端里你就看见了。。 curl POST curl -X POST -d '4142430A02000' http://user:pass@myhost/hudson/job/_jobName_/postBuildResult curl -X POST -d @myfilename http://user:pass@myhost/hudson/job/_jobName_/postBuildResult ddwrt 内网不能访问内网域名 iptables -t nat -I POSTROUTING -o br0 -s 192.168.0.188/24 -d 192.168.0.188/24 -j MASQUERADE vpn的内网的问题 iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j SNAT --to-source 70.8.7.6 iptables -t nat -A POSTROUTING -o eth0 -s 172.16.1.0/24 -j MASQUERADE delete git branch git push origin :yourbranch ipa client reinstall 删除 /etc/ipa/ca.crt 证书 fedora制作安装cd #!/bin/bash livecd-creator --config=/usr/share/spin-kickstarts/fedora-livecd-desktop.ks \\ --fslabel=Test \\ --tmpdir=/root/iso/tmp \\ --cache=/root/iso/cache \\ --nocleanup \\ --cacheonly #为节约下载时间可在以后制作时忽略 mysql grant grant all privileges on *.* to root@'%' identified by '123456'; flush privileges; 打开kvm nested参数 cat /sys/module/kvm_intel/parameters/nested 为N则 modprobe -r kvm-intel modprobe kvm-intel nested=1 Fedora滚动升级版 Rawhide yum install fedora-release-rawhide yum-config-manager --disable fedora updates updates-testing yum-config-manager --enable rawhide yum update yum yum --releasever=rawhide distro-sync --nogpgcheck Opensuse滚动升级版 Tumbleweed zypper ar --refresh http://download.opensuse.org/repositories/openSUSE:/Tumbleweed/standard/ Tumbleweed zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/oss/ 'openSUSE Current OSS' zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/non-oss/ 'openSUSE Current non-OSS' zypper ar --refresh http://download.opensuse.org/update/openSUSE-current/ 'openSUSE Current updates' zypper ar --refresh http://download.opensuse.org/update/openSUSE-non-oss-current/ 'openSUSE Current non-OSS updates' zypper dup vs2012修复补丁 由于升级.net 4.5会出现vs2012部分项目失败，可以打这个补丁修复 Microsoft Visual Studio 2012 更新 (KB2781514) RESTClient 针对RESTful的API可以使用这个工具 http://restclient.org owncloud repo http://software.opensuse.org/download/package?project=isv:ownCloud:devel&package=owncloud-client android google play cp /data/app/googleplay /system/app/ 获取Gravatar头像 curl http://www.gravatar.com/avatar/`echo -n me@mydomain.com | md5sum` > gravatar.jpg Maven insecure SSL -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true bVNC build FreeRDP: checkout dbbb341; cmake .; ant release Singed keystore: keytool -genkey -alias android.keystore -keyalg RSA -validity 20000 -keystore android.keystore http://www.mail-archive.com/spice-devel@lists.freedesktop.org/msg13763.html IPA ADD-USER #!/bin/bash echo -e \"pswd4admin\\n\" | kinit admin echo -e \"$1\\n$1\\n$1\\n\" | ipa user-add echo -e \"$1\\n$1\\n\" | ipa passwd $1 sleep 1 echo -e \"$1\\n$1\\n$1\\n\" | kinit $1 NTP server server 192.168.1.11 mask 255.255.0.0 nomodify 启动ntpd后要等个几分钟，client才能去同步，否则报错说未找到合适的ntp服务器 rsync rsync -zvrtopgal -e ssh --delete --stats --progress --exclude 'ignore.txt' root@lofyer.org:/var/log /home/lofyer/lofyer.org/ CentOS Smartcard SmartCard service: openct pcscd zathura 很好的PDF阅读器 ssh without password # Generate rsa key pair without passphrase [demo@A ~]$ ssh-keygen -t rsa # Copy pub key to B [demo@A ~]$ cat .ssh/id_rsa.pub | ssh alpha@B 'cat >> .ssh/authorized_keys2' # Add private key to A [demo@A ~]$ ssh-add ~/.ssh/id_rsa debian offcie乱码 安装文泉逸字体 apt-get install fonts-wenquanyi debian virt-viewer with spice deb http://mirrors.163.com/debian/ unstable main deb-src http://mirrors.163.com/debian/ unstable main deb http://security.debian.org/ unstable/updates main deb-src http://security.debian.org/ unstable/updates main # unstable-updates, previously known as 'volatile' deb http://mirrors.163.com/debian/ unstable-updates main deb-src http://mirrors.163.com/debian/ unstable-updates main deb http://apt.wxwidgets.org/ unstable-wx main deb-src http://apt.wxwidgets.org/ unstable-wx main Better DNS dns1: 199.91.73.222 dns2: 8.8.8.8 audit log Modify /etc/audit/audit.conf to 8192 or bigger. memcached PHP # apt-get install memcached php5-memcached modify /etc/php5/conf.d/memcached.ini disable TSO GSO to improve virtio-net # ethtool -K eth0 gso off # ethtool -K eth0 tso off disable PackageKit in Fedora /etc/yum/pluginconf.d/refresh-packagekit.conf enabled=0 推荐一种工作方式 集成显卡下运行linux，将另一块硬盘或者vdisk，还有独立显卡passthrough给虚拟机Win7，协议使用spice，这是很爽啊 crt & key to pem openssl x509 -inform DER -outform PEM -in server.crt -out server.crt.pem openssl rsa -inform DER -outform PEM -in server.key -out server.key.pem cat server.crt.pem server.key.pem >> server.pem wireless relay for tomata 设置无线中继时确保主路由和从路由的SSID、密码、加密方式一致，不要使用WPA/WPA-2混合模式 libvirt password # saslpasswd2 -a libvirt root netcat(nc) tips 大传输文件(file transfer) server: nc -l 5555 < file_to_copy client: nc server_ip 5555 > new_file 聊天(chat) client1: nc -l 5555 client2: nc server_ip 5555 udp connection server: nc -4 -u -l 5555 clinet: nc -4 -u localhost 5555 owncloud repo [isv_ownCloud_community] name=Latest stable community release of ownCloud (CentOS_CentOS-6) type=rpm-md baseurl=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/ gpgcheck=1 gpgkey=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/repodata/repomd.xml.key enabled=1 gnome terminal proxy $ ssh -ND 7070 yourname@yourserver $ gconftool-2 -R /system/proxy # show configuration $ gconftool-2 -s /system/proxy/socks_host -t int 127.0.0.1 $ gconftool-2 -s /system/proxy/socks_port -t int 7070 $ gconftool-2 -s /system/proxy/mode -t string manual # enable $ gconftool-2 -s /system/proxy/mode -t string none # disable "},{"title":"让dnspod解析了","url":"/blog/2012/10/12/%25e8%25ae%25a9dnspod%25e8%25a7%25a3%25e6%259e%2590%25e4%25ba%2586/","date":"2012-10-12 00:00:00 +0800","categories":["生活杂记"],"body":"godaddy的解析在朝内老是挂掉，有人说国内的dnspod不错，就换换试试了，添加@ A与www A记录，在gd上设置ns为dnspod的，也就半小时就好了。 吐槽下pod的进阶服务怎么不识别我电信手机号←_←   "},{"title":"黑客与画家（摘抄）","url":"/blog/2012/10/12/%25e9%25bb%2591%25e5%25ae%25a2%25e4%25b8%258e%25e7%2594%25bb%25e5%25ae%25b6%25ef%25bc%2588%25e6%2591%2598%25e6%258a%2584%25ef%25bc%2589/","date":"2012-10-12 00:00:00 +0800","categories":["博文收集"],"body":"1.使用计算机以及所有有助于了解这个世界本质的事物都不应受到任何限制。任何事情都应该亲手尝试。 Access to computer–and anythin that might teach you something about the way the world works–should be unlimited and total. Always yield to the Hands-On Imperative. 2.信息应该全部免费。 All information should be free. 3.不信任权威，提倡去中心化。 Mistrust Authority–Promote Decentralization. 4.判断一名黑客水平应该看他的技术能力，而不是他的学历、年龄或地位等其他标准。 Hackers should be judged by their hacking, not bogus criteria such as degrees, age, race, or position. 5.你可以用计算机创造美和艺术。 You can create art and beauty on a computer. 6.计算机使生活更美好。 Computers can change your life for the better. 幽默一定程度上反映了力量。幽默感是强壮的一种表现，始终拥有幽默感代表你对厄运一笑了之，而丧失幽默感则表示你被厄运深深伤到。所以，强壮的标志（或至少是特点）就是轻松面对自己的人生。充满自信的人常常像燕子一样，以一种居高临下的姿态轻盈地看到周围的一切，比如希区柯克拍摄的电影、16世纪画家勃鲁盖尔的绘画（甚至莎士比亚也是这方面的一个例子。） "},{"title":"wrt54g v5添加usb","url":"/blog/2012/10/12/wrt54gs-64ram-8flash/","date":"2012-10-12 00:00:00 +0800","categories":["device hack"],"body":"1.dd-wrt.com下载固件包及源码包 2.编译添加或者配置usb存储支持 3.按接口图添加usb http://www.home-wifi.com/forum.php?mod=viewthread&page=1&tid=3962 注意焊点位置，两个数据线左边D+，右边D-，下边的472是4.7k的下拉电阻，右边两个电阻是另一组USB口。所以直接引线就可以，但是我的优盘经常不能识别，就又在USB座上把两条数据线对地接了10k的下拉电阻，相当于和图上的472并起来，现在使用很正常。 使用5V 3A电源给路由器供电，不用安装7805了，电源线直接接到电源插座   "},{"title":"RTX内核","url":"/blog/2012/10/13/rtx%25e5%2586%2585%25e6%25a0%25b8/","date":"2012-10-13 00:00:00 +0800","categories":["arduino 2560"],"body":"下载了最新的MDK后，发现里面有个RTX内核，玩了一下，和UCOSII很像。 semaphore，message，mailbox，mutex等同步与通信机制，代码易读，可移植性也好，在mini2440上运行完美，我只用了4个led 观察。 喜欢的话可以看看，这是RTX内核源码，移植需要更改MDK中board 部分内容。 点击下载  RTX   "},{"title":"ovirt notes","url":"/blog/2012/10/18/ovirt-notes/","date":"2012-10-18 00:00:00 +0800","categories":["virtualization"],"body":"Ovirt Just make some notes: # need net qemu-kvm -m 1024 -localtime -M pc -smp 2 -drive file=ovirt.qcow2,cache=writeback,boot=on -boot d -name kvm-ovirt,process=ovirt -usb -usbdevice tablet Ovirt provided a fedora.iso with node in it. Ao is building the engine. on virtfan spicec -h localhost -p 5910 node应该是自动加入engine的，结果是现在能加入，但是不能安装 nmap后engine确实是有8443，node只有22，安装过程是交互的（node通过外网获取安装包，返回状态到engine） 改变端口为443，按照troubleshooting更改engine上的nfs服务。f17上nfs默认建立服务为v4，要改为v3，并且添加group和user id分别为36的vdsm与kvm，用提供的脚本测试下。 Troubleshooting_NFS_Storage_Issues ok，等明天加入节点就可以了。 Building ovirt from source with cmdline within an ide install jboss maven plugin on eclipse here’s the engine arch and here’s the engine-core arch 运行engine-manage-domain需要ipa-server，类似windows的ActiveDirectory，需要不同于engine的主机上安装ipa 安装ipa-server "},{"title":"arduino","url":"/blog/2012/10/21/arduino/","date":"2012-10-21 00:00:00 +0800","categories":["arduino 2560"],"body":"目前最流行的是uno系列，而leonardo好象是在1.0.1后才加入的，其ide开发是在github上进行。 设计很清爽（因为没有UI设计师吧），希望别像keil一样越来越冗余。 "},{"title":"画&#8211;增补","url":"/blog/2012/10/24/%25e7%2594%25bb-%25e5%25a2%259e%25e8%25a1%25a5/","date":"2012-10-24 00:00:00 +0800","categories":["workshop"],"body":"这是lofyer早期的作品 这是最近的作品 "},{"title":"tcp协议之上的CCNx","url":"/blog/2012/10/27/tcp%25e5%258d%258f%25e8%25ae%25ae%25e4%25b9%258b%25e4%25b8%258a%25e7%259a%2584ccnx/","date":"2012-10-27 00:00:00 +0800","categories":["networking"],"body":"刚在lwn上看到了个有意思的东西，ccnx，主要作用于媒体中心传播数据（视频）。 在06年于google的演讲中，Jacobson说设计了一种新的媒体传输协议，举了奥运会期间NBC传播同一赛事，大家都卡卡的例子。 类似p2p或者bt吧，几千用户请求同一视频，对于已经从server中出去的数据，就让用户互传，当然，数据包里带有签名，防止新用户的重复请求。 目前最新的是0.62版本 ，用于linux发行版下载效果应该不错，目测缺点是路由负载可能会高那么点。 "},{"title":"VDSM","url":"/blog/2012/10/29/vdsm/","date":"2012-10-29 00:00:00 +0800","categories":["virtualization"],"body":"不喜欢java，就是不喜欢。。但还是要干的。。 4000多个文件构建UML图的话有点困难，都是小类，看了些tools的代码，然后转到vdsm内容，通讯方式是xml-rpc，当初我猜对了。 vdsm是oVirt的节点代理，功能可订制，也可移植到其他管理平台，基于KVM，储存VM各种暂态数据 vdsm提供的api通过xmlrpc使用，架构如下 ------------+------VDSM-------+------+----- | | | sysfs---+ | | LVM---+ libvirt | net-tools---+ qmp| |Virtio serial xxx---+ ---+ +-------------/ ... | | -------/ ------- / | KVM-QEMU VM | ________________________/ 主要包括vdsm,vdsm_cli,vds_bootstrap,vdsm_reg,vdsm_hooks 其中lifecycle hooks有针对vdsm和vm在before和after期间 bootstrap用于验证兼容性，包括网络，cpu，认证等，目前只支持RH自家产品 "},{"title":"mingw编译remoteviewer","url":"/blog/2012/11/17/mingw%25e7%25bc%2596%25e8%25af%2591remoteviewer/","date":"2012-11-17 00:00:00 +0800","categories":["virtualization"],"body":"在fedora环境中，需要的有spice-gtk，libusbx，usbredir，remote-review，全部下载最新git源 spice-gtk，usbredir http://cgit.freedesktop.org/spice libusbx git://github.com/libusbx/libusbx.git remote-viewer git.fedorahosted.org/git/virt-viewer.git libusbx和usbredir： mingw32-configure;mingw32-make;mingw32-make install spice-gtk： mingw32-configure –with-sasl=no –with-audio=gstreamer –enable-smartcard=no –with-gtk=2.0 –without-python 因为virtviewer要gtk2.0的，所以这也就2.0的；mingw32下没找到pygtk，图省事儿就不要python了，其他的缺啥下啥 mingw32-make mingw32-make install virt-viewer： mingw32-configure mingw32-make mingw32-make install 生成remote viewer.exe 安装包 运行nsiswrapper生成windows安装包 nsiswrapper --run --name \"Virt-Viewer\" --outfile \"Virt-Viewer-for-Windows.exe\" --with-gtk /usr/i686-pc-mingw32/sys-root/mingw/bin/virt-viewer.exe 缺少的dll从网上下或者windows环境中安装的virtviewer加到$PATH中 这样会缺少三个xml文件，在virtviewer/src里，直接copy过去 export PATH=$PATH:/usr/i686-pc-mingw32/sys-root/mingw/bin:. windows client中使用usbredir： 需要libwdi或者zadig或者usbclerk 链接 todo: 只有libvirt不是最新的了，可是目前来看没影响 "},{"title":"安好？","url":"/blog/2012/11/19/%25e5%25ae%2589%25e5%25a5%25bd%25ef%25bc%259f/","date":"2012-11-19 00:00:00 +0800","categories":["生活杂记"],"body":"从那天至今我算算该有5年多了，可偶尔还会想起。有些场景我偶尔也会想起，可最无言的是你给的。 我接受平淡乃至扯淡，好久没有惊奇，就不知如何对付。 虐心的事好多，我默默承受，记下。 这么多过来我还是相信不喜欢就不要滞留，哪怕是一瞬间，裂纹经不起流年。 交集，多令人反感的一个名词，曾经乃至现在我都在追求，我觉得有一天我会摒弃它。 不努力不知道自己无力，这有时就是现实。 当年文艺如今已变成二逼，因为有人拒绝，也有拒绝别人，把当时的场景搬到现在，就演绎一场叫做后悔的好戏。 梦想的附带品是勉强，勉强便成了习惯，习惯很难改掉就是风俗，风俗换个角度体现了本性，本性是什么，意识的不自觉的结晶，可能是金子，也可能就是一泡屎。 至今，空中还有挥散不去的烟味，出门盖不过各种乱七八糟的香水味，胡子两天不刮就开始扎手，由于R18内容限制，此处略去5000字，于是，我释然了。 数据没有绝对安全稳定可靠的，留意就好。 好吧，就这些吧。 "},{"title":"IPA","url":"/blog/2012/11/27/1658/","date":"2012-11-27 00:00:00 +0800","categories":["ldap"],"body":"IPASERVER+DNS(DDWRT)+IPACLIENT SERVER: ipa-server-install时这里可以不要内部dns 注意host以及domain要在dns里有记录 添加用户 ipa user-add 设置密码 ipa passwd demo DNS: 下面是ddwrt的dnsmasq配置 <br /> domain=ovirt.engine<br /> local=/ovirt.engine/<br /> expand-hosts<br /> address=/ovirtmgmt.ovirt.engine/192.168.1.106<br /> ptr-record=106.1.168.192.in-addr.arpa,\"ovirtmgmt.ovirt.engine\"<br /> address=/ipa.ovirt.engine/192.168.1.108<br /> ptr-record=108.1.168.192.in-addr.arpa,\"ipa.ovirt.engine\"<br /> srv-host=_kerberos-master._tcp,ipa.ovirt.engine,88,0,100<br /> srv-host=_kerberos-master._udp,ipa.ovirt.engine,88,0,100<br /> srv-host=_kerberos._tcp,ipa.ovirt.engine,88,0,100<br /> srv-host=_kerberos._udp,ipa.ovirt.engine,88,0,100<br /> srv-host=_kpasswd._tcp,ipa.ovirt.engine,464,0,100<br /> srv-host=_kpasswd._udp,ipa.ovirt.engine,464,0,100<br /> srv-host=_ldap._tcp,ipa.ovirt.engine,389,0,100<br /> IPACLIENT: install时注意域名及主机名正确 OVIRT: 初次使用要在SERVER运行 kinit admin reinstall出错时： # ipa-server-install –uninstall -U # ls -ld /var/lib/pki-ca If it exists run: # pkiremove -pki_instance_root=/var/lib -pki_instance_name=pki-ca –force # yum reinstall pki-selinux "},{"title":"arduino+cpuload+serial+led","url":"/blog/2012/12/09/arduinocpuloadserialled/","date":"2012-12-09 00:00:00 +0800","categories":["arduino 2560"],"body":"用libgtop2的库，已完成。 注意： 数据以ascii类型传输，调用led时转化为int cpu利用率算式: (float)(100*(cpu_time2.(sys+user)-cpu_time2.(sys+user))/(cpu_time2.total-cpu_time1.total)) "},{"title":"年终","url":"/blog/2013/01/01/%25e5%25b9%25b4%25e7%25bb%2588/","date":"2013-01-01 00:00:00 +0800","categories":["生活杂记"],"body":"2012过去了 想想挺快，23了 好像很着急的样子，可不知道急什么 心态，心态 "},{"title":"owncloud webdav intergration","url":"/blog/2013/01/03/owncloud-intergration/","date":"2013-01-03 00:00:00 +0800","categories":["owncloud"],"body":"安装好owncloud后，可以使用webdav协议进行远程挂载，比如 mount -t davfs {http://localhost/remote.php/webdav,http://localhost/files/webdav.php} /mnt 2003上需启动webclient服务 而在2008上, webclient被集成到desktop experience组件中, 从service manager->feature中添加desktop experience,并且修改注册表HKEY_LOCAL_MACHINE->SYSTEM->CurrentControlSet->Services->WebClient->Parameters->BasicAuthLevel 的值为 2，重启服务 此时可映射网络驱动器，钩选“connect using different credentials”，输入其用户名密码即可 或者命令行 NET USE * http://localhost/remote.php/webdav 123456 /user:admin PS： 1. owncloud第三方app WebDev安装后会造成不能添加用户的麻烦 2. 修改owncloud目录权限为apache.apache或者www-data.www-data以使.htaccesss生效 "},{"title":"eclipse multiuser","url":"/blog/2013/01/09/eclipse-multiuser/","date":"2013-01-09 00:00:00 +0800","categories":["program"],"body":"Add following code to your eclipse/configuration/config.ini osgi.configuration.area=@user.home/Eclipse/configuration osgi.sharedConfiguration.area=/opt/eclipse/configuration osgi.configuration.cascaded=true "},{"title":"python交互式输入","url":"/blog/2013/01/14/python%25e4%25ba%25a4%25e4%25ba%2592%25e5%25bc%258f%25e8%25be%2593%25e5%2585%25a5/","date":"2013-01-14 00:00:00 +0800","categories":["program"],"body":"cmd='echo \"%s\\n%s\" | smbpasswd -s -a %s'%(password, password, self.login) PS: 好像很少用到这种，反正我是试了下echo “123456″ | su demo，果断出现两层。。 "},{"title":"菜根谭小记","url":"/blog/2013/01/22/%25e8%258f%259c%25e6%25a0%25b9%25e8%25b0%25ad%25e5%25b0%258f%25e8%25ae%25b0/","date":"2013-01-22 00:00:00 +0800","categories":["生活杂记"],"body":"入世，出世 当阅，当阅，当使劲阅 修身： 应酬： 随缘便是遣缘，似舞蝶与飞花共适；顺事自然无事，若满月偕盂水共圆 评议： 古人闲适处，今人却忙过了一生；古人实受处，今人又虚度了一生。总是耽空逐妄，看个色身不破，认个法身不真耳。 众人以顺境为乐，而君子乐自逆境中来；众人以拂意为忧，而君子忧从快意处起。盖众人忧乐以情，而君子忧乐以理也。 闲适： 君子之心事，天清日白，不可使人不知；君子之才华，玉韫珠藏，不可使人易知。 "},{"title":"OpenVPN","url":"/blog/2013/02/05/openvpn/","date":"2013-02-05 00:00:00 +0800","categories":["networking"],"body":"服务端: 生成证书等相关文件 /etc/openvpn/easy-rsa/2.0 生成证书 # ./build-ca 生成服务器认证 # ./build-key-server server 生成客户端 # ./build-key client1 更新数据库 # ./build-dh /etc/openvpn/server.conf local 192.168.1.132 port 1194 proto udp dev tap ca /etc/openvpn/easy-rsa/2.0/keys/ca.crt cert /etc/openvpn/easy-rsa/2.0/keys/server.crt key /etc/openvpn/easy-rsa/2.0/keys/server.key # This file should be kept secret dh /etc/openvpn/easy-rsa/2.0/keys/dh1024.pem server 192.168.0.0 255.255.255.0 ifconfig-pool-persist ipp.txt push \"route 192.168.1.0 255.255.255.0\" push \"redirect-gateway def1 bypass-dhcp\" push \"dhcp-option DNS 116.228.111.118\" push \"dhcp-option DNS 180.168.255.18\" client-to-client duplicate-cn keepalive 10 120 comp-lzo user nobody group nobody persist-key persist-tun status openvpn-status.log verb 3 运行: # openvpn --config /etc/openvpn/server.conf --daemon 客户端: Windows: client1.ovpn client dev tap proto udp remote hostname 1194 persist-key persist-tun ca ca.crt cert client1.crt key client1.key comp-lzo 其他需要文件为ca.crt, client1.crt, client1.key 放到安装目录的config中 连接外网: 打开ipv4的ipforwad 当次 # echo 1 > /proc/sys/net/ipv4/ip_forward 保存 sysctl -a | grep ip_forward sysctl -w net.ipv4.ip_forward=1 在server上将来自子网192.168.0.0的转换为来自192.168.1.100 iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j SNAT --to-source 192.168.1.100 "},{"title":"inspire","url":"/blog/2013/02/25/inspire/","date":"2013-02-25 00:00:00 +0800","categories":["memo"],"body":"client : android/pc/arduino server : linux node : with client service installed action : cmd src dest backend: recognize the cmd, get src type from the dest, search src in the node SCHEDULE [DONE]1. voice recognization test complete [TODO]2. use its api in C/python [*Abort*] No idea… "},{"title":"ltsp相关","url":"/blog/2013/03/15/httpwiki-phys-ethz-chreadmesetting_up_an_ltsp_server_for_diskless_clients/","date":"2013-03-15 00:00:00 +0800","categories":["linux admin"],"body":"参考： https://help.ubuntu.com/community/UbuntuLTSP 安装： apt-get install ltsp-server-standalone 启动要素： nbd-server dhcpd tftp-hpa openssh-server 绑定客户端地址： [dhcpd.conf] host client201 { hardware ethernet 08:00:27:89:70:01; fixed-address 192.168.0.201; } 另外一种是在启动pxe配置文件中指定 http://wiki.phys.ethz.ch/readme/setting_up_an_ltsp_server_for_diskless_clients session & windows [/usr/share/xsession/*] Exec=/root/.xsession [/root/.xsession] !/bin/bash gnome-session & firefox logout 获取session list [/usr/share/ldm/ldminfod] [/etc/X11/xinit/Xsession] [/etc/X11/Xsession] *failsafe [/etc/X11/xdm/Xsession] [/usr/lib/X11/xdm/Xsession] [/usr/share/xsession] **default session exported by Xsession.d echo $DEFAULTS_PATH /usr/share/gconf/ 修改default session [/var/lib/tftp…/lts.conf] LDM_SESSION=”gnome-session &;firefox;logout” FatClient [/var/lib/tftp…/lts.conf] [default] LDM_DIRECTX=true [00:A1:08:EB:43:27] LTSP_FATCLIENT=false AutoLogin [/var/lib/tftp…/lts.conf] [Default] LDM_AUTOLOGIN = True [192.168.1.101] LDM_USERNAME = user1 LDM_PASSWORD = password1 [192.168.1.102] LDM_USERNAME = user2 LDM_PASSWORD = password2 一些参考配置 [lts.conf] # Global defaults for all clients # if you refer to the local server, just use the # “server” keyword as value # see lts_parameters.txt for valid values ########## [default] X_COLOR_DEPTH=24 LOCALDEV=True SOUND=True USE_LOCAL_SWAP=True NBD_SWAP=False SYSLOG_HOST=server XKBLAYOUT=de SCREEN_02=shell SCREEN_03=shell SCREEN_04=shell SCREEN_05=shell SCREEN_06=shell SCREEN_07=ldm # LDM_DIRECTX=True allows greater scalability and performance # Turn this off if you want greater security instead. LDM_DIRECTX=True # LDM_SYSLOG=True writes to server’s syslog LDM_SYSLOG=True "},{"title":"Arduino IO生成波形的问题","url":"/blog/2013/03/23/arduino-io%25e7%2594%259f%25e6%2588%2590%25e6%25b3%25a2%25e5%25bd%25a2%25e7%259a%2584%25e9%2597%25ae%25e9%25a2%2598/","date":"2013-03-23 00:00:00 +0800","categories":["arduino 2560"],"body":"DigitalWrite(pin,HIGH); DELAY(10); DigitalWrite(pin,LOW) DELAY(10); 观察波形（上升沿触发）频率是51Hz，峰值为0.520V（使用外接电源的情况下，USB作电源为0.505V）。 除掉市电滤波的原因，应该是128本身Timer造成的问题，因DELAY使用的是Timer，选中的端口同样为Timer可用的端口，故在电平维持时可看到波形有毛刺（示波器太烂了吧）。 "},{"title":"关于语言","url":"/blog/2013/04/02/%25e5%2585%25b3%25e4%25ba%258e%25e8%25af%25ad%25e8%25a8%2580/","date":"2013-04-02 00:00:00 +0800","categories":["memo"],"body":"关键是要有完善的思想容器，或者叫塑造者。 看太多pop的，oop时却不易转弯了。 现在很流行么？ "},{"title":"deploy &#038; debug ovirt in the intellij ide","url":"/blog/2013/04/05/deploy-debug-earwar-in-intellij-ide/","date":"2013-04-05 00:00:00 +0800","categories":["virtualization"],"body":"Before we start, we need intellij enterprise version and a register tool.. [url] [Summary] 1. We should open the pom.xml file instead of the project directory. 2. Modify the extension of the directory in the project properties. 3. Modify the .m2 file in your personal directory to make jboss know where to deploy the project. 4. We need seperate run/debug config to make it clearer. [Steps] OVIRT_HOME=/home/demo JBOSS_HOME=/usr/jboss-as JDK=/usr/java/jdk1.7.0_17 $ cmd as demo # cmd as root 1.Compile the ovirt from src in $OVIRT_HOME $ mvn clean install -Pgwt-admin,gwt-user -DskipTests=true 2.Deploy ovirt You need ~/.m2/settings.xml file in /root/ and /home/demo directory. <settings xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"> <activeProfiles> <activeProfile>oVirtEnvSettings</activeProfile> </activeProfiles> <profiles> <profile> <id>oVirtEnvSettings</id> <properties> <jbossHome>/usr/jboss-as</jbossHome> <JAVA_HOME>/usr/java/jdk1.7.0_17</JAVA_HOME> </properties> </profile> </profiles> </settings> in $OVIRT_HOME/ear # mvn clean install -Pdep,setup 3.Run jboss You should export an environment variant and a runtime configuration file. $ echo -e \"ENGINE_USR=admin111nENGINE_ETC=/etc/ovirt-engine\" > $OVIRT_HOME/backend/manager/conf/engine.conf.defaults # export ENGINE_DEFAULTS=$OVIRT_HOME/backend/manager/conf/engine.conf.defaults # /usr/jboss-as/bin/standalone.sh UPDATE: Now there is README.developer in the source dir, just follow it. "},{"title":"Git Exp.","url":"/blog/2013/04/08/a-way-to-use-git/","date":"2013-04-08 00:00:00 +0800","categories":["program"],"body":"Supposing that you had a git server, we can use exist git as your own working bare. [On your own git server] Create a repo. Clone an exist git. $ git clone git@exist-server:exist.git Make its master branch writable. $ echo -e \"[receive]ntdenyCurrentBranch = ignore\" >> exist.git/.git/config [On your client] Create a branch & make a change. Clone exist.git as your own git-src, in which you can see the old commits and branch. $ git clone git@your-server:exist.git $ cd exist We create a new branch based on its master. $ git checkout -b mybranch $ echo \"Add README\" > README $ git add README $ git commit -m \"Add READEME in ROOT\" Since this is our first commit, we should push our branch to origin. Next time you should just type ‘git push’ $ git push origin mybranch [On your own git server] An update in master. Let’s get some new commits. $ git pull Here we get something like this… Now we get commit0 and commitA on mybranch, with commit0 and commit1 on branch master. What we want is something like this. [On your client] Merge commit1 to mybranch Way 1.Just merge them from your own git server $ git pull origin master Way 2.Pull commit1 to local master, then rebase or merge it to mybranch Merge: $ git merge master Rebase: $ git rebase master Final step: $ git push There’s a little difference between merge and rebase in history. Reference: http://gitbook.liuhui998.com/4_2.html * "},{"title":"A bash script &#8212; auto merge","url":"/blog/2013/04/10/a-git-script-auto-merge/","date":"2013-04-10 00:00:00 +0800","categories":["program"],"body":"#!/bin/bash BEGIN_DATE=`date` subject=\"Automerge conflict detected\" from=\"AutoMerge@gitserver.com\" recipients=\"user0@gmail.com,user1@gmail.com\" echo \"Begin merge at $BEGIN_DATE\" >> /mnt/automerge.log; # Need pull first GIT_UPDATE=`su git -c 'cd /home/git/src.git; git pull'` # Need pull first if [ -d /mnt/src ] then GIT_CD=`su git -c 'cd /mnt/src'`; else GIT_CLONE=`su git -c 'cd /mnt/; git clone /home/git/src.git'`; fi GIT_PULL=`su git -c 'cd /mnt/src/; git checkout master;git pull'` # Merge master to test1 GIT_MERGE=`su git -c 'cd /mnt/src; git checkout test1; git pull origin master; git push origin test1'` echo -e \"Pulling now...n\" # Test if CONFLICT exist if [[ \"$GIT_MERGE\" == *CONFLICT* ]] then echo \"CONFLICT detected!\" >> /mnt/automerge.log; # Send a mail here mail=\"subject:$subjectnfrom:$fromn$GIT_MERGEn$BEGIN_DATE\" echo -e $mail | sendmail \"$recipients\" # It'll be better if you delete current src and clone a new one RM_CLONE_CMD=`su git -c 'cd /mnt; rm -rf src'` exit 1 else # No conflict, checkout master GIT_CMD=`su git -c 'cd /mnt/src; git checkout master'` END_DATE=`date` echo \"Merge succeed at $END_DATE\" >> /mnt/automerge.log; fi exit 0 "},{"title":"Something about curl &#8212; Connecting IPA Server using json as an example","url":"/blog/2013/04/10/all-about-curl/","date":"2013-04-10 00:00:00 +0800","categories":["linux admin"],"body":"With Arduino as a server. What we want is to keep a cookie and build a HEADER http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html [P1] curl -e curl -H referer:whereicamefrom.com curl -d @file.txt curl -d \"somecmd\" curl -cookie curl -D [P2] Communicating with ipa server https://git.fedorahosted.org/cgit/freeipa.git/tree/API.txt Get ca.crt curl -k https://$YOURHOST/ipa/config/ca.crt >> /tmp/ipa.ca.cert Get sessionid sessid=$(curl -v -H referer:https://ipa.test.net/ipa/ui/index.html -H \"Content-Type:application/x-www-form-urlencoded\" -H \"Accept:*/*\" --negotiate -u : --cacert ./ca.crt -d \"user=admin\" -d \"password=12345678\" -D cookie.txt -X POST -k https://ipa.test.net/ipa/session/login_password 2>&1 | grep -o \"ipa_session=[a-zA-Z0-9]*\") Post a json file with cmd in it curl -v -H referer:https://ipa.test.net/ipa/ui/index.html -H \"Content-Type:application/json\" -H \"Accept:applicaton/json\" -negotiate -u : --cacert ./ca.crt --cookie $sessid -d @ipa.json -X POST -k https://ipa.test.net/ipa/session/json Here’s a json file { \"method\":\"user_find\", \"params\":[ [\"\"], {\"uid\":\"admin\"} ], \"id\":0 } { \"method\":\"user_add\", \"params\":[ [], { \"uid\":\"test1\", \"cn\":\"cn\", \"givenname\":\"test1\", \"sn\":\"test1\" } ], \"id\":0 } "},{"title":"Rex","url":"/blog/2013/04/15/rex/","date":"2013-04-15 00:00:00 +0800","categories":["memo"],"body":" 目前已完成 capture，dlayer和tlayer。 IplImage 和 Mat转换可考虑不用了 在写交互的部分，后期完成可能会用gtk。 需要的传感器： 加速度（FPV向） ROI：移动检测 抛弃gtk（时间长，没意思），转用ncurses "},{"title":"设计，kvm前端，mybox","url":"/blog/2013/05/03/%25e6%258d%25a2%25e4%25b8%25aa%25e9%25a6%2596%25e9%25a1%25b5/","date":"2013-05-03 00:00:00 +0800","categories":["memo"],"body":"正好趁现在有设计欲的时候给自己的git服务器换个首页。 kvm前端的脚本已完成，瞬间不想写gui的了，虽然ncurses很好用。。要不先这样，反正都是用来调virt和spice的系统 "},{"title":"Some data structure about clisp","url":"/blog/2013/05/12/some-data-structure-about-clisp/","date":"2013-05-12 00:00:00 +0800","categories":["data processing"],"body":"After reading ANSI Common Lisp, I knew that there are vec, list(construct cell), structure, hash_table and some other views I may not know. I’ll try Pratical Lisp in next period. Using clisp, enjoy this pattern of view of btree [110]> (sdraw (cons '(1) '(2))) [*|*]--------->[*|*]--->NIL | | v v [*|*]--->NIL 2 | v 1 [112]> (sdraw (cons '1 '2)) [*|*]--->2 | v 1 [115]> (sdraw '('1 '2)) [*|*]------------------>[*|*]--->NIL | | v v [*|*]--->[*|*]--->NIL [*|*]--->[*|*]--->NIL | | | | v v v v QUOTE 1 QUOTE 2 [116]> (sdraw '('1 ''2)) [*|*]------------------>[*|*]--->NIL | | v v [*|*]--->[*|*]--->NIL [*|*]--->[*|*]--->NIL | | | | v v v v QUOTE 1 QUOTE [*|*]--->[*|*]--->NIL | | v v QUOTE 2 "},{"title":"GPU Passthrough, VGA Passthrough in KVM","url":"/blog/2013/05/23/pass-host-gpu-to-guest-via-qemu-ncursescurses/","date":"2013-05-23 00:00:00 +0800","categories":["virtualization"],"body":"To inspire you, I’ve got a video from someone else. Better mutt the volume by the way. Arch Linux KVM Crysis HD Gpu Passthrough Or you can download it to see. Download the video in HD Here’s the links I refer to: http://thread.gmane.org/gmane.comp.emulators.kvm.devel/71981 https://bbs.archlinux.org/viewtopic.php?id=162768 https://docs.google.com/document/d/1ef_nfl652L0HLn_wGvnpgjsBJd9LZzaV_-rIcEEoK8Y/edit?pli=1 http://www.linux-kvm.org/page/VGA_device_assignment http://www.linux-kvm.org/page/How_to_assign_devices_with_VT-d_in_KVM Result: VGAPassthrough: success in host F19, guest Windows7 GPUPassthrough: success in Fedora-Rawhide HOST: CPU: Core i5 3470 GPU: ATI HD Radeon 7850 OS: Fedora-Rawhide QEMU: qemu-1.5.1 So, here’s the steps 0. Enable the mainboard VxT, iommu and alter the video device to Intel HD 1. See what we have got now. lspci;lspci -n We have output below ... 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Pitcairn PRO [Radeon HD 7850] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Cape Verde/Pitcairn HDMI Audio [Radeon HD 7700/7800 Series] ... ... 01:00.0 0300: 1002:6819 01:00.1 0403: 1002:aab0 ... You can see the pci bus and vendor. 2. Modify the kernel parameter, morprobe.d and libvirt.conf Add follow parameters to grub.conf intel_iommu=on pci-stub.ids=1002:6819,1002:aab0,vfio_iommu_type1.allow_unsafe_interrupts=1 NOTE: If you have got an AMD cpu, please replace “interl_iommu=on” with “iommu=pt iommu=1″ Add modprobe.conf to /etc/modprobe.d/ with this content: blacklist radeon options kvm ignore_msrs=1 options kvm allow_unsafe_interrupts=1 options kvm-amd npt=0 options kvm_intel emulate_invalid_guest_state=0 options vfio_iommu_type1 allow_unsafe_interrupts=1 change the following options in /etc/libvirt/qemu.conf: # The user ID for QEMU processes run by the system instance. user = \"root\" # The group ID for QEMU processes run by the system instance. group = \"root\" ...... # If clear_emulator_capabilities is enabled, libvirt will drop all # privileged capabilities of the QEmu/KVM emulator. This is enabled by # default. # # Warning: Disabling this option means that a compromised guest can # exploit the privileges and possibly do damage to the host. # clear_emulator_capabilities = 0 Reboot. 3. Using scripts below Version 1: VFIO-Passthrough File: vfio-bind #!/bin/bash modprobe vfio-pci for var in \"$@\"; do for dev in $(ls /sys/bus/pci/devices/$var/iommu_group/devices); do vendor=$(cat /sys/bus/pci/devices/$dev/vendor) device=$(cat /sys/bus/pci/devices/$dev/device) if [ -e /sys/bus/pci/devices/$dev/driver ]; then echo $dev > /sys/bus/pci/devices/$dev/driver/unbind fi echo $vendor $device > /sys/bus/pci/drivers/vfio-pci/new_id done done Bind the device ./vfio-bind 0000:01:00.0 0000:01:00.1 Start VM #!/bin/bash sudo modprobe vfio-pci sudo qemu-system-x86_64 -no-user-config -nodefaults -m 2048M -smp 4 -boot menu=on \\ -net nic -net user -enable-kvm -monitor stdio -vga qxl -global qxl-vga.vram_size=67108864 \\ -spice port=6000,ipv4,disable-ticketing \\ -device intel-hda,id=sound0,bus=pcie.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \\ -drive file=Windows7.iso,if=none,id=drive-ide0-1-0,readonly=on,format=raw -device ide-cd,bus=ide.1,unit=0,drive=drive-ide0-1-0,id=ide0-1-0 \\ -drive file=/home/lofyer/gpu_passthrough/f17.qcow2,if=none,id=drive-virtio-disk0,format=qcow2,cache=none,werror=stop,rerror=stop,aio=threads -device virtio-blk-pci,scsi=off,bus=pcie.0,addr=0x7,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 \\ -device virtio-balloon-pci,id=balloon0,bus=pcie.0,addr=0x8 \\ -M q35 \\ -device piix4-ide,bus=pcie.0 \\ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \\ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \\ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \\ -fda virtio.vfd Version 2: PCI-Passthrough Bind device #!/bin/bash modprobe pci-stub for id in 6819 aab0; do echo 1002 $id > /sys/bus/pci/drivers/pci-stub/new_id done for pci in 0000:01:00.{0,1}; do echo $pci > \"/sys/bus/pci/devices/$pci/driver/unbind\" echo $pci > /sys/bus/pci/drivers/pci-stub/bind done Start VM #!/bin/bash qemu-system-x86_64 \\ -hda ../f17.qcow2 \\ -cdrom /run/media/lofyer/Cache/OS_ISO/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso \\ -m 2048 -balloon virtio -smp 4 -enable-kvm \\ -device pci-assign,host=01:00.0 "},{"title":"How to solve the &#8216;boot storm&#8217; problem: BCACHE","url":"/blog/2013/05/27/how-to-resolve-the-boot-storm/","date":"2013-05-27 00:00:00 +0800","categories":["memo"],"body":"Some solutions Way 1. Add more cpus.(ABANDONED) Way 2. Add a SSD as “boot cache” Way 3. Sort the boot process POC: Way 2: Sometimes we need cache the boot section of the OS into a SSD, since no SSD on hand, let’s try to use a block device made in /dev/shm Way 3: Considering that the parrellization of the “boot action”, we have to predict the action in the near future Experiment: Using BCACHE now…or flashcache "},{"title":"近来","url":"/blog/2013/06/02/this-while/","date":"2013-06-02 00:00:00 +0800","categories":["生活杂记"],"body":"还好，有些事抓紧办，有些书抓紧看。 未来的几个月中一直是这个状态。 "},{"title":"Using Gpu in Pi","url":"/blog/2013/06/14/gpu-raspberry-pi/","date":"2013-06-14 00:00:00 +0800","categories":["raspberrypi"],"body":"We had a wiki here. http://elinux.org/RPi_Xorg_rpi_Driver#Design And vc sdk on github. It’s also in /opt/vc. https://github.com/raspberrypi X using gpu. https://github.com/simonjhall/fbdev_exa Playback accelerating. http://wiki.matthiasbock.net/index.php/Hardware-accelerated_video_playback_on_the_Raspberry_Pi Compile gstreamer{*} in Pi http://permalink.gmane.org/gmane.comp.video.gstreamer.devel/43011 Using wayland instead of X Here’s the build instruction http://wayland.freedesktop.org/raspberrypi.html For recently PI_DEBIAN img, we should just apt-get install weston weston-dev Using xwayland to run X application in wayland.. Notes: 1. If you’re going to compile cairo using egl, you shall meet a problem like undeclared ‘None’, just DEFINE one as 0L. 2. Using soft link rather than copying one when library is missing. Waiting4Test Tuning Rasbian Speedup CPU: raspi-config arm_freq=900 I always use this hack and my rpi run without problem Change scheduler/elevator at boot time: we use more responsive/less disk io usage scheduler: modify the /boot/cmdline.txt dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2 rootfstype=ext4 rootflags=commit=120,data=writeback elevator=deadline rootwait quiet Tuning sysctl.conf: as manual say, sysctl.conf is the “Configuration file for setting system variables”… well there are lot of variables you can put inside this file and for everyone we can write a book. Our goal is to gain more speed and tell our system to use less io/ram. Let’s put in the /etc/sysctl.conf: vm.dirty_background_ratio = 20 vm.dirty_expire_centisecs = 0 vm.dirty_ratio = 80 vm.dirty_writeback_centisecs = 1200 vm.overcommit_ratio = 2 vm.laptop_mode = 5 vm.swappiness = 10 Tuning SDCard: Quite hard to understand, but changing the partition alignment of the SDCard can highly improve the write speed of our sdcard. Basically we have to align the first partition to the erase block size of our sdcard. I suggest to read an reread the reference link. To do that in our sdcard that contain our RaspberryPI Debian distro we have to: backup our filesystem from linux: cd /media/mymmcblk0p2/ (the partitition that’s contain debian fs) tar -cvpzf /home/gibbio/RPI-TC_fs.tgz –exclude=./proc –exclude=./lost+found –exclude=./sys –exclude=./mnt –exclude=./media –exclude=./dev ./ cd /media/mymmcblk0p1/ (the partitition that’s contain boot kernel etc) tar -cvpzf /home/gibbio/RPI-TC_boot.tgz ./ Now use printcsd.py to find the erase block size, most sd have 128K so we use 128K/Sector size = 256 sectors (mine have 64k so we have to use 64k/512b = 128 sector alignement) sfdisk -f -H224 -S56 /dev/mmcblk0 Checking that no-one is using this disk right now … OK Disk /dev/mmcblk0: 244448 cylinders, 224 heads, 56 sectors/track Old situation: Units = cylinders of 6422528 bytes, blocks of 1024 bytes, counting from 0 Device Boot Start End #cyls #blocks Id System /dev/mmcblk0p1 0 – 0 0 0 Empty /dev/mmcblk0p2 0 – 0 0 0 Empty /dev/mmcblk0p3 0 – 0 0 0 Empty /dev/mmcblk0p4 0 – 0 0 0 Empty Input in the following format; absent fields get a default value. <c,h,s> <c,h,s> Usually you only need to specify and (and perhaps ). /dev/mmcblk0p1 :,8,c /dev/mmcblk0p1 0+ 7 8- 50175+ c W95 FAT32 (LBA) (enter enter) /dev/mmcblk0p2 : /dev/mmcblk0p2 8 1246 1239 7771008 83 Linux /dev/mmcblk0p3 : /dev/mmcblk0p3 0 – 0 0 0 Empty /dev/mmcblk0p4 : /dev/mmcblk0p4 0 – 0 0 0 Empty New situation: Units = cylinders of 6422528 bytes, blocks of 1024 bytes, counting from 0 Device Boot Start End #cyls #blocks Id System /dev/mmcblk0p1 0+ 7 8- 50175+ c W95 FAT32 (LBA) /dev/mmcblk0p2 8 1246 1239 7771008 83 Linux /dev/mmcblk0p3 0 – 0 0 0 Empty /dev/mmcblk0p4 0 – 0 0 0 Empty Warning: no primary partition is marked bootable (active) This does not matter for LILO, but the DOS MBR will not boot this disk. Do you want to write this to disk? [ynq] y Successfully wrote the new partition table Re-reading the partition table … If you created or changed a DOS partition, /dev/foo7, say, then use dd(1) to zero the first 512 bytes: dd if=/dev/zero of=/dev/foo7 bs=512 count=1 (See fdisk(8).) gibbio # fdisk -l… Disk /dev/mmcblk0: 8010 MB, 8010072064 bytes 224 heads, 56 sectors/track, 1247 cylinders, total 15644672 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disk identifier: 0x000ee283 Device Boot Start End Blocks Id System /dev/mmcblk0p1 1 100351 50175+ c W95 FAT32 (LBA) /dev/mmcblk0p2 100352 15642367 7771008 83 Linux now create ext4 FS: mke2fs -t ext4 -E stripe-width=32 -m 0 /dev/mmcblk0p2 make FAT32 partition via gparted gibbio # fdisk /dev/mmcblk0 Command (m for help): p Disk /dev/mmcblk0: 8010 MB, 8010072064 bytes 224 heads, 56 sectors/track, 1247 cylinders, total 15644672 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disk identifier: 0x000ee283 Device Boot Start End Blocks Id System /dev/mmcblk0p1 1 100351 50175+ c W95 FAT32 (LBA) /dev/mmcblk0p2 100352 15642367 7771008 83 Linux Command (m for help): x Expert command (m for help): p Disk /dev/mmcblk0: 224 heads, 56 sectors, 1247 cylinders Nr AF Hd Sec Cyl Hd Sec Cyl Start Size ID 1 00 0 2 0 223 56 7 1 100351 0c 2 00 0 1 8 223 56 1023 100352 15542016 83 3 00 0 0 0 0 0 0 0 0 00 4 00 0 0 0 0 0 0 0 0 00 Expert command (m for help): b Partition number (1-4): 1 New beginning of data (1-100351, default 1): 128 Expert command (m for help): w The partition table has been altered! Calling ioctl() to re-read partition table. Syncing disks. Now eject the sdcard, reinsert and make the restore from the tgz: cd /media/mymmcblk0p2/ tar -xvpzf RPI-TC_fs.tgz -C ./ mkdir proc mnt sys boot dev umount /media/mymmcblk0p2/ cd /media/mymmcblk0p1/ tar -xvpzf RPI-TC_boot.tgz -C ./ umount /media/mymmcblk0p1/ Eject the sdcard, plug into our Raspberry Pi and power on! "},{"title":"虚拟桌面架构中的 3ds MAX","url":"/blog/2013/06/15/3ds-max-in-vdi/","date":"2013-06-15 00:00:00 +0800","categories":["memo"],"body":"使用沃帆虚拟化软件–桌面版，在瘦客户端上运行的效果。 Using 3DMAX VM in virtfan virtualization engine "},{"title":"A light-weighted VM webadmin","url":"/blog/2013/06/18/light-weighted-vm-webadmin/","date":"2013-06-18 00:00:00 +0800","categories":["memo"],"body":"The infrastructure of it: Management: Based on django, communicate with Agent Agent: A daemon, used for communicating with Management and managing the VMs TO MAKE GREAT USE OF KVM. http://git.lofyer.org/cgit.cgi/fun/vm-webadmin/ "},{"title":"《想当厨子的生物学家是个好黑客》观感","url":"/blog/2013/06/23/bio-hack/","date":"2013-06-23 00:00:00 +0800","categories":["生活杂记"],"body":"流白。 买这本书的初衷是希望从中获得一些技能或者方法，以及了解现代DIY生物的发展，可看完后不免有些失望 。 译者水平有待提高，编辑内容稍微逊色。 可也不是没收获，至少知道了世界上还有一群人再为人类科技文明在默默奉献，尽管来自外界的阻力很大；也了解了如何打开生物DIY的大门(在设备方面)； 阻力也可能是好的，鉴于伦理和道德因素，以及技术垄断，对策才会涌现，当然，对一些人来说这也是为什么它如此有趣。 "},{"title":"Leap Motion Relative","url":"/blog/2013/07/06/leap-motion-relative/","date":"2013-07-06 00:00:00 +0800","categories":["leapmotion"],"body":"已经在官网注册并下载了sdk（windows、linux，我没Mac），设备不出意外下个月到。 等到了再更新文章，到时会更新sdk配置，与arduino交互的相关代码。 可控的目前想到了飞行器、机械手（夹持器 – -）。 "},{"title":"新世界 序章 流白","url":"/blog/2013/07/07/world-pre/","date":"2013-07-07 00:00:00 +0800","categories":["新世界"],"body":"散开的云烟，看不透倩人影 缘分至今，可有人来序兰亭 胡琴送曲隔江千万里，锦帛写乱了马蹄 "},{"title":"追逐梦想的医生","url":"/blog/2013/07/16/doc-dream/","date":"2013-07-16 00:00:00 +0800","categories":["新世界"],"body":"早晨醒来，口干舌燥，电话留言里有个熟悉的声音在哭诉，那是医生。作为挚友，他们在大学分开后几十年很少联系，偶尔在网上扯扯淡，很多好朋友都是如此。 医生说小玲快不行了，能从他的声音里听出他们爱的深沉。他这次请了几个好朋友到家里，因为小玲说要在走之前和大家再说说心里话。 翌日中午，赶到医生家，门口已经停了一辆福特小卡和宾利，应该是李然和老顾。进去过后，发现医生在洗菜，小玲和女儿还有他的两个叔叔在电视机前聊天 ，看到他进来，小玲说赶紧过来，说到毕业后参军的故事了。 二十年前的故事，即使不想说，可面对一个即将离去的人，能有什么开不了口么。 吃完饭后，他们驱车前往老顾在乡下的农庄，小玲告诉医生她走后一定要再找个女人好好去爱，要不这么好的男人浪费了，谈笑之余，也觉得有理。李然毕业后便带着家里的遗产去了英国，在那边结了两次婚，现在这个也几近边缘；老顾初中毕业后便跟人去GA-9-O星球殖民，多年滚打后，如今也算小有名气，但是对爱情什么的从不感冒；而他在各星系间穿梭了半生，影影绰绰爱上过几个女人，可结果总是以分手告终；唯有医生，毕业后便与小玲结了婚，在研究所干了几年后就出来在当地开了家私人诊所，并打算就这样过完一生。 晚饭后，小玲带着女儿回房间。医生说他做了一些实验，从十年前小玲被确诊便开始。医生领他们三个来到地下室，指着其中一个暗红色培养皿说，这就是十年的心血，小玲也同意了，下个星期就可以开始。医生是个保守的人，也是个很有原则的人，小玲相信他。 半年后，他从GA-1-I回来，去了趟医生家，敲了半天没人回应，从后门的窗户望进去，他瞬间脑袋空了。 他一脸惘然坐回车里，按动指纹开关，驱车向西。 "},{"title":"Openstack 配置及其API的简单使用","url":"/blog/2013/07/18/openstack-configure-and-api/","date":"2013-07-18 00:00:00 +0800","categories":["virtualization"],"body":"安装除Neutron（Quantum）以外所有东西 在开始之前，假设有三个NIC 禁用selinux，并修改网络配置/etc/sysconfig/network-scripts/ifcfg-ethX # Internal DEVICE=eth0 TYPE=Ethernet BOOTPROTO=static IPADDR=192.168.1.11 NETMASK=255.255.255.0 GATEWAY=192.168.1.1 DNS1=192.168.1.1 DEFROUTE=yes ONBOOT=yes # External DEVICE=eth1 TYPE=Ethernet BOOTPROTO=static IPADDR=192.168.1.12 NETMASK=255.255.255.0 DEFROUTE=yes ONBOOT=yes #Public Bridge DEVICE=eth2 TYPE=Ethernet BOOTPROTO=static IPADDR=192.168.1.13 NETMASK=255.255.255.0 DEFROUTE=yes ONBOOT=yes 于Feodra18中安装Openstack，可参考文档，按照这个来的话对Openstack的设计理念将会有所了解 Getting started with OpenStack on Fedora 18 或者运行 /*安装完成后管理员界面为http://localhost/dashboard用户名admin，密码secrete*/ # openstack-demo-install 以上两种方法把除了Neutron（quantum）其他的服务都配置好了，关于quantum的配置见文末 添加虚拟机实例 可参考文档 Getting started with OpenStack on Fedora 18 在终端操作之前需要设置环境变量，将它们两者之一写到一个文件，然后source一下 export OS_USERNAME=admin export OS_PASSWORD=secrete export OS_TENANT_NAME=admin export OS_AUTH_URL=http://127.0.0.1:5000/v2.0/ export ADMIN_TOKEN=$(openssl rand -hex 10) export SERVICE_ENDPOINT=http://127.0.0.1:35357/v2.0/ export SERVICE_TOKEN=\\$ADMIN_TOKEN source FileA 这个libvirt支持kvm以及xen虚拟化，所以支持的镜像也比较多，这里下载一个已经安装好的f17的qcow2镜像 # axel -n 5 http://berrange.fedorapeople.org/images/2012-11-15/f17-x86_64-openstack-sda.qcow2 /*注册镜像*/ # glance add name=f17-jeos is_public=true disk_format=qcow2 container_format=bare < f17-x86_64-openstack-sda.qcow2 然后以demo用户进入dashboard，会看到添加进来的image，根据image启动实例，打开vnc界面（非localhost访问要改ip）。 安装操蛋的Neutron（quantum）服务 这东西刚改名，nova自带的有network服务，可这个可以虚拟L2 L3 switch，那就比较有意思了 /*注册quantum*/ # keystone service-create --name quantum --type network --description 'OpenStack Networking Service' # keystone endpoint-create --region myregion --service-id 26a55b340e254ad5bb78c0b14391e153 --publicurl \"http://192.168.1.11:9696/\" --adminurl \"http://192.168.1.11:9696/\" --internalurl \"http://192.168.1.11:9696/\" /*(可选)添加quantum服务用户*/ get_id.sh: $ function get_id () { echo `\"$@\" | awk '/ id / { print $4 }'` } # ADMIN_ROLE=$(get_id keystone role-create --name=admin) # QUANTUM_USER=$(get_id keystone user-create --name=quantum --pass=\"servicepass\" --email=demo@example.com --tenant-id service) # keystone user-role-add --user_id $QUANTUM_USER --role_id $ADMIN_ROLE --tenant_id service /*服务插件二选一，linuxbrideg和openvswitch，这里使用后者，先安装插件*/ # yum install openstack-quantum-openvswitch /*启动并添加服务*/ # quantum-server-setup --plugin openvswitch # quantum-node-setup --plugin openvswitch # service quantum-server start # chkconfig quantum-server on # service openvswitch start # chkconfig openvswitch on # ovs-vsctl add-br br-int # chkconfig quantum-openvswitch-agent on # service quantum-openvswitch-agent start # quantum-dhcp-setup --plugin openvswitch # chkconfig quantum-dhcp-agent on # service quantum-dhcp-agent start # ovs-vsctl add-br br-ex # ovs-vsctl add-port br-ex eth1 # quantum-l3-setup --plugin openvswitch # chkconfig quantum-l3-agent on # service quantum-l3-agent start # chkconfig quantum-metadata-agent on # service quantum-metadata-agent start 修改并配置网络 /etc/sysconf/network-scripts/ifcfg-eth1，/etc/sysconf/network-scripts/ifcfg-br-ex # External DEVICE=eth1 TYPE=Ethernet BOOTPROTO=none NM_CONTROLLED=no BRIDGE=br-ex ONBOOT=yes #Public Bridge DEVICE=br-ex TYPE=Bridge BOOTPROTO=static IPADDR=192.168.2.11 NETMASK=255.255.255.0 NM_CONTROLLED=no ONBOOT=yes # ip addr del 10.0.0.9/24 dev eth1 # ip addr add 10.0.0.9/24 dev br-ex 这里类似VPN的重写HEADER echo 1 > /proc/sys/net/ipv4/conf/all/forwarding sysctl -w net.ipv4.ip_forward=1 iptables -A FORWARD -i eth0 -o br-ex -s 10.10.10.0/24 -m conntrack --ctstate NEW -j ACCEPT iptables -A FORWARD -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT iptables -A POSTROUTING -s 10.10.10.0/24 -t nat -j MASQUERADE 最后重启机器即可 通过curl使用openstack api 参考这篇文章 注意区分token和固定id "},{"title":"Gpu Passthrough in Xen","url":"/blog/2013/07/22/gpupassthrough-xen/","date":"2013-07-22 00:00:00 +0800","categories":["virtualization"],"body":"Considering that Xen’s gpu passthrough is about one year ahead of kvm, so let us try that. The process is something like kvm one as I wrote before. KVM GPU-Passthrough, VGA-Passthrough Result: I failed in trying passthrough the graphic card to Win7 or XP. Now I’m try some patchs and re-compile Xen with my graphic card bios.bin. HOST: CPU: i5-3470 GPU: ATI Radeon HD 7850 OS: openSuse 12.3 KDE 0. Disable Radeon Driver # echo \"blacklist radeon\" >> /etc/modprobe.d/modprobe.conf # mkinitrd 1. Install Xen-utils Install Xen and its utilities via Yast. 2. Modify grub.cfg ... echo 'Loading Xen 4.3.0_06-1.3 ...' multiboot /xen-4.3.0_06-1.3.gz placeholder iommu=1 echo 'Loading Linux 3.10.1-3.g0cd5432-xen ...' module /vmlinuz-3.10.1-3.g0cd5432-xen placeholder root=UUID=da6ac064-2a5e-48c7-8834-307cbcb551c3 ro resume=/dev/disk/by-id/ata-ST500DM002-1BD142_Z3THR3V3-part3 splash=silent quiet showopts xen-pciback.hide=(00:00.0)(01:00.1) echo 'Loading initial ramdisk ...' module /initrd-3.10.1-3.g0cd5432-xen ... Then reboot the host. 3. Bind the device Using Scripts File: bind_lib.sh #!/bin/bash # # License: GPLv2 # Author: Peter Maloney # # Script to bind devices to pciback (or pci-stub) find_new_id() { device=\"$1\" len=${#device} if [ \"$len\" -eq 12 ]; then device=\"${device:5:12}\" fi lspci -n | grep \"${device}\" | cut -d' ' -f3 | sed -r \"s/:/ /\" } bindstub() { device=\"$1\" echo \"binddevice $device\" if [ ! -e \"/sys/bus/pci/devices/$device\" ]; then echo \" ERROR: Device does not exist... cancelling\" return fi # with pci-stub, you do new_id, then unbind, then bind echo \"create new_id\" chmod +w /sys/bus/pci/drivers/pci-stub/new_id new_id=\"$(find_new_id \"$device\")\" echo \" echo \\\"$new_id\\\" > /sys/bus/pci/drivers/pci-stub/new_id\" echo \"$new_id\" > /sys/bus/pci/drivers/pci-stub/new_id echo \"unbind\" if [ ! -e \"/sys/bus/pci/devices/$device/driver\" ]; then echo \" no driver to unbind\" else chmod +w \"/sys/bus/pci/devices/${device}/driver/unbind\" echo \" echo -n \\\"$device\\\" > \\\"/sys/bus/pci/devices/$device/driver/unbind\\\"\" echo -n \"$device\" > \"/sys/bus/pci/devices/$device/driver/unbind\" fi echo \"bind\" chmod +w /sys/bus/pci/drivers/pci-stub/bind echo \" echo -n \\\"$device\\\" > /sys/bus/pci/drivers/pci-stub/bind\" echo -n \"$device\" > /sys/bus/pci/drivers/pci-stub/bind echo } bindback() { device=\"$1\" echo \"binddevice $device\" if [ ! -e \"/sys/bus/pci/devices/$device\" ]; then echo \"ERROR: Device does not exist... cancelling\" return fi # with pciback, you do unbind, then new_slot, then bind echo \"unbind\" if [ ! -e \"/sys/bus/pci/devices/$device/driver\" ]; then echo \" no driver to unbind\" else chmod +w \"/sys/bus/pci/devices/${device}/driver/unbind\" echo \" echo -n \\\"$device\\\" > \\\"/sys/bus/pci/devices/$device/driver/unbind\\\"\" echo -n \"$device\" > \"/sys/bus/pci/devices/$device/driver/unbind\" fi echo \"create new_slot\" chmod +w /sys/bus/pci/drivers/pciback/new_slot echo \" echo -n \\\"$device\\\" > /sys/bus/pci/drivers/pciback/new_slot\" echo -n \"$device\" > /sys/bus/pci/drivers/pciback/new_slot echo \"bind\" chmod +w /sys/bus/pci/drivers/pciback/bind echo \" echo -n \\\"$device\\\" > /sys/bus/pci/drivers/pciback/bind\" echo -n \"$device\" > /sys/bus/pci/drivers/pciback/bind echo } # source bind_lib.sh # modprobe xen-pciback # bindback \"0000:01:00.0\" # bindback \"0000:01:00.1\" Using xen-tools # xl pci-assignable-add 01:00.0 # xl pci-assignable-add 01:00.1 # xl pci-attach Domain-0 01:00.0 # xl pci-attach Domain-0 01:00.1 4. Create VM File: win7 name=\"win77\" description=\"None\" uuid=\"db64c1a6-1f84-4eff-48df-53c4b03b389e\" memory=2048 maxmem=2048 vcpus=4 on_poweroff=\"destroy\" on_reboot=\"destroy\" on_crash=\"destroy\" localtime=1 builder=\"hvm\" device_model=\"/usr/lib/xen/bin/qemu-dm\" kernel=\"/usr/lib/xen/boot/hvmloader\" boot=\"dc\" disk=[ 'file:/var/lib/xen/images/windowsvistax64/disk0.raw,hda,w','file:/home/lofyer/Driver.iso,hdc:cdrom,r' ] #vif=[ 'bridge=virbr0, mac=00:12:3e:6c:2f:02, model=rtl8139' ] stdvga=1 vnc=1 vnclisten=\"0.0.0.0\" vncconsole=0 #vncunused=1 soundhw=\"all\" monitor=1 viridian=1 sdl=0 #usb=1 acpi=1 apic=1 pae=1 #usbdevice='tablet' serial=\"pty\" # Add by lofyer device_model_version = \"qemu-xen-traditional\" gfx_passthru=0 pci_power_mgmt=1 xen_platform_pci=1 pci_msitranslate=1 hap=1 pci = [ '01:00.0' , '01:00.1' ] # xl create win7 # remote-viewer vnc://localhost:5900 Then you should see Windows boot logo in vnc for few seconds, after that it will switch to the second monitor that attached to your ATI card. gfx_gpupassthru As Xen wiki said: When you specify “gfx_passthru=1″ the passthru graphics card will be made the primary graphics card in the VM, and the Xen Qemu-dm emulated Cirrus graphics card is disabled. If you use “gfx_passthru=0″, or don’t have gfx_passthru= option at all, then the Xen Qemu-dm emulated Cirrus graphics card will be the primary in the VM, and the passthru graphics card will be secondary. So, alter gfx_passthru to 1. "},{"title":"openvswitch howto","url":"/blog/2013/07/25/openvswitch-howto/","date":"2013-07-25 00:00:00 +0800","categories":["networking"],"body":"Here, I use kernel-3.4.58. # emerge =net-misc/openvswitch-1.11.0 "},{"title":"LeapMotion 入手，晒一下开箱以及基本操作","url":"/blog/2013/07/28/leapmotion-%25e5%2585%25a5%25e6%2589%258b%25ef%25bc%258c%25e6%2599%2592%25e4%25b8%2580%25e4%25b8%258b%25e5%25bc%2580%25e7%25ae%25b1%25e4%25bb%25a5%25e5%258f%258a%25e5%259f%25ba%25e6%259c%25ac%25e6%2593%258d%25e4%25bd%259c/","date":"2013-07-28 00:00:00 +0800","categories":["leapmotion"],"body":"卖家太给力了，昨天就顺丰发货，今天下午我冒着炎炎烈日去取货，激动。。 先来张盒子，看着就感觉那帮老外工业设计功底深厚。 开箱：Leapmotion一台，数据线两根（一长一短），说明书一张 看着感觉好爽的样子~~~ 我拍的一段简单使用视频。 "},{"title":"Leapmotion 相关","url":"/blog/2013/08/02/leapmotion-relative/","date":"2013-08-02 00:00:00 +0800","categories":["leapmotion"],"body":"在Windows中 夹持器与四轴飞行器都是Arduino-Based，通信就用串口。 代码放在 git.lofyer.org 感觉VS好难。。试试在gentoo下驱动leapmotion 在Gentoo下使用，这个方式应该适用于所有非debian系 先下载sdk包，下载后解压。 看到里面有个deb的包，用alien转化为tar包 alien -t Leap-0.8.0-x64.deb tar xf leap-0.8.0.tgz cp -irf usr/* /usr/local/ cp -irf lib/udev/rules.d/25-com-leapmotion-leap.rules /etc/udev/rules.d 然后将普通用户加入plugdev组 sudo usermod -a -G plugdev $USER 刷新组关系，注销当前用户也可 exec su -l $USER 运行leapd与LeapControlPanel即可 在64位机器上缺少32位库文件 freetype.so.6, libasound.so.2 sudo emerge -avt app-emulation/emul-linux-x86-xlibs sudo emerge emul-linux-x86-soundlibs 实例：编译MotionVisualizer Make -C Builds/Linux "},{"title":"Csico C3550 Instances","url":"/blog/2013/08/05/csico-c3550-instances/","date":"2013-08-05 00:00:00 +0800","categories":["networking"],"body":"For details, see http://www.cisco.com/en/US/docs/switches/lan/catalyst3550/software/release/12.1_19_ea1/configuration/guide/SwCfgIX.html Assign IP on port 1 > enable # configure terminal (config)# interface f0/1 (config-if)# no switchport (config-if)# ip address 192.168.1.254 255.255.255.0 (config-if)# no shutdown (config-if)# end "},{"title":"油画：猫","url":"/blog/2013/08/17/paint-cat/","date":"2013-08-17 00:00:00 +0800","categories":["新世界"],"body":"高原，湖边，木屋。 伦敦事件已经过去十年整了，人们对它的记忆却犹如911一样深刻。他也花了将近十年去建造一个系统，一个建立在自然秩序之外的系统。所有从博物馆“凭空消失”的作品他都烧了，只在床前留下一幅十七世纪未名画家的油画：一只可爱的暹罗猫，从木盒子里小心翼翼的探出头，烛光落在它厚厚的前脚掌上。 事件后一个月，他有些心神不宁，花光了所有积蓄从全球各地的实验室偷购材料,从已成为科技先驱的google那取得了所有数据库访问权，甚至高价从“火星人海森”那购买N-12-82星球的文明碎片。工程准备完妥后，他就开始了梭罗一样的生活，每天早上陪牧民放牧，有时也会在湖边钓鱼，当然，没鱼钩；下午从牧民那吃完饭回来后，在二楼休息四个小时，便乘电梯到地下五层工作。 在地下一楼与地下二楼共一千二百平的空间里，整齐的排满了他喜爱的书籍，其中大部分都是用来每半年和别人交换。他打算系统启动之前将这些书都交给牧民，因为他不想冒险让这个世界永远忘却他。地下三楼和四楼的更大空间里，是满满的“Part of the World”，他称之为如此。地下六楼则承载着这栋建筑的动力源，从反应堆搭建到235提炼都是他在伦敦事件之前亲手完成。 他喜欢制作一些挂件，脖子上就带着一只饿死的雪豹的牙齿，上面刻了用“明天的记忆”书写的一个人名，他在小学时就发明了这套符号。那时候，他就喜欢“奇奇怪怪”的世界，以至于在日记里创造了一套完整的“异星人统治的史前时代”世界观，可是星际十字军压缩并吸收了他的村庄后，他便不愿去想这些了。 二十年来与十字军的战争从未停息，银河系方面因为科技落后于十字军五百年水平，所以已经有些沮丧而甘为人奴，至少已经有部分国家开始放弃抵抗哪怕是小撮十字军士兵的进攻了。十五年前在参与当地联盟军的一次反抗中，他又目睹了十字军的残忍————他是唯一生还者，代价是缺氧导致的左臂间歇性麻木。其后他领导了“伊恩”联盟军五年，在与十字军战斗的同时，偶尔也会参与一些所谓的“独立战争”。然后便消失了五年，直到十年前的伦敦事件。 他又在日记里写，不要忘记自己，因为还未远去，明天，我要再看一眼太阳。 "},{"title":"Compile Android Spice(aSpice)","url":"/blog/2013/09/02/ndk-compile-android-spiceaspice/","date":"2013-09-02 00:00:00 +0800","categories":["virtualization"],"body":"Ref: http://comments.gmane.org/gmane.comp.emulators.spice.devel/13944 OS: ubuntu 12.04 x86_64 1. You need download some packages at first. cerbero celt-0.5.1.tar.bz2 libjpegturbo openssl-1.0.1e 2. What can cerbero do? Just like Buildroot, cerbero can build an SDK from scratch for you. install $ git clone http://anongit.freedesktop.org/git/gstreamer-sdk/cerbero.git $ sudo python setup.py install $ cp data/* /usr/local/share/cerbero/data/ #In case of autobuild error cerbero bootstrap In my case, cerbero used ndk-android-r8e. essential packages celt-0.5.1.tar.bz2 openssl-1.0.1e (optional)libjpegturbo To build celt, we need source a file export NDK=/home/demo/cerbero/android-ndk-r8e export SYSROOT=${NDK}/platforms/android-9/arch-arm export CC=\"${NDK}/toolchains/arm-linux-androideabi-4.7/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --sysroot=${SYSROOT}\" export CFLAGS='-mfloat-abi=softfp' Save it as android.buildenv To build celt $ source android.buildenv $ ./configure --prefix=/home/demo/cerbero/dist/android_arm --enable-shared --enable-static --prefix=arm-linuxandroid-eabi $ make; sudo install To build openssl $ source android.buildenv $ ./config --prefix=/home/demo/cerbero/dist/android_arm --shared os/compiler:arm-linux $ make; make install 3. Build bVNC We need modify bVNC/jni/src/Android.mk to make ndk-build success. Add libffi.a to CROSSDIR Add –static to CFLAGS Alter bVNC/jni/Appication.mk and bVNC/AndroidManifest.xml from android-8 to android-9 BTW, we use FreeRDP with commit dbbb341. "},{"title":"kvm perfermance test, including periphery virtual device","url":"/blog/2013/09/14/kvm-perfermance-test-including-periphery-virtual-device/","date":"2013-09-14 00:00:00 +0800","categories":["memo"],"body":"I mean test , not profiling . To virtual server and virtual desktop, we should inspect them from different standards. For an server: response time, throughput, concurrent, utilization For and desktop: response time, video/audio latency, utilization Tools we can use to test CPU: SPEC(open, but not free) Unixbench Super PI Compile linux kernel pcmark(not open, not free, but cracked can be found..) ffmpeg convert graphic: 3dmark fs,hd: hdparm iozone blogbench dbench net: iperf dstat ifstatus ram ramspeed How to start Initial host env: i5-3470, 8G, gentoo-linux-3.11+, qemu-1.6.0 Kernel para: TBD "},{"title":"LeapMotion controlled X4","url":"/blog/2013/09/15/leapmotion-controlled-x4/","date":"2013-09-15 00:00:00 +0800","categories":["arduino 2560","leapmotion","raspberrypi","workshop"],"body":"两者都入手已经一个月了，可平时有些忙（惰者多忙），也就只零零散散准备了一些资料，还没开始整合。 整个流程大概是这个我用文字描述的粗略的样子： 空间建模：获取飞行器初始坐标，与leapmotion的可视区域进行map。 一级控制：leapmotion获得的手掌运动信息（可预处理）进入arduino通过nfr2401发送给X4，进行粗略运动指令传达。 二级控制：根据摄像头采集的飞行器位置数据与手掌位置信息对比，进行二阶指令传达。 回馈控制：在二级控制的基础上进行微调。 错误返回：如果超出leapmotion可视范围，则进行回馈控制将X4返回初始位置（0,0,0），超出摄像头范围，则需。。。人工重置。 "},{"title":"论身体的重要性","url":"/blog/2013/09/19/importance-body/","date":"2013-09-19 00:00:00 +0800","categories":["生活杂记"],"body":"高二的时候买了系列的哲学小本，里面有个叫做《自由意志》的册子，已经忘了作者是谁。因为当时正好读过歌德的谈话录，所以在阅读《自由意志》的过程中总会想到歌德口中的“精灵”，再后来通过“蝴蝶效应”结识了“混沌”，一直觉得它们是同一个东西，至少于意识。 我要表述的也是这个问题，许多试验已经表明意识确实能对身体产生物理的影响，而现在所谓的交际原则中也认为身体不经意的动作可以反应出这个人性格的某一面。 高僧说一副皮囊，他们的话不无道理，大家的身体结构基本相同，骨骼清奇的已经被烧死或者扔进黑暗（参考雾都孤儿里的那个“怪物”，剑风传奇里更多了），皮囊所包裹的是身体与意识。原生动物有意识么，非条件反射应该算吧。一只猫的皮囊包裹下的是精巧的身体以及难以去体验的意识系统（听说已经有科学家可以做到“体验”别人的意识了），假设抽去这身体，我们残忍地把皮囊留下，你应该会看到什么？ 扁桃体炎，我刚经历过教科书式的“3-5天低寒高热”，接下来是让炎症消下去的日子了。 "},{"title":"use Foreman/Nagios/Icinga to make life easy&#8230;","url":"/blog/2013/09/24/nagiosicinga-event-handler-life-easy/","date":"2013-09-24 00:00:00 +0800","categories":["linux admin"],"body":"Install nagios in Gentoo/CentOS Gentoo # emerge nagios Option: recompile apache for php support add use flag “apache2″ to /etc/portage/make.conf # emerge --ask --changed-use --deep @world Copy following content to /etc/apache2/vhosts.d/ ScriptAlias /nagios/cgi-bin \"/usr/lib64/nagios/cgi-bin\" <Directory \"/usr/lib64/nagios/cgi-bin\"> # SSLRequireSSL Options ExecCGI AllowOverride None Order allow,deny Allow from all # Order deny,allow # Deny from all # Allow from 127.0.0.1 AuthName \"Nagios Access\" AuthType Basic AuthUserFile /etc/nagios/auth.users Require valid-user Alias /nagios \"/usr/share/nagios/htdocs\" <Directory \"/usr/share/nagios/htdocs\"> # SSLRequireSSL Options None AllowOverride None Order allow,deny Allow from all # Order deny,allow # Deny from all # Allow from 127.0.0.1 AuthName \"Nagios Access\" AuthType Basic AuthUserFile /etc/nagios/auth.users Require nagiosadmin Create password for nagiosadmin # htpasswd2 -c /etc/nagios/auth.users nagiosadmin Add NAGIOS to apache config /etc/conf.d/apache APACHE2_OPTS=\"... -D NAGIOS -D PHP5\" Add user nagios to apache group # usermod -a -G nagios apache Start service # rc-service nagios restart # rc-service apache2 restart CentOS # yum install \"nagios*\" # htpasswd -c /etc/nagios/passwd admin # chkconfig nagios on # chkconfig httpd on # service nagios start # service httpd start Add routers/hosts, add service, add hooks Intergrate with oVirt using Foreman Install USE Intergrate with oVirt TBD "},{"title":"Add usbdevice to libvirt by modifying cgroup","url":"/blog/2013/10/31/add-usbdevice-libvirt-modifying-cgroup/","date":"2013-10-31 00:00:00 +0800","categories":["virtualization"],"body":"CGROUP means Control group. In my case, usb-redir works fine while usb-host not. https://www.kernel.org/doc/Documentation/cgroups/devices.txt Just do it # sed -i 's/devices /#devices /' # reboot Add fine control list Review the rules to libvirt, and leave all the character device to it # cgget libvirt To remove \"c\" device # echo c > /sys/fs/cgroup/libvirt/devices.deny To add all the \"c\" devices # echo \"c *:* rwm\" > /sys/fs/cgroup/libvirt/devices.allow devices.deny/allow is something like end-point. About hierarchy A child will not have more permission than its parent. "},{"title":"Projects to be done recently.","url":"/blog/2013/10/31/project-recently/","date":"2013-10-31 00:00:00 +0800","categories":["memo","workshop"],"body":"robohand http://git.lofyer.org/cgit.cgi/fun/robohand.git/ leapmotion&X4 OK, I’ve collected some components of it. To be reconstructed. "},{"title":"how to lock/unlock/root nexus 5","url":"/blog/2013/11/16/lockunlockroot-nexus-5/","date":"2013-11-16 00:00:00 +0800","categories":["device hack"],"body":"今日入手Nexus5美版（D820） blahblahblah… 好吧，开始unlock以及root 先下载这个包，里面包含CM的镜像，unlock/lock的apk http://cloud.lofyer.org/public.php?service=files&t=af14640b4f32d2e491d80a117db2bbe9 下载完成后，同时按住音量上下键再按开机，进入bootloader的前奏（相当于bios选项），此时电脑上应该会有所表示（比如windows的弹出要安装驱动啦，没驱动下个sdk搜索一下，比如linux的dmesg啦） 解压下载的文件，运行里面的root-$YOUROS（win、mac、linux）脚本，然后你看到请求unlock的选项，选择unlock并按电源键确认，此时pc上的脚本也会让你下一步； 下一步就是出现红色的机器人，说正在写脚本以及镜像，在写的时候pc上的脚本再下一步就可以自动让它退出了，然后稍等几分钟让它重启，重启的时候你会看到google标志下面的锁标志。 出于莫名其妙的安全感，在root以后可以安装压缩包里面的apk文件将bootloader再次锁上，这样，就这样。 "},{"title":"Unix/Linux/MacOS Monitor Tools","url":"/blog/2013/11/29/unixlinuxmacos-monitor-tools/","date":"2013-11-29 00:00:00 +0800","categories":["linux admin"],"body":"System Web munin Nagios Icinga foreman monit monitorix Suricata Network Web ntop cacti Terminal ifstatus dstat iftop tcpdump netstat iptraf vnstat Cpu/Memory Terminal top htop vmstat pmap IO Terminal iotop iostat "},{"title":"无主之地","url":"/blog/2013/12/02/lord-land/","date":"2013-12-02 00:00:00 +0800","categories":["新世界"],"body":"已经是一片沙子吞噬的废墟中，走过一列驼队，他们看起来像几个世纪之前的人。 在战争之前，这片地方是个纪念馆，纪念第六次世界大战中死去的人类。如今E3星系的人已经在地下安家，地球自转和公转周期都被调成了与他们家乡一致，也就是说，在太阳落山之前，驼队还有大概三百六十个小时的旧制时间赶到传教士居所而没有E3人来阻碍，当然，机器人不算。 地球的再次毁灭淘汰了地表以及地下百分之九十九的人类，剩下的一批大多数是一千年前志愿基因改造的后裔。可是，人类仍然好战。残余的人类各自结盟，形成红派和黑派两大阵营，其中红派利用E3人的科技，在第十二次世界大战中完胜了黑派。但是E3做事总是留一手，他们在所有的设施中都嵌入沉睡的机械生命体，在大战结束后的一个星期时间内逐渐苏醒，并控制了地球。红派不得不移居至其他星球，分散在各个星系，留守下来的人类躲避着E3人的视线生存。 大约一个星期后，驼队到达了传教士居所，他们在太阳风暴那天逃过雷达进入撒哈拉，来到昔日古文明碎片最大发掘地。E3人对所谓的古文明并不感兴趣，他们否认经验的重要性，认为真理本就在那。 "},{"title":"MyIDC&#8211;Everything&#8217;s traceable","url":"/blog/2013/12/11/myidc-everythings-traceable/","date":"2013-12-11 00:00:00 +0800","categories":["workshop"],"body":"相关手册参考 MyIDC_Book 细节索引： gluster hadoop(with ARM as an option) drbd/heartbeat foreman/puppet nagios ovirt openstack owncloud asterisk 配置细节参考： MyIDC Source Infrastructure: Board： x86小板 SBSA小板 Cabinet： 亚克力自制 网络： 电信拨号接入外网 SDN 资源分配： 高可用监视与控制服务（os1-2） 高可用存储(os3-n) 并行计算（os3-n） 高可用虚拟机服务（os1/2+os3-n） 独立外设接入设备 安全： 证书认证（在量子计算机面向大众之前这个还是很靠谱的） 应用商店： 社会工程学测试 leapmotion控制插件 语音控制插件 手机控制插件 "},{"title":"eZ430-Chronos入手","url":"/blog/2013/12/16/ez430-chronos%25e5%2585%25a5%25e6%2589%258b/","date":"2013-12-16 00:00:00 +0800","categories":["ez430-chronos"],"body":" 入手的是433Mhz，相当于国际版。 关于官方介绍可至 eZ430-chronos 查阅。 下载Control Center for Windows 下载Control Center for Linux 然后将toolkit的USBRF插入PC，选择控制台中的ACC标签并“start ap，腕表选择“#”号键至ACC，再按下键即可于控制台中显示加速度传感器数值。 同样PPT为按键映射，SYNC为时间设置，TFBSL尚未使用。 编程 TBD "},{"title":"他们都不见了","url":"/blog/2013/12/16/they-are-all-gone/","date":"2013-12-16 00:00:00 +0800","categories":["新世界"],"body":"我是一个只会流浪的瞎子 游荡在拥挤着灵魂的房间里 这里很吵闹，但于我来说并不讨厌 哇哇的孩子贴上母亲的乳房后便不再吵闹 伤心的女儿埋头伏在父亲胸前泣诉不会归来的人 犹豫的铁匠靠着窗户，喃喃低语着什么 我忽然觉的不知所措 尽管我是瞎子 我还是能感受到别人的眼神 我昂起头 离开了座位 忽然想去找寻一份安静 因为路上没有什么障碍 我可以放心的迈出脚步 直到我听见后面仓促的呼吸 是什么呢 是蒙着面的哥布林强盗 还是越狱的杀人犯？ 我从走变成了小跑 从小跑变成了狂奔 我宁可不回头 我脚下一空失去重心 想去用手支地 可怎也够不着 就这样我就来到了这里 我觉的快乐就是这样 而恰巧这里的一切都有我需要的意义存在 那一天这里来了另外一个人 他说他也是个瞎子 我从来不曾看见的人啊 你身上链锁当当 我不相信你是个罪人 我也和你一样沉浸在自由中 我觉得 我认为 他们也说 你说其实再往前走就可以找寻久违的光明 可我只是听说光明很温暖 恰如我现在所拥有的自由 我待的久了 便渴望走向下一个地方 我不该停下的脚步 天寒 略显诡异的空气没有安宁废旧城市的居民 倒下的灯塔下满是触礁者的残骸 我不清楚这是怎么一种状态 可是我知道有些决定会影响到北极熊孩子的寿命 我想这便是这个世界本该有的状态 你的脚步声临近 像预言中一样 我从此跟随 人间的战争曾经让无辜的人失去他们珍惜的 但这些都不可避免 所以我说你有天赐的怜悯 我仿佛丢失了不该丢失的指环 你赠予我玫瑰的下午 我不知道要怎么做 你俯首 收下你谦卑的诚意 我屁颠屁颠的很乐意 这个时候应该停下来 因为天气很好 我有时会太过忙碌而没有静心享受这世界给我准备的礼物 如果我记得 我是可以进入你的世界 一个围绕我转动的星球上 只有春秋 可是 我也喜欢夏冬风景 虽然我看不见 但我能体验到这两个界线明显 阴雨天气 略有泥泞的路上 或者些许惆怅 不曾迷路的瞎子 "},{"title":"Create a dummy VGA adpter","url":"/blog/2013/12/19/create-dummy-vga-adpter/","date":"2013-12-19 00:00:00 +0800","categories":["device hack"],"body":"创建一个“虚拟”显示适配器，适用于那些“你知道你想干什么并且在干什么”的人。 原文参考 http://www.geeks3d.com/20091230/vga-hack-how-to-make-a-vga-dummy-plug/ http://blog.zorinaq.com/?e=11 手头有两块ATI显卡，而且都有这个DVI-I接口，并且目前我的状况是两个显示器都接到了两个主板显示（集显）接口。 原文说需要一个75欧姆的电阻，我手里暂时只有100欧姆的，而且不多，如果强烈按照原作者的意思的话效果可能会有所不同，参考现有任意款VGA控制器原理。 [连接示意图] 来自第一个链接 [效果图] 请无视我的背景，如果有人好奇的话，那是上篇文章的eZ430以及一包十块白沙。 [结果] 看见第3个显示器没？ 就是它了，你可以拿它做很多事，比如你有多块显卡，并且你想充分利用其性能，参考lucid mvp，效果上类似吧。 "},{"title":"Slic for qemu-kvm","url":"/blog/2013/12/25/slic-for-qemu-kvm/","date":"2013-12-25 00:00:00 +0800","categories":["virtualization"],"body":"This article is a howto for activation-ready of Windows. SLIC 2.0 is for 2003 & XP, and 2.1 for Win7 & 2008 Original seabios reads slic table from exactly the host. However, if your motherboard(not OEM) happen to own none, you will most probably make one by your self. Seabios You could get the lastest code from here. git clone git://git.seabios.org/seabios.git seabios Or, you can download from here. seabios-1.7.2.2.tar.gz SLIC-BIN Here’s a collection of various slic table. SLIC 2.1 BINS Seaslic patch This is patch for seabios to make it slic table enabled. Download from here. Seaslic.tar.xz, seabios-1.7.2 compatible Here’s the patch content. --- a/src/acpi.c 2013-01-19 06:44:54.000000000 +0600 +++ b/src/acpi.c 2013-05-07 01:16:30.000000000 +0600 @@ -214,6 +214,11 @@ #include \"acpi-dsdt.hex\" +#define CONFIG_OEM_SLIC +#ifdef CONFIG_OEM_SLIC +#include \"acpi-slic.hex\" +#endif + static void build_header(struct acpi_table_header *h, u32 sig, int len, u8 rev) { @@ -226,6 +231,10 @@ h->oem_revision = cpu_to_le32(1); memcpy(h->asl_compiler_id, CONFIG_APPNAME4, 4); h->asl_compiler_revision = cpu_to_le32(1); + #ifdef CONFIG_OEM_SLIC + if (sig == RSDT_SIGNATURE) // only RSDT is checked by win7 & vista + memcpy(h->oem_id, ((struct acpi_table_header*)SLIC)->oem_id, 14); + #endif h->checksum -= checksum(h, len); } @@ -827,6 +836,15 @@ ACPI_INIT_TABLE(build_srat()); if (pci->device == PCI_DEVICE_ID_INTEL_ICH9_LPC) ACPI_INIT_TABLE(build_mcfg_q35()); + #ifdef CONFIG_OEM_SLIC + void *buf = malloc_high(sizeof(SLIC)); + if (!buf) + warn_noalloc(); + else { + memcpy(buf, SLIC, sizeof(SLIC)); + ACPI_INIT_TABLE(buf); + } + #endif u16 i, external_tables = qemu_cfg_acpi_additional_tables(); Compile You don’t have to apply the seaslic patch with patch.sh, you can do that by hand. Before you start, do this: xxd -i /sys/firmware/acpi/tables/SLIC | grep -v len | sed 's/unsigned ch ar.*/static char SLIC[] = {/' > seabios.submodule/src/acpi-slic.hex Or, xxd -i DELL.BIN | grep -v len | sed 's/unsigned ch ar.*/static char SLIC[] = {/' > seabios.submodule/src/acpi-slic.hex After applying the patch, you can compile the bios.bin, and copy that to /usr/share/qemu-kvm/my-bios.bin or rewrite bios.bin instead. Here’s my bios.bin with Dell[DELL-QA09-NVDA]2.1.BIN from SLIC BIN my-bin.tar.xz Qemu-cmd qemu-kvm XXX -bios /usr/share/qemu-kvm/my-bios.bin -acpitable file=Dell[DELL-QA09-NVDA]2.1.BIN In the guest, you could see that SLIC by /sys/firmware/acpi/tables/SLIC in Linux or SLIC_Toolkit in Windows. "},{"title":"Heartbeat and drbd test high availability","url":"/blog/2014/01/16/heartbeat-drbd-test-high-availability/","date":"2014-01-16 00:00:00 +0800","categories":["linux admin"],"body":"Here’s original article: http://wiki.weithenn.org/cgi-bin/wiki.pl?HA-DRBD_Heartbeat_%E5%BB%BA%E7%BD%AE_MySQL_%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7 Hosts: 192.168.1.101 ha1.lofyer.org, 2 hard drive disks 192.168.1.103 ha2.lofyer.org, 2 hard drive disks Server host, this is the IP of heartbeat service: 192.168.1.100 Install The repos you need in centos [epel] name=Extra Packages for Enterprise Linux 6 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch failovermethod=priority enabled=1 gpgcheck=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6 [elrepo] name=ELRepo.org Community Enterprise Linux Repository - el6 baseurl=http://elrepo.org/linux/elrepo/el6/$basearch/ mirrorlist=http://elrepo.org/mirrors-elrepo.el6 enabled=1 gpgcheck=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-elrepo.org protect=0 # yum install drbd84 kmod-drbd84 heartbeat mysql-server Setup 1. Drbd configuration both hosts Add following content to file: /etc/hosts 192.168.1.101 ha1.lofyer.org 192.168.1.103 ha2.lofyer.org Disable selinux and iptables # sed -i 's/enforcing/permissive/' /etc/selinux/config # setenforce 0 # iptables -F # service iptables save Prepare the disk partion # fdisk /dev/sdb << EOF n p 1 w EOF Configuration for mysql # mkdir db # sed -i ’s/datadir=\\/var\\/lib\\/mysql/datadir=\\/db/‘ /etc/my.cnf Configuration for drbd file: /etc/drbd.conf global { minor-count 64; usage-count yes; } common { syncer { rate 1000M; } } resource ha { protocol C; handlers { pri-on-incon-degr \"/usr/lib/drbd/notify-pri-on-incon-degr.sh; /usr/lib/drbd/notify-emergency-reboot.sh; echo b > /proc/sysrq-trigger ; reboot -f\"; pri-lost-after-sb \"/usr/lib/drbd/notify-pri-lost-after-sb.sh; /usr/lib/drbd/notify-emergency-reboot.sh; echo b > /proc/sysrq-trigger ; reboot -f\"; local-io-error \"/usr/lib/drbd/notify-local-io-error.sh; /usr/lib/drbd/notify-emergency-shutdown.sh; echo o > /proc/sysrq-trigger ; halt -f\"; fence-peer \"/usr/lib/heartbeat/drbd-peer-outdater -t 5\"; pri-lost \"/usr/lib/drbd/notify-pri-lost.sh; /usr/lib/drbd/notify-emergency-reboot.sh; echo b > /proc/sysrq-trigger ; reboot -f\"; split-brain \"/usr/lib/drbd/notify-split-brain.sh root\"; out-of-sync \"/usr/lib/drbd/notify-out-of-sync.sh root\"; } startup { wfc-timeout 60; degr-wfc-timeout 120; outdated-wfc-timeout 2; } disk { on-io-error detach; fencing resource-only; } syncer { rate 1000M; } on ha1.lofyer.org { device /dev/drbd0; disk /dev/sdb1; address 192.168.1.101:7788; meta-disk internal; } on ha2.lofyer.org { device /dev/drbd0; disk /dev/sdb1; address 192.168.1.103:7788; meta-disk internal; } } Chmod for drbd # chgrp haclient /sbin/drbdsetup # chmod o-x /sbin/drbdsetup # chmod u+s /sbin/drbdsetup # chgrp haclient /sbin/drbdmeta # chmod o-x /sbin/drbdmeta # chmod u+s /sbin/drbdmeta Resource for drbd # modprobe drbd # dd if=/dev/zero of=/dev/hdb1 bs=1M count=100 # drbdadm create-md ha # service drbd start # chkconfig drbd on Watch drbd status # watch -n 1 service drbd status You can see that both hosts are Secondary/Secondary. 2. Drbd configuration on one of hosts, like ha1 Make ha1 Primary # drbdadm -- --overwrite-data-of-peer primary ha # service drbd status Then you should see Primary and wait for both hosts are UpToDate. Initialization for Mysql Make a # mkfs.ext4 /dev/drbd0 # mount /dev/drbd0 /db # service mysqld start Now you should see what you have got in /db, then umount /db, stop mysql-server and make ha1 Secondary. # service mysqld stop # umount /dev/drbd0 # drbdadm secondary ha 3. Heartbeat configuration on both hosts YOU SHOULD MODIFY THE IP IN THE FILE. file: /etc/ha.d/ha.cf debugfile /var/log/ha-debug logfile /var/log/ha-log logfacility local0 autojoin none ucast eth0 192.168.1.101 # IP of another host ping 192.168.1.1 respawn hacluster /usr/lib64/heartbeat/ipfail respawn hacluster /usr/lib64/heartbeat/dopd apiauth dopd gid=haclient uid=hacluster udpport 694 warntime 5 deadtime 15 initdead 60 keepalive 2 node node1.weithenn.org node node2.weithenn.org auto_failback off The service will be serve on IP 192.168.1.100. file: /etc/ha.d/haresources ha1.lofyer.org 192.168.1.100 drbddisk::ha Filesystem::/dev/drbd0::/db::ext4 mysql authkeys #( echo -ne \"auth 1\\n1 sha1 \"; dd if=/dev/urandom bs=512 count=1 | openssl md5) > /etc/ha.d/authkeys #cat /etc/ha.d/authkeys auth 1 1 sha1 71461fc5e160d7846c2f4b524f952128 #chmod 600 /etc/ha.d/authkeys #scp /etc/ha.d/authkeys node2:/etc/ha.d/ Add mysql entry to heartbeat file: /etc/ha.d/resource.d/mysql #!/bin/bash . /etc/ha.d/shellfuncs case \"$1\" in start) res=`/etc/init.d/mysqld start` ret=$? ha_log $res exit $ret ;; stop) res=`/etc/init.d/mysqld stop` ret=$? ha_log $res exit $ret ;; status) if [[ `ps -ef | grep '[m]ysqld'` > 1 ]]; then echo \"running\" else echo \"stopped\" fi ;; *) echo \"Usage: mysqld {start|stop|status}\" exit 1 ;; esac exit 0 Add excute permission to it. # chmod 755 /etc/ha.d/resource.d/mysql Add heartbeat service to system # chkconfig --add heartbeat # chkconfig heartbeat on # service heartbeat start *You may need modify order of drbd and heartbeat service. In /etc/init.d/, the number 85 and 15 represent the order number which the script is to be run at start up time and shutdown time. # chkconfig: – 85 15 * Test HA On host running mysql service 1 # service heartbeat restart "},{"title":"2013-2014","url":"/blog/2014/01/20/2013-2014/","date":"2014-01-20 00:00:00 +0800","categories":["生活杂记"],"body":"今年已经24岁了，从一个普通人生的轨迹来看，这些年应该还能接受。 2013年，成长了些，在这要感谢敖总辛苦栽培。 关于互联网行业，应该是爆发的节奏的才对，要厚积。 关于科技行业，小米这类公司看的很准，下手也是外科手术式的准。 KP我觉得还是随身带着吧，手机少看些，因为形势至少还在意料内，每天耽误时间从中间甄别出可用信息的机会成本至少就目前来说有些高，不如直接获取知识来的实在。 那么就2014，就列出来一些清单吧。 1. 在新年期间把MyIDC建设以及对应手册完成。 2. 掌握CLisp的常用特性。 3. 学习一些WPF编程。 4. 掌握法语基本语法，基本句式。 5. 入门无线电，考取A类执照。 6. 保持每天的锻炼。 7. 以上计划随工作重点可能有变。 8. 订婚（配图）。 就是这个妹子，希望手牵手走到岁月之末。 "},{"title":"Deploy Asterisk on CentOS","url":"/blog/2014/02/10/deploy-asterisk-centos/","date":"2014-02-10 00:00:00 +0800","categories":["im-pbx"],"body":"Get the latest packages. up to 2014-02-10 # rpm -Uvh http://packages.asterisk.org/centos/6/current/x86_64/RPMS/asterisknow-version-3.0.1-2_centos6.noarch.rpm # yum install asterisk asterisk-configs --enablerepo=asterisk-12 # yum install dahdi-linux dahdi-tools libpri # chkconfig dahdi on # chkconfig asterisk on # service dahdi start # service asterisk start You can use freepbx on http://localhost . # yum install freepbx "},{"title":"foreman/puppet/cfengine/bcfg2/chef howto","url":"/blog/2014/02/21/foremanpuppetcfenginebcfg2chef-howto/","date":"2014-02-21 00:00:00 +0800","categories":["networking"],"body":"Which one is the best automatic management tool TBD "},{"title":"Setup dns, router and switch","url":"/blog/2014/02/25/setup-zebra-ripd/","date":"2014-02-25 00:00:00 +0800","categories":["networking"],"body":"dns forward dns router TBD "},{"title":"use MAXS to control your device via ejabberd(plus ssh, jingle voice talk as a bonus)","url":"/blog/2014/02/26/ejabber-howto/","date":"2014-02-26 00:00:00 +0800","categories":["im-pbx"],"body":"Let’s see what we have got here: A xmpp server based on ejabberd on my host: lofyer.org. Windows client: Jitsi(Recommended) , Pidgin . (Optional)A Android client: Xabber. MAXS on my Nexus 5 Android phone. 1. Prepare the server(Debian 7) # apt-get install ejabberd # cd /etc/ejabberd/; wget http://people.collabora.com/~robot101/olpc-ejabberd/ejabberd.cfg Change hosts and admin section to your FQDN . Here’s a example: {hosts, [\"lofyer.org\"]}. {acl, admin, {user, \"mypassword\", \"lofyer.org\"}}. Then you should restart ejabberd, and maybe a reboot is essential. # /etc/init.d/ejabberd restart Enable Jingle(voice and video) You need JingleNodes module on your server. # apt-get install erlang-tools # git clone git://git.process-one.net/exmpp/mainline.git exmpp # cd exmpp; ./configure; make; make install # svn checkout http://jinglenodes.googlecode.com/svn/ jinglenodes # cd jinglenodes; ./configure --prefix=/usr/; make; make install Add following content to your ejabberd.cfg in the modules section. {mod_jinglenodes, [ {host, \"jinglenodes.@HOST@\"}, {public_ip, \"192.168.1.148\"}, {purge_period, 5000}, {relay_timeout, 60000} ]}, Enable web register(optional) Add to ejabberd.cfg, ‘modules’ section the basic configuration: {modules, [ ... {mod_register_web, []}, ... ]}. In the ‘listen’ section enable the web page: {listen, [ ... {5281, ejabberd_http, [ tls, {certfile, \"/etc/ejabberd/ejabberd.pem\"}, {request_handlers, [ {[\"register\"], mod_register_web} ]} ]}, ... ]}. Use your own certificate openssl req -new -x509 -newkey rsa:1024 -days 3650 -keyout privkey.pem -out server.pem openssl rsa -in privkey.pem -out privkey.pem cat privkey.pem >> server.pem rm privkey.pem The port numbers you should open are: 5281( http://localhost:5281/register/ ) 5280( http://localhost:5280/admin ) and 5222(for c2s). Register users: # ejabberdctl register admin lofyer.org mypassword # ejabberdctl register myphone lofyer.org mypassword # ejabberdctl register mypc lofyer.org mypassword 2. Pidgin and MAXS test Pidgin: admin@lofyer.org MAXS: myphone@lofyer.org By the way, guarantee that there is only one running jabber client on your phone during this period. Pidgin Add a friend Shell test SMS test And a msg to my GF. "},{"title":"-1. 为什么我的序号那么奇葩","url":"/blog/2014/03/20/cloud-minus-1-pre/","date":"2014-03-20 00:00:00 +0800","categories":["云端日记"],"body":"好的，本文作为未来几十或者上百篇系列文章的第一篇，就不负众望地来个开场白吧： 序号为0的那篇注定作为系列文章（姑且称之为“书”吧）的序言了，但是又不好意思当-0，就-1吧，跟大家随便聊聊。 从07年那会儿，甚至更早，拥有千万用户（包括盗版受害者在内）的行业先锋VMware，又有Google数据中心以及Amazon各种在线服务，这些实打实的东西遵循计算能力的摩尔定律，再顺应日益增长的商业需求，就有了“云”和“大数据”这两个让许多企业再次躁动的概念。 稍微有些行业经验（至少以为是或者看来是）的人觉得这俩只是个噱头；搞大型机的说，嗯，这个，呵呵；搞IDC的觉得一台机器现在当二十台甚至更多卖，不错；搞互联网服务的就有些挠头，咦，这啥？噢，就那玩意儿啊，干嘛起这名？ 不管大家都怎么看吧，先引用一句关于“大数据”的经典： “Big Data is like teenage sex: everyone talks about it, nobody really knows how to do it, everyone thinks everyone else is doing it, so everyone claims they are doing it.” 有时，你我或许都会有迷惘，我这么做（说），对么？ 那就这样吧， 但行好事，莫问前程 。 顺便提一下，本“书”对读者的要求是： 1.没阅读障碍；2.能提出尽量没有偏见的问题。 "},{"title":"0. 今天天气怎么样？","url":"/blog/2014/03/21/cloud-0-how-is-today/","date":"2014-03-21 00:00:00 +0800","categories":["云端日记"],"body":"7:50 手机闹铃响了，随之而来的是你订阅的RSS、Flipboard推送的新闻。随手翻阅下，完后Siri说今天天气挺暖和的，可以穿你最喜欢的高领毛衣，起床。 8:30 高速公路上，地图告诉你前方拥堵，正好这时领导打来电话，你告诉Siri说“接听”。挂了电话以后，红灯亮了，汽车记录下你这次堵车的时间，并默默再次计算预计到时。 9:20 到达公司门口，没有保安，取而代之的是连接公司LDAP服务器的瞳孔识别。 10:00 收到信息，来自楼下快件派发柜，你订购的球鞋到了。 10:30 客户预约的拜访，你告诉Siri说把公司地址导航路线发送给客户张三。 11:10 通过公司IM告诉前台临时允许车牌号为K9031的车辆进来并发送车位信息给客户。 11:20 和客户在临时会客厅谈话，期间你把演说内容通过手势（食指一划）推送到客户邮箱，他们感到很意外（ 加分点 ）。 12:30 午餐时间，Siri还记得你在决心减肥期间，提醒你不要吃最喜欢的红烧肉，末了来一句“两个人被老虎追，谁最危险？Bingo，胖的那个”。 14:30 有客户如约送来了10T的财务数据，你通知技术部小李对这些数据进行方案II处理，百分之30的处理任务交给武汉机房的机器，因为这些从机柜到主板都是你依照节能环保的原则主持设计的。 16:00 Siri告诉你，抱歉，六点钟有局部降雨。 17:00 你把今天的备忘录存进公司派发给你的虚拟桌面，下班。 19:00 老婆大人的晚饭做好了，你也再次连上虚拟桌面把备忘录整理归档。 20:30 跑步结束，它告诉你这几周换季期间，要增加运动量，你说“可以”。 23:00 休息，Siri通过文字悄悄告诉你，明天结婚纪念日，记住。 所有已知未知的暗流，让人有了继续折腾下去的欲望。 我是一个着重实践的人，是的，比如磁盘不拆开的话我可能就对扇区、磁道、柱面没什么深刻概念（拆了也就有助于理解驱动，见下图）。所以，这一些列文章将尽量从操作或者现象中总结规律。一些原理性的东西会尽量用我觉得容易理解的形式表现出来。 整本“书”的结构将会是这个样子： 介绍下主流“云”的现状，会引用许多现成（尽量）客观的信息片段； 畅想一下 ；从中选择部分组成一个完整系统，进行搭建（或模拟）并本地调优（避免过早优化）；避免烂尾，结尾送两首短诗吧。 "},{"title":"1. 众说纷纭","url":"/blog/2014/03/24/cloud-1-nowaday/","date":"2014-03-24 00:00:00 +0800","categories":["云端日记"],"body":"作为公司的一名小小员工，从客户交流到现场部署、从SDN交换机到Neutron、从QEMU到IAAS，我都有过了解或接触，并将其记录成文， 是总结，亦是探索 。期间难免会有这样或者那样的想法， 而将这些想法实践出来的过程是会让人觉得生活依旧是美好的 。 状况 接下来是以我目前水平能看到的： 和多数行业一样，不管哪个公司，他们技术和关系，在不同客户那里都有不同的权重，这点的南北差异尤为明显； 风（宏观调控）让云去哪，云就去哪； AppEngine或者OpenShift目前更像是资源（公共数据中心）一厢情愿的产物； 需求 以我所遇到的客户来看，部分客户不会明确的说使用“云”，他们的需求在多数情况下可以有这样或者那样的传统方案替代； 明确要求使用“云”的客户，总会要求周边指标（用户接入、终端协议、视频流占用带宽、UPS、存储复用等）以及各种各样的定制。 所以，在需求上的灵活变通，也是有些许重要性的， 不要把技术人员的固执带到客户那 。 还有什么 TBD "},{"title":"2. 畅想吧","url":"/blog/2014/03/25/cloud-2-yummy/","date":"2014-03-25 00:00:00 +0800","categories":["云端日记"],"body":"单纯人与人的连接关系渐渐已经不能够描述社会这个复杂体了，工业机器也开始走进人的生活，并开始和人互动。Google在2013年一口气收了8家机器人公司，这让我感到…对的，兴奋。 有人说到2020年全球数据总量将达到40ZB，这其中就包含“你幸福吗？”、“你小康了吗？”、“今天中午吃什么？”…你觉得，从数据能判断你的什么？我觉得，该了解的不该了解的，基本都有了。 那我们能拿这些数据做什么呢？ 你现在所能看到的，找到的，听到的，都将会是你进行创造的来源，它们为你服务。 我有一只狗，名字叫卡尔， 它能听懂我说话， 帮我发个邮件给阿牛，它会去做。 帮我开台桌面一会儿我要连上去画图，它会去开。 帮我预定曹阳影城的两张门票，它会去订。 帮我找点有意思的新闻，它会整理发送给我。 帮我去给东东和小李送个快递，它也会去送。 帮我买一身衣服，它会买你喜欢的风格。 帮我把找找另外一只拖鞋在哪，它屁颠屁颠的找到了。 …… 有很多事情可以帮你甚至代替你去做（原谅我这个robot控）况且，“云”落地总要实体化的。 健壮的身体里，同样要有个健康的灵魂。 "},{"title":"3. 要有光","url":"/blog/2014/03/25/cloud-3-arch/","date":"2014-03-25 00:00:00 +0800","categories":["云端日记"],"body":"在这里，是整个系统的不同角度视图。 +-------------------------------------+ | +--------------------------------+ | | | +---------------------------+ | | | | | +-----------------------+ | | | | | | | | | | | | | | | appliance | | | | | | | +-----------------------+ | | | | | | vm+map_reduce | | | | | +---------------------------+ | | | | hdfs + hypervisor | | | +--------------------------------+ | | glusterfs | +-------------------------------------+ Cluster | +--Board | | | +--Storage | | | +--Dev_Extension_Board | +--Network | +--UPS | | | +--Active/Backup | +--Safety | | | +--TSL | | | +--Supervision 整个存储是比较倾向gluster作为后端，当然，hdfs是可以使用gluster作为后端的。hdfs的优势之一是可移植性高，可以用廉价的硬件组建（扩展）对性能要求不苛刻的集群。 每一个hypervisor都承载一定数量的计算，当然主要是靠虚拟机内的MapReduce。TBD Appliance的是使本地计算资源以及互联网资源的融合，作为集群的表现点，拥有识别并体现彼此特征的能力。 "},{"title":"4. 意识流的架构目录（进程信息）","url":"/blog/2014/03/28/cloud-4-architecture-directory/","date":"2014-03-28 00:00:00 +0800","categories":["云端日记"],"body":"UPDATE: 2014-06-01 移步 http://github.com/lofyer/InTheCloud UPDATE: 2014-05-30 放入github，以rst格式编写。 UPDATE: 2014-05-15 oVirt章节完成以后整理成word文档，内容更加丰富。 每一章节都可扩展，避免局部发胖，可以从新调整目录结构，比如再加一级父目录和子目录。 硬件部分在搭建的时候可以穿插进来，并不设专门章节讲解。 角度不要起太高，容易扯淡。 不忘资源整合，要有数据。 兼顾智能家居（家庭云）。 存储是基础，可以给用户，可以给自己 … 5.1 分布式 … 5.1.1 FUSE … 5.2 Glusterfs简述 … 5.3 搭建及测试 … 5.4 应用进阶 虚拟化是核心，主要提供给用户 … 6.1 oVirt简介 … 6.2 管理节点搭建 … 6.3 高可用搭建 … 6.4 完善平台 … 6.5 使用进阶 … 6.5.1 ovirt-shell … 6.5.2 主机hooks … 6.5.3 UI插件 … 6.5.4 使用外部服务 … 6.5.5 libguestfs使用 … 6.5.6 技巧 使用python进行数据抓取与分析 7.1 抓取 7.2 numpy 7.3 matplotlib 数据分析作特色，几年的报表不用费劲看了，在线抓取微博内容预测具体对象（比如近来大事件）的趋势，心理学也不错 … 7.1 Hadoop/Storm简介 … 7.2 选择 … 7.3 搭建 … 7.4 测试 Appliance，有益的小应用 … 8.1 ControlPanel … 8.1.1 Django code … 8.1.2 LeapMotion Plugin … 8.2 LDAP/IPA(Kerberos) … 8.3 Executor … 8.4 Watchdog … 8.5 DNS and router … 8.6 SDN 智能家居云实例 … 1. 架构、清单 … 2. 网络（wrt） … 3. 媒体（openfiler、xbmc） … 4. 控制（app） … 5. RaspeberryPi/Arduino与各种传感器实例 "},{"title":"5. 分布式存储的故事","url":"/blog/2014/04/01/cloud-5-glusterfs-story/","date":"2014-04-01 00:00:00 +0800","categories":["云端日记"],"body":"计算机领域中有诸多有意思的东西可以把玩，在这儿且看看分布式存储。 集群文件系统 在某些场景下又可以称作网络文件系统、并行文件系统，在70年代由IBM提出并实现原型。 有几种方法可以实现集群形式，但多数仅仅是节点直连存储而不是将存储之上的文件系统进行合理“分布”。分布式文件系统同时挂载于多个服务器上，并在它们之间共享，可以提供类似于位置无关的数据定位或冗余等特点。并行文件系统是一种集群式的文件系统，它将数据分布于多个节点，其主要目的是提供冗余和提高读写性能。 共享磁盘（Shared-disk）/Storage-area network(SAN) 从应用程序使用的文件级别，到SAN之间的块级别的操作，诸如权限控制和传输，都是发生在客户端节点上。共享磁盘（Shared-disk）文件系统，在并行控制上做了很多工作，以至于其拥有比较一致连贯的文件系统视图，从而避免了多个客户端试图同时访问同一设备时数据断片或丢失的情况发生。其中有种技术叫做围栏（Fencing），就是在某个或某些节点发生断片时，集群自动将这些节点隔离（关机、断网、自恢复），保证其他节点数据访问的正确性。 元数据（Metadata） 类似目录，可以让所有的机器都能查找使用所有信息，在不同的架构中有不同的保存方式，有的均匀分布于集群，有的存储在中央节点。 实现的方式有SCSI，iSCSI，AoE，FC，Infiniband等，比较著名的产品有Redhat GFS、Sun QFS、Vmware VMFS等。 分布式文件系统 ****分布式文件系统则不是块级别的共享的形式了，所有加进来的存储（文件系统）都是整个文件系统的一部分，所有数据的传输也是依靠网络来的。 它的设计有这么几个原则： 访问透明    客户端在其上的文件操作与本地文件系统无异 位置透明   其上的文件不代表其存储位置，只要给了全名就能访问 并发透明    所有客户端持有的文件系统的状态在任何时候都是一致的，不会出现A修改了F文件，但是B愣了半天才发现。 失败透明   理解为阻塞操作，不成功不回头。 异构性         文件系统可以在多种硬件以及操作系统下部署使用。 扩展性         随时添加进新的节点，无视其资格新旧。 冗余透明    客户端不需要了解文件存在于多个节点上这一事实。 迁移透明    客户端不需要了解文件根据负载均衡策略迁移的状况。 实现的方式有NFS、CIFS、SMB、NCP等，比较著名的产品有Google GFS、Hadoop HDFS、GlusterFS、Lustre等。 "},{"title":"6.  FUSE","url":"/blog/2014/04/03/5-1-1-fuse/","date":"2014-04-03 00:00:00 +0800","categories":["云端日记"],"body":"既然是文件系统，那就不得不了解一下FUSE。 FUSE全名Filesystem in Userspace，是在类UNIX系统下的一个机制，可以让普通用户创建修改访问文件系统。功能大体就是连接内核接口与用户控件程序的一座“桥”，目前普遍存在于多个操作系统中，比如Linux、BSD、Solaris、OSX、Android等。 图5-1 FUSE来源于AVFS，不同于传统文件系统从磁盘读写数据，FUSE在文件系统或磁盘中有“转换”的角色，本身并不会存储数据。 在Linux系统中的实现有很多，比如即将要用到的glusterfs-fuse。 "},{"title":"7. Gluster简述","url":"/blog/2014/04/04/5-2-cloud-gluster-des/","date":"2014-04-04 00:00:00 +0800","categories":["云端日记"],"body":"这一节会简述下glusterfs功能和特性。 glusterfs设计符合奥卡姆剃刀原则，即“若无必要，勿增实体”。 功能特性 gluster集群组成的存储可以通过NFS、CIFS、Glusterfs、HTTP、FTP协议交给用户使用； gluster支持四种存储逻辑组合：Striped、Replicated、Striped-Replicated、Distributed； 支持跨网备份（geo-replication）； 统一对象视图，与UNIX设计哲学类似，所有皆对象； 跨平台兼容性高，可作为hadoop、openstack、ovirt、Amazon EC的后端； 名词解释 砖块（brick）：即服务器节点上导出的一个目录，作为glusterfs的最基本单元； 扩展属性（xattr）：用户/程序以之将数据和元数据关联起来； GFID：glusterfs中的每一个文件或者目录都有一个独立的128位GFID，与普通文件系统中的inode类似； glusterd：运行于所有服务器中的管理守护程序； "},{"title":"8. 搭建glusterfs作为基础存储","url":"/blog/2014/04/12/5-3-glusterfs-howto/","date":"2014-04-12 00:00:00 +0800","categories":["云端日记"],"body":"既然要搭建一个稳健的基础，那么glusterfs在此使用distributed striped replicated方式，这里使用4台预装CentOS 6(SELINUX设置为permissive)的机器。 添加DNS或者修改hosts文件 鉴于笔者所在环境中暂时没有配置独立的DNS，此处先修改hosts文件以完成配置（每台机器上都如此设置）： # echo -e \"192.168.10.101\\tgs1.example.com\\n192.168.10.102\\tgs2.example.com\\n192.168.10.103\\tgs3.example.com\\n192.168.10.104\\tgs4.example.com\" >> /etc/hosts 添加repo [epel] name=Extra Packages for Enterprise Linux 6 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch failovermethod=priority enabled=1 gpgcheck=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6 [glusterfs-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/ enabled=1 skip_if_unavailable=1 gpgcheck=1 gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key [glusterfs-noarch-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch enabled=1 skip_if_unavailable=1 gpgcheck=1 gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key [glusterfs-source-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS enabled=0 skip_if_unavailable=1 gpgcheck=1 gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key 准备磁盘 每一个节点都可以看做gluster server，安装xfs用户空间工具： # yum install -y glusterfs glusterfs-fuse glusterfs-server xfsprogs # /etc/init.d/glusterd start # /etc/init.d/glusterfsd start # chkconfig glusterfsd on # chkconfig glusterd on 假如每台机器除系统盘之外都有2块1T SATA硬盘。 对其进行分区，创建逻辑卷，格式化并挂载： # fdisk /dev/sdX << EOF n p 1 w EOF 直接使用物理盘： # mkfs.xfs -i size 512 /dev/sdb1 # mkfs.xfs -i size 512 /dev/sdc1 # mkdir /gluster_brick0 # mkdir /gluster_brick1 # echo -e \"/dev/sdb1\\t/gluster_brick0\\txfs\\tdefaults\\t0 0\\n/dev/sdc1\\t/gluster_brick1\\txfs\\tdefaults\\t0 0\" >> /etc/fstab # mount -a 或者使用逻辑卷： # pvcreate /dev/sdb1 /dev/sdc1 # vgcreate vg_gluster /dev/sdb1 /dev/sdc1 # lvcreate --name lv_gluster --size 2500G vg_gluster # mkfs.xfs -i size 512 /dev/vg_gluster-lv_gluster # mkdir /gluster_brick # echo -e \"/dev/mapper/vg_gluster-lv_gluster\\t/gluster_brick\\txfs\\tdefaults\\t0 0\" >> /etc/fstab # mount -a 为什么要用XFS？ XFS具有元数据日志功能，可以快速恢复数据；同时，可以在线扩容及碎片整理。其他文件系统比如EXT3，EXT4未做充分测试。 配置节点，添加volume 在其中任何一台机器上，比如gs2.example.com，执行： # gluster > peer probe gs1.example.com > peer probe gs2.example.com 添加brick至volume， 合理调整砖块顺序 ： # gluster > volume create gluster-vol1 stripe 2 replica 2 gs1.example.com:/gluster_brick0 gs1.example.com:/gluster_brick1 gs2.example.com:/gluster_brick0 gs2.example.com:/gluster_brick1 gs3.example.com:/gluster_brick0 gs3.example.com:/gluster_brick1 gs4.example.com:/gluster_brick0 gs4.example.com:/gluster_brick1 force > volume start gluster-vol1 > volume status Status of volume: gluster-vol1 Gluster process Port Online Pid ------------------------------------------------------------------------------ Brick gs1.example.com:/gluster_brick0 49152 Y 1984 Brick gs1.example.com:/gluster_brick1 49153 Y 1995 Brick gs2.example.com:/gluster_brick0 49152 Y 1972 Brick gs2.example.com:/gluster_brick1 49153 Y 1983 Brick gs3.example.com:/gluster_brick0 49152 Y 1961 Brick gs3.example.com:/gluster_brick1 49153 Y 1972 Brick gs4.example.com:/gluster_brick0 49152 Y 1975 Brick gs4.example.com:/gluster_brick1 49153 Y 1986 NFS Server on localhost 2049 Y 1999 Self-heal Daemon on localhost N/A Y 2006 NFS Server on gs2.example.com 2049 Y 2007 Self-heal Daemon on gs2.example.com N/A Y 2014 NFS Server on gs2.example.com 2049 Y 1995 Self-heal Daemon on gs2.example.com N/A Y 2002 NFS Server on gs3.example.com 2049 Y 1986 Self-heal Daemon on gs3.example.com N/A Y 1993 Task Status of Volume gluster-vol1 ------------------------------------------------------------------------------ There are no active volume tasks > volume info all gluster volume info all Volume Name: gluster-vol1 Type: Distributed-Striped-Replicate Volume ID: bc8e102c-2b35-4748-ab71-7cf96ce083f3 Status: Started Number of Bricks: 2 x 2 x 2 = 8 Transport-type: tcp Bricks: Brick1: gs1.example.com:/gluster_brick0 Brick2: gs1.example.com:/gluster_brick1 Brick3: gs2.example.com:/gluster_brick0 Brick4: gs2.example.com:/gluster_brick1 Brick5: gs3.example.com:/gluster_brick0 Brick6: gs3.example.com:/gluster_brick1 Brick7: gs4.example.com:/gluster_brick0 Brick8: gs4.example.com:/gluster_brick1 客户端挂载glusterfs 当用glusterfs-fuse挂载时，客户端的hosts文件里需要有gluster server中的任一节点做解析： 127.0.0.1 localhost.localdomain localhost ::1 localhost6.localdomain6 localhost6 192.168.1.81 gs1.example.com 安装glusterfuse，将gluster卷作为glusterfs挂载，并写入1M文件查看其在各砖块分配： # yum install glusterfs glusterfs-fuse # mount.glusterfs 192.168.1.81:/gluster-vol1 /mnt # cd /mnt # dd if=/dev/zero of=a.img bs=1k count=1k # cp a.img b.img; cp a.img c.img; cp a.img d.img 在四台服务端分别查看： [root@gs1 ~]# ls -lh /gluster_brick* /gluster_brick0: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 a.img -rw-r--r--. 2 root root 512K Apr 22 17:13 d.img /gluster_brick1: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 a.img -rw-r--r--. 2 root root 512K Apr 22 17:13 d.img [root@gs2 ~]# ls -lh /gluster_brick* /gluster_brick0: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 a.img -rw-r--r--. 2 root root 512K Apr 22 17:13 d.img /gluster_brick1: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 a.img -rw-r--r--. 2 root root 512K Apr 22 17:13 d.img [root@gs3 ~]# ls -lh /gluster_brick* /gluster_brick0: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 b.img -rw-r--r--. 2 root root 512K Apr 22 17:13 c.img /gluster_brick1: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 b.img -rw-r--r--. 2 root root 512K Apr 22 17:13 c.img [root@gs4 ~]# ls -lh /gluster_brick* /gluster_brick0: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 b.img -rw-r--r--. 2 root root 512K Apr 22 17:13 c.img /gluster_brick1: total 1.0M -rw-r--r--. 2 root root 512K Apr 22 17:13 b.img -rw-r--r--. 2 root root 512K Apr 22 17:13 c.img 至此，所有配置结束，下一篇说一下使用以及部分trick。 "},{"title":"OpenLDAP step by step how-to","url":"/blog/2014/04/14/openldap-kerberos-howto/","date":"2014-04-14 00:00:00 +0800","categories":["ldap"],"body":"I need an authentication system with compatibility and many extended features(like bio-device). So, I’ve got AD, IPA and OpenLDAP to choose from. AD comes from MS and it is too “heavy” for the not-very-large system. IPA and OpenLDAP are almost same, but I prefer latter, since it’s compatible with oVirt(This why I choose CentOS rather than debian). The simplest OpenLDAP server A basic LDAP without any security or additional features. OpenLDAP with SASL Add SASL to our LDAP. OpenLDAP with SAMBA To add Windows PC to our domain. OpenLDAP with Kerberos This is what we want finally. 1. The simplest OpenLDAP server I’ve got 2 ways to setup an openldap server: 389-ds script and manually configure . 1.1 Using 389-ds script Here’s the original article. Preparation Before setup, this configuration should be modified. Add following: /etc/hosts 192.168.1.80 ldap.lofyer.org Add following: /etc/sysctl.conf net.ipv4.tcp_keepalive_time = 30 net.ipv4.ip_local_port_range = 1024 65000 fs.file-max = 64000 Add following: /etc/limits.conf * soft nofile 8192 * hard nofile 8192 Add following: /etc/pam.d/login session required /lib/security/pam_limits.so Then reboot the machine to make above configurations work. Setup 389-ds # useradd ldapadmin # passwd ldapadmin # yum install -y 389-ds openldap-clients # setup-ds-admin.pl Then you’ll see some questions like this(sorry for the high-lighting…): ============================================================================== This program will set up the 389 Directory and Administration Servers. It is recommended that you have \"root\" privilege to set up the software. Tips for using this program: - Press \"Enter\" to choose the default and go to the next screen - Type \"Control-B\" then \"Enter\" to go back to the previous screen - Type \"Control-C\" to cancel the setup program Would you like to continue with set up? [yes]: ## Press Enter ## ============================================================================== Your system has been scanned for potential problems, missing patches, etc. The following output is a report of the items found that need to be addressed before running this software in a production environment. 389 Directory Server system tuning analysis version 23-FEBRUARY-2012. NOTICE : System is i686-unknown-linux2.6.32-431.el6.i686 (1 processor). WARNING: 622MB of physical memory is available on the system. 1024MB is recommended for best performance on large production system. WARNING : The warning messages above should be reviewed before proceeding. Would you like to continue? [no]: yes ## Type Yes and Press Enter ## ============================================================================== Choose a setup type: 1. Express Allows you to quickly set up the servers using the most common options and pre-defined defaults. Useful for quick evaluation of the products. 2. Typical Allows you to specify common defaults and options. 3. Custom Allows you to specify more advanced options. This is recommended for experienced server administrators only. To accept the default shown in brackets, press the Enter key. Choose a setup type [2]: ## Press Enter ## ============================================================================== Enter the fully qualified domain name of the computer on which you're setting up server software. Using the form <hostname>.<domainname> Example: eros.example.com. To accept the default shown in brackets, press the Enter key. Warning: This step may take a few minutes if your DNS servers can not be reached or if DNS is not configured correctly. If you would rather not wait, hit Ctrl-C and run this program again with the following command line option to specify the hostname: General.FullMachineName=your.hostname.domain.name Computer name [ldap.lofyer.org]: ## Press Enter ## ============================================================================== he servers must run as a specific user in a specific group. It is strongly recommended that this user should have no privileges on the computer (i.e. a non-root user). The setup procedure will give this user/group some permissions in specific paths/files to perform server-specific operations. If you have not yet created a user and group for the servers, create this user and group using your native operating system utilities. System User [nobody]: ldapadmin ## Enter LDAP user name created above # System Group [nobody]: ldapadmin ============================================================================== Server information is stored in the configuration directory server. This information is used by the console and administration server to configure and manage your servers. If you have already set up a configuration directory server, you should register any servers you set up or create with the configuration server. To do so, the following information about the configuration server is required: the fully qualified host name of the form <hostname>.<domainname>(e.g. hostname.example.com), the port number (default 389), the suffix, the DN and password of a user having permission to write the configuration information, usually the configuration directory administrator, and if you are using security (TLS/SSL). If you are using TLS/SSL, specify the TLS/SSL (LDAPS) port number (default 636) instead of the regular LDAP port number, and provide the CA certificate (in PEM/ASCII format). If you do not yet have a configuration directory server, enter 'No' to be prompted to set up one. Do you want to register this software with an existing configuration directory server? [no]: ## Press Enter ## ============================================================================== Please enter the administrator ID for the configuration directory server. This is the ID typically used to log in to the console. You will also be prompted for the password. Configuration directory server administrator ID [admin]: ## Press Enter ## Password: ## create password ## Password (confirm): ## re-type password ## ============================================================================== The information stored in the configuration directory server can be separated into different Administration Domains. If you are managing multiple software releases at the same time, or managing information about multiple domains, you may use the Administration Domain to keep them separate. If you are not using administrative domains, press Enter to select the default. Otherwise, enter some descriptive, unique name for the administration domain, such as the name of the organization responsible for managing the domain. Administration Domain [lofyer.org]: ## Press Enter ## ============================================================================== The standard directory server network port number is 389. However, if you are not logged as the superuser, or port 389 is in use, the default value will be a random unused port number greater than 1024. If you want to use port 389, make sure that you are logged in as the superuser, that port 389 is not in use. Directory server network port [389]: ## Press Enter ## ============================================================================== Each instance of a directory server requires a unique identifier. This identifier is used to name the various instance specific files and directories in the file system, as well as for other uses as a server instance identifier. Directory server identifier [server]: ## Press Enter ## ============================================================================== The suffix is the root of your directory tree. The suffix must be a valid DN. It is recommended that you use the dc=domaincomponent suffix convention. For example, if your domain is example.com, you should use dc=example,dc=com for your suffix. Setup will create this initial suffix for you, but you may have more than one suffix. Use the directory server utilities to create additional suffixes. Suffix [dc=lofyer, dc=org]: ## Press Enter ## ============================================================================= Certain directory server operations require an administrative user. This user is referred to as the Directory Manager and typically has a bind Distinguished Name (DN) of cn=Directory Manager. You will also be prompted for the password for this user. The password must be at least 8 characters long, and contain no spaces. Press Control-B or type the word \"back\", then Enter to back up and start over. Directory Manager DN [cn=Directory Manager]: ## Press Enter ## Password: ## Enter the password ## Password (confirm): ============================================================================== The Administration Server is separate from any of your web or application servers since it listens to a different port and access to it is restricted. Pick a port number between 1024 and 65535 to run your Administration Server on. You should NOT use a port number which you plan to run a web or application server on, rather, select a number which you will remember and which will not be used for anything else. Administration port [9830]: ## Press Enter ## ============================================================================== The interactive phase is complete. The script will now set up your servers. Enter No or go Back if you want to change something. Are you ready to set up your servers? [yes]: ## Press Enter ## Creating directory server . . . Your new DS instance 'server' was successfully created. Creating the configuration directory server . . . Beginning Admin Server creation . . . Creating Admin Server files and directories . . . Updating adm.conf . . . Updating admpw . . . Registering admin server with the configuration directory server . . . Updating adm.conf with information from configuration directory server . . . Updating the configuration for the httpd engine . . . Starting admin server . . . output: Starting dirsrv-admin: output: [ OK ] The admin server was successfully started. Admin server was successfully created, configured, and started. Exiting . . . Log file is '/tmp/setupo1AlDy.log' Then make these two services start on startup. # chkconfig dirsrv on # chkconfig dirsrv-admin on With 389-ds scripts, you could use 389-console, please refer to the link above. 1.2 Manually configure Here’s the original article. Install the packages # yum install openldap{,-clients,-servers} Change the configuration /etc/openldap/slapd.d/cn\\=config.ldif Delete olcAllows: bind_v2 if you want only v3. Modify olcIdleTimeout from 0 to 30 if you want close the idle connection for more than 30 seconds. Before next step, run this command to generate a SHA encrypted password. # slappasswd New password: Re-enter new password: {SSHA}aW7TYJ3faz13RKsnr3uiCsbgi55RKhW9 Then copy the output to your clipboard. /etc/openldap/slapd.d/cn\\=config/olcDatabase\\={2}bdb.ldif Modify olcSuffix , RootDN , olcRootPW to this: ... olcSuffix: dc=lofyer, dc=org olcRootPW: {SSHA}aW7TYJ3faz13RKsnr3uiCsbgi55RKhW9 RootDN: cn=admin, dc=lofyer, dc=org ... Start service # service slapd start # chkconfig slpad on Add rootdn and groups dn: dc=lofyer,dc=org objectclass: dcObject objectclass: organization o: Lofyer Org dc: lofyer dn: ou=People,dc=lofyer,dc=org objectClass: organizationalUnit objectClass: top ou: People dn: ou=Groups,dc=lofyer,dc=org objectClass: organizationalUnit objectClass: top ou: Groups dn: cn=admin,dc=lofyer,dc=org objectclass: organizationalRole cn: admin Import the ldif: # ldapadd -x -D \"cn=admin,dc=lofyer,dc=org\" -W -f /etc/openldap/schema/lofyer.org.ldif # ldapsearch -x -b 'dc=lofyer,dc=org' '(objectclass=*)' Create a user Add following content to user.ldif dn: uid=demo,ou=People,dc=lofyer,dc=org objectclass: top objectclass: person objectclass: inetOrgPerson objectclass: organizationalPerson uid: demo cn: demo sn: demo givenName: demo Provide a password: # ldapadd -x -W -D \"cn=admin,dc=lofyer,dc=org\" -f user.ldif New password: Re-enter new password: Enter LDAP Password: Add or delete a member from group(myteam) Add: dn: cn=myteam,ou=Groups,dc=lofyer,dc=org changetype: modify add: member member: uid=user1,ou=People,dc=lofyer,dc=org # ldapmodify -x -D \"cn=admin,dc=lofyer,dc=org\" -W -f add.ldif Delete: dn: cn=myteam,ou=Groups,dc=lofyer,dc=org changetype: modify delete: member member: uid=user1,ou=People,dc=lofyer,dc=org # ldapmodify -x -D \"cn=admin,dc=lofyer,dc=org\" -W -f delete.ldif Use TSL Here’s the original article. (NOT NECESSARY)Generate CA Follow this script. #!/bin/bash #Change to the directory and clear out the old certs cd /etc/openldap/certs rm -rf * #This echo statement is actually putting the word “password” (without the quotes) in a temporary password file to help #automate the process. This will be the password for your certificate. Change this as appropriate echo \"mypassword\" > /etc/openldap/certs/password export PATH=/usr/bin/:$PATH echo falkdjfdajkasdndwndoqndwapqmhfaksj >> noise.txt #Associate the password with the certificates which will be generated in the current directory certutil -N -d . -f /etc/openldap/certs/password certutil -G -d . -z noise.txt -f /etc/openldap/certs/password #Generate a CA certificate for the 389 server certutil -S -n \"CA certificate\" -s \"cn=CACert\" -x -t \"CT,,\" -m 1000 -v 120 -d . -z /etc/openldap/certs/noise.txt -f /etc/openldap/certs/password #anwsers are Y, <enter accepting defaults>, Y #This builds the server cert certutil -S -n \"OpenLDAP Server\" -s \"cn=ldap.lofyer.org\" -c \"CA certificate\" -t \"u,u,u\" -m 1001 -v 120 -d . -z /etc/openldap/certs/noise.txt -f /etc/openldap/certs/password #This exports the cacert in case you need it pk12util -d . -o cacert.p12 -n \"CA certificate\" #This exports the server-cert which you will need on the windows AD pk12util -d . -o servercert.p12 -n \"OpenLDAP Server\" #This exports the CA cert for ldap clients certutil -L -d . -n \"CA certificate\" -a > /etc/openldap/certs/cacert.pem #Make the files in here readable chmod 644 * #Set the system to use LDAPS sed -i 's/SLAPD_LDAPS=no/SLAPD_LDAPS=yes/g' /etc/sysconfig/ldap #Add a firewall exception in case the user has not configured their firewall properly #iptables -I INPUT -m state --state NEW -p tcp --dport 636 -j ACCEPT #/etc/init.d/iptables save #Restart slapd to make the changes take effect #/etc/init.d/slapd restart I think you should notice that the private key password is “mypassword”. Then you will get three files: cacert.p12 , cacert.pem , servercert.p12 . And, that’s all. 2. Add SASL to OpenLDAP OKay, we’ll add SASL to our ldap connections. Install cyrus-sasl package. # yum install cyrus-sasl-gssapi # yum install cyrus-sasl-ldap "},{"title":"SAP Cloud Computing","url":"/blog/2014/04/14/sap-cloud-computing/","date":"2014-04-14 00:00:00 +0800","categories":["data processing"],"body":"I’d got these modules running. TBD "},{"title":"9. glusterfs应用示例及技巧","url":"/blog/2014/04/21/5-4-gluster-trick/","date":"2014-04-21 00:00:00 +0800","categories":["云端日记"],"body":"文件权限 glusterfs在创建卷时会更改砖块所有者为root.root，对于某些应用请注意更改砖块目录所有者（比如在 /etc/rc.local 中添加chown，不要更改砖块下隐藏目录.glusterfs）。 砖块分割 前文所述的砖块划分方式在某些场景下不是很好，可以在/brickX下创建目录，比如data1，同时在创建glusterfs卷的时候使用HOST:/brickX/data1作为砖块，以合理利用存储空间。 normal、replica、striped卷组合 砖块的划分排序：striped（normal）优先，replica在striped（normal）基础上做冗余；计算大小时，同一replica组中的brick进行合并（多个算作一个），一个striped组可看做一个有效块，。 假设我们有4个主机，8个砖块，每个砖块都是5GB，如下图， 创建卷时，使用如下命令： # gluster volume create gluster-vol1 stripe 2 replica 2 host1:/brick1 host1:/brick2 host2:/brick1 host2:/brick2 host3:/brick1 host3:/brick2 host4:/brick1 host4:/brick2 force 则会进行下列组合： 创建卷时，使用如下命令： # gluster volume create gluster-vol1 stripe 2 replica 2 host1:/brick1 host2:/brick1 host3:/brick1 host4:/brick1 host1:/brick2 host2:/brick2 host3:/brick2 host4:/brick2 force 则会进行下列组合（注意颜色，可改为实虚线）： 作为nfs挂载 由于glusterfs占用了2049端口，所以其与nfs server一般不能共存于同一台服务器，除非更改nfs服务端口。 mount -t nfs -o vers=3 server1:/volume1 /mnt 作为cifs挂载 先在某一服务器或者客户端将起挂载，再以cifs方式导出 [glustertest] comment = For testing a Gluster volume exported through CIFS path = /mnt/glusterfs read only = no guest ok = yes 进阶手册 1. 裂脑(split-brain)修复 裂脑发生以后，各节点信息可能会出现不一致。可以通过以下步骤查看并修复。 定位裂脑文件 通过命令 # gluster volume heal info split-brain 或者查看在客户端仍然是Input/Output错误的文件。 关闭已经打开的文件或者虚机 确定正确副本 恢复扩展属性 2. 砖块重用 当一个volume正在使用时，你删除了其中一个brick，会出现“/bricks/app or a prefix of it is already part of a volume”，对于3.3版本以后的glusterfs有此问题。 解决方法： # setfattr -x trusted.glusterfs.volume-id $brick_path # setfattr -x trusted.gfid $brick_path # rm -rf $brick_path/.glusterfs 3. 扩展 对于中等以上规模的部署，需要使用dns服务器去解析各个节点以免去修改hosts文件的麻烦。 "},{"title":"10. oVirt简介","url":"/blog/2014/04/24/cloud-6-1-ovirt-description/","date":"2014-04-24 00:00:00 +0800","categories":["云端日记"],"body":"Welcome to the core! 云计算目前主流实现有SaaS（Software-as-a-service）、PaaS（Platform-as-a-service）和IaaS（Infrastructure-as-a-service）。IaaS和PaaS都算作基础件，SaaS可以与基础件自由组合或者单独使用。 图 虚拟化技术已经很受重视而且被推到了一个浪尖。如今诸多开源虚拟化平台，比如XenServer、CloudStack、OpenStack、Eucalyptus、oVirt、OpenVZ等，我们都看花了眼，些许慌乱不知哪个适合自己了。 各平台实现方式：全虚拟化，半虚拟化，TBD 我在写这篇文档的时候，只对oVirt略知一二，其他平台（XenServer、OpenStack）稍懂皮毛，再剩下的我就没怎么用过了。那么，只挑最熟悉的来讲吧。 IaaS云计算平台，综合来说具有以下特性： 虚拟化 虚拟化作为云计算平台的核心，是资源利用的主要形式之一。网络、存储、CPU乃至GPU等主要通过虚拟主机进行实体化。 分布式 分布式可利用共享的存储，通过网络将资源进行整合，是实现资源化的必备条件。 高可用 对于规模庞大的云平台，提供管理节点、重要服务的高度可用性是十分必要的。笔者在写这篇文章时，oVirt 3.4已经可以做到管理节点的高度可用。 兼容性 云计算平台众多，各家有各家的特点，同一数据中心部署不同的平台的可能性极大，因此，主要服务（比如虚拟网络、存储、虚机等）要有一定兼容性，比如oVirt可以利用OpenStack的Nouveau提供的虚拟网络、Foreman可以方便地在oVirt上部署新机器等。 另外，也有DeltaCloud、libvirt等API，用户可以利用它们自由地实现自己的云综合管理工具。 资源池化 网络、存储、CPU或者GPU可以综合或者单独划分资源池，通过配额进行分配，从而保证其合理利用。 安全性 现代企业对于安全性的要求已经十分苛刻，除去传统数据加密、访问控制，甚至对于社会工程也要有一定防护能力；用户数据具有对非企业管理员具有防护性能，即使将虚拟机磁盘文件拷贝出来也不能直接获取其内容。 需求导向性 在计算水平上，优质资源最先提供给重要服务；服务水平上，平台具有可定制能力。 oVirt物理层视图 管理独占一台物理机 高可用管理机 内容预览 第11（6-2）搭建管理引擎； 第12（6-3）搭建高可用管理引擎； 第13（6-4）加入节点，构建一个完整的云平台； 第14（6-5）应用进阶； "},{"title":"Intergrate owncloud with AD(LDAP)","url":"/blog/2014/04/24/intergrate-owncloud-adldap/","date":"2014-04-24 00:00:00 +0800","categories":["ldap","owncloud"],"body":"Windows 2008R2 server with AD role built. User group: owncloudgrp User in owncloudgrp : aaa, beta Users must have logon name, first name, last name set. Configure the owncloud: Server: User Filter: Login Filter: Group Filter: Every time you change these two sections, wait for a few seconds until more than zero users discovered. Advanced – Connection Settings: Advanced – Directory Settings: Expert: Add internal username: sAMAccountName "},{"title":"Migrate vm from ESiX to oVirt","url":"/blog/2014/04/25/migrate-vm-esix-ovirt/","date":"2014-04-25 00:00:00 +0800","categories":["virtualization"],"body":"oVirt: v3.3, CentOS, 192.168.1.111 ESiX: 5.x, 192.168.1.135 Create a nfs export domain on your oVirt datacenter. /vdsm/export 0.0.0.0/0.0.0.0(rw) Install virt-v2v on CentOS and add authentication. # yum install virt-v2v machine 192.168.1.135 login root password 1234567 Change permission of .netrc as saying of manual or you will get a warning with wrong permission. # chmod 600 ~/.netrc Import myvm. Make sure that your vm in ESiX is powered off. # virt-v2v -ic esx://192.168.1.135/?no_verify=1 -o rhev -os 192.168.1.111:/virtfan/export --network mgmtnet myvm myvm_myvm: 100% [====================================================]D 0h04m48s virt-v2v: myvm configured with virtio drivers. Import myvm from export domain to data domain. Import. Run. "},{"title":"12. 搭建高可用oVirt（hosted engine）","url":"/blog/2014/04/29/6-2-2-cloud-ha-ovirt/","date":"2014-04-29 00:00:00 +0800","categories":["云端日记"],"body":"笔者写此文时oVirt已经更新到3.4。 在此，我们会用到之前创建的distributed-replicate存储，这样可用保证系统服务的高度可用性有所提高。 有以下几点需要注意： 宿主机的CPU架构需要为Westmere（Westmere E56xx/L56xx/X56xx）、Nehalem（Intel Core i7 9xx）、Penryn（Intel Core 2 Duo P9xxx）或者Conroe（Intel Celeron_4x0）中的之一，否则集群类型会与宿主机类型不兼容导致数据中心启动失败。 CPU Family table 参阅 Intel Architecture and Processor Identification With CPUID Model and Family Numbers 建议参考第11节提前安装含有oVirt管理的虚拟机，硬盘格式为RAW，从而在安装管理机时作为OVF导入或者覆盖虚拟磁盘，减少失败风险时间。 准备 每台机器上都要添加作为虚拟机运行的engine的FQDN，此处为ha.lofyer.org。 # echo -e '192.168.10.100\\tha.lofyer.org' >> /etc/hosts 存储可以使用之前的glusterfs，方式为NFS_V3，注意将brick的权限设置为vdsm.kvm或者36:36。 # gluster volume create gluster-vol1 replica 2 gs1.example.com:/gluster_brick0 gs2.example.com:/gluster_brick0 gs3.example.com:/gluster_brick0 gs4.example.com:/gluster_brick0 gs1.example.com:/gluster_brick1 gs2.example.com:/gluster_brick1 gs3.example.com:/gluster_brick1 gs4.example.com:/gluster_brick1 force 由于engine以及node的网络服务依赖于network而非NetworkManager，我们需要启用前者禁用后者，在每一台服务器上都进行如下类似配置修改网络。 NAME=eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=static # 注意修改此处的IP IPADDR=192.168.10.101 NETMASK=255.255.255.0 GATEWAY=192.168.10.1 DNS1=192.168.10.1 # chkconfig NetworkManager off # chkconfig network on # service NetworkManager stop; service network restart 添加repo # yum localinstall http://resources.ovirt.org/releases/ovirt-release.noarch.rpm # yum install ovirt-hosted-engine-setup 或者手动添加： [ovirt-stable] name=Latest oVirt Releases baseurl=http://ovirt.org/releases/stable/rpm/EL/$releasever/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [ovirt-3.4-stable] name=Latest oVirt 3.4.z Releases baseurl=http://ovirt.org/releases/3.4/rpm/EL/$releasever/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [epel] name=Extra Packages for Enterprise Linux 6 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch failovermethod=priority enabled=1 includepkgs=epel-release,python-uinput,puppet,python-lockfile,python-cpopen,python-ordereddict,python-pthreading,python-inotify,python-argparse,novnc,python-ply,python-kitchen,python-daemon,python-websockify,livecd-tools,spice-html5,mom gpgcheck=0 [ovirt-glusterfs-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [ovirt-glusterfs-noarch-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch enabled=1 skip_if_unavailable=1 gpgcheck=0 安装hosted-engine # yum install ovirt-hosted-engine-setup 回答一些列问题，如下所示： # hosted-engine --deploy [ INFO ] Stage: Initializing Continuing will configure this host for serving as hypervisor and create a VM where you have to install oVirt Engine afterwards. Are you sure you want to continue? (Yes, No)[Yes]: yes [ INFO ] Generating a temporary VNC password. [ INFO ] Stage: Environment setup Configuration files: [] Log file: /var/log/ovirt-hosted-engine-setup/ovirt-hosted-engine-setup-20140508182241.log Version: otopi-1.2.0 (otopi-1.2.0-1.el6) [ INFO ] Hardware supports virtualization [ INFO ] Bridge ovirtmgmt already created [ INFO ] Stage: Environment packages setup [ INFO ] Stage: Programs detection [ INFO ] Stage: Environment setup [ INFO ] Stage: Environment customization --== STORAGE CONFIGURATION ==-- During customization use CTRL-D to abort. Please specify the storage you would like to use (nfs3, nfs4)[nfs3]: # 此处的存储域只存储hosted-engine的相关文件，不作为主数据域 Please specify the full shared storage connection path to use (example: host:/path): 192.168.10.101:/gluster-vol1/ovirt_data/hosted_engine [ INFO ] Installing on first host Please provide storage domain name. [hosted_storage]: Local storage datacenter name is an internal name and currently will not be shown in engine's admin UI.Please enter local datacenter name [hosted_datacenter]: --== SYSTEM CONFIGURATION ==-- --== NETWORK CONFIGURATION ==-- iptables was detected on your computer, do you wish setup to configure it? (Yes, No)[Yes]: no Please indicate a pingable gateway IP address [192.168.10.1]: --== VM CONFIGURATION ==-- # 虚拟engine的安装方式 Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: The following CPU types are supported by this host: - model_Conroe: Intel Conroe Family Please specify the CPU type to be used by the VM [model_Conroe]: Please specify path to installation media you would like to use [None]: /tmp/centos.iso Please specify the number of virtual CPUs for the VM [Defaults to minimum requirement: 2]: Please specify the disk size of the VM in GB [Defaults to minimum requirement: 25]: You may specify a MAC address for the VM or accept a randomly generated default [00:16:3e:59:9b:e2]: Please specify the memory size of the VM in MB [Defaults to minimum requirement: 4096]: 4096 Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: --== HOSTED ENGINE CONFIGURATION ==-- Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]: Enter 'admin@internal' user password that will be used for accessing the Administrator Portal: Confirm 'admin@internal' user password: Please provide the FQDN for the engine you would like to use. This needs to match the FQDN that you will use for the engine installation within the VM. Note: This will be the FQDN of the VM you are now going to create, it should not point to the base host or to any other existing machine. Engine FQDN: ha.lofyer.org [WARNING] Failed to resolve ha.lofyer.org using DNS, it can be resolved only locally Please provide the name of the SMTP server through which we will send notifications [localhost]: Please provide the TCP port number of the SMTP server [25]: Please provide the email address from which notifications will be sent [root@localhost]: Please provide a comma-separated list of email addresses which will get notifications [root@localhost]: [ INFO ] Stage: Setup validation --== CONFIGURATION PREVIEW ==-- Engine FQDN : ha.lofyer.org Bridge name : ovirtmgmt SSH daemon port : 22 Gateway address : 192.168.10.1 Host name for web application : hosted_engine_1 Host ID : 1 Image size GB : 25 Storage connection : 192.168.10.101:/gluster-vol1/ovirt_data/hosted_data/ Console type : vnc Memory size MB : 4096 MAC address : 00:16:3e:59:9b:e2 Boot type : cdrom Number of CPUs : 2 ISO image (for cdrom boot) : /tmp/centos.iso CPU Type : model_Conroe Please confirm installation settings (Yes, No)[No]: yes [ INFO ] Generating answer file '/etc/ovirt-hosted-engine/answers.conf' [ INFO ] Stage: Transaction setup [ INFO ] Stage: Misc configuration [ INFO ] Stage: Package installation [ INFO ] Stage: Misc configuration [ INFO ] Configuring libvirt [ INFO ] Configuring VDSM [ INFO ] Starting vdsmd [ INFO ] Waiting for VDSM hardware info [ INFO ] Waiting for VDSM hardware info [ INFO ] Waiting for VDSM hardware info [ INFO ] Waiting for VDSM hardware info [ INFO ] Creating Storage Domain [ INFO ] Creating Storage Pool [ INFO ] Connecting Storage Pool [ INFO ] Verifying sanlock lockspace initialization [ INFO ] Initializing sanlock lockspace [ INFO ] Initializing sanlock metadata [ INFO ] Creating VM Image [ INFO ] Disconnecting Storage Pool [ INFO ] Start monitoring domain [ INFO ] Configuring VM [ INFO ] Updating hosted-engine configuration [ INFO ] Stage: Transaction commit [ INFO ] Stage: Closing up The following network ports should be opened: tcp:5900 tcp:5901 udp:5900 udp:5901 An example of the required configuration for iptables can be found at: /etc/ovirt-hosted-engine/iptables.example In order to configure firewalld, copy the files from /etc/ovirt-hosted-engine/firewalld to /etc/firewalld/services and execute the following commands: firewall-cmd -service hosted-console [ INFO ] Creating VM You can now connect to the VM with the following command: /usr/bin/remote-viewer vnc://localhost:5900 Use temporary password \"2067OGHU\" to connect to vnc console. Please note that in order to use remote-viewer you need to be able to run graphical applications. This means that if you are using ssh you have to supply the -Y flag (enables trusted X11 forwarding). Otherwise you can run the command from a terminal in your preferred desktop environment. If you cannot run graphical applications you can connect to the graphic console from another host or connect to the console using the following command: virsh -c qemu+tls://192.168.1.150/system console HostedEngine If you need to reboot the VM you will need to start it manually using the command: hosted-engine --vm-start You can then set a temporary password using the command: hosted-engine --add-console-password The VM has been started. Install the OS and shut down or reboot it. To continue please make a selection: (1) Continue setup - VM installation is complete (2) Reboot the VM and restart installation (3) Abort setup # 需要在另外一个有图形能力的terminal中运行\"remote-viewer vnc://192.168.10.101:5900\"连接虚拟机并关闭（密码在第123行），如有需要可运行\"hosted-engine --add-console-password\"更换控制台密码。如果之前选择cdrom进行安装的话，此处可以在gs1上用已经安装好engine的虚拟磁盘进行覆盖，类似\"mount -t nfs 192.168.10.101:192.168.10.101:/gluster-vol1/ovirt_data/hosted_data/ /mnt; engine.raw /mnt/ovirt_data/hosted_data/.../vm_UUID\" (1, 2, 3)[1]: 1 Waiting for VM to shut down... [ INFO ] Creating VM You can now connect to the VM with the following command: /usr/bin/remote-viewer vnc://localhost:5900 Use temporary password \"2067OGHU\" to connect to vnc console. Please note that in order to use remote-viewer you need to be able to run graphical applications. This means that if you are using ssh you have to supply the -Y flag (enables trusted X11 forwarding). Otherwise you can run the command from a terminal in your preferred desktop environment. If you cannot run graphical applications you can connect to the graphic console from another host or connect to the console using the following command: virsh -c qemu+tls://192.168.1.150/system console HostedEngine If you need to reboot the VM you will need to start it manually using the command: hosted-engine --vm-start You can then set a temporary password using the command: hosted-engine --add-console-password Please install and setup the engine in the VM. You may also be interested in installing ovirt-guest-agent-common package in the VM. To continue make a selection from the options below: (1) Continue setup - engine installation is complete (2) Power off and restart the VM (3) Abort setup # 此处参考第一次操作，连接虚拟机控制台后进行\"engine-setup --offline\"以安装engine (1, 2, 3)[1]: 1 [ INFO ] Engine replied: DB Up!Welcome to Health Status! [ INFO ] Waiting for the host to become operational in the engine. This may take several minutes... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] The VDSM Host is now operational Please shutdown the VM allowing the system to launch it as a monitored service. # 到此，需要连接虚拟机控制台关闭虚拟机 The system will wait until the VM is down. [ INFO ] Enabling and starting HA services Hosted Engine successfully set up [ INFO ] Stage: Clean up [ INFO ] Stage: Pre-termination [ INFO ] Stage: Termination 此时，运行”hosted-engine –vm-start”启动engine。 "},{"title":"Add nat to ovirt via vdsm hooks","url":"/blog/2014/05/04/add-nat-ovirt-vdsm-hooks/","date":"2014-05-04 00:00:00 +0800","categories":["virtualization"],"body":"OK, I do not like control group very much for now. Comment device section in control group config, sorry for my laziness… mount { cpuset = /cgroup/cpuset; cpu = /cgroup/cpu; cpuacct = /cgroup/cpuacct; memory = /cgroup/memory; # devices = /cgroup/devices; freezer = /cgroup/freezer; # net_cls = /cgroup/net_cls; blkio = /cgroup/blkio; } Enable ip forward net.ipv4.ip_forward = 1 Reboot the host Connect to virsh to enable libvirt’s default virbr0(NAT) If you don’t know the password for your account, just use command below to create one. # saslpasswd2 -a libvirt root Create a nat network. <network> <name>nat</name> <uuid>b42e377d-e849-4c36-bd98-3d090def5ecc</uuid> <bridge name=\"virbr1\"/> <mac address='52:54:00:E2:AD:b8'/> <forward mode=\"nat\"/> <ip address=\"192.168.123.1\" netmask=\"255.255.255.0\"> <dhcp> <range start=\"192.168.123.2\" end=\"192.168.123.254\"/> </dhcp> </ip> </network> # virsh net-create /etc/libvirt/qemu/networks/nat.xml # virsh net-autostart nat # virsh net-start nat Create tun device and add it to virbr0 UPDATE: This could be ignored if you use extnet.py # tunctl -t nat0 -u qemu # brctl addif virbr1 nat0 Add hook file to vdsm UPDATE: use extnet from github with a little modification (Only the first vNIC will be NAT, the second one still keeps its way). #!/usr/bin/python import os import sys import traceback import xml.dom import hooking def replaceSource(interface, newnet): source, = interface.getElementsByTagName('source') source.removeAttribute('bridge') source.setAttribute('network', newnet) interface.setAttribute('type', 'network') def main(): params = \"default\" os.environ.__setitem__(\"extnet\",params) newnet = os.environ.get('extnet') if newnet is not None: doc = hooking.read_domxml() interface = doc.getElementsByTagName('interface')[0] replaceSource(interface, newnet) hooking.write_domxml(doc) def test(): interface = xml.dom.minidom.parseString(\"\"\" <interface type=\"bridge\"> <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x03\"\\ type=\"pci\"/> <mac address=\"00:1a:4a:16:01:b0\"/> <model type=\"virtio\"/> <source bridge=\"ovirtmgmt\"/> <filterref filter=\"vdsm-no-mac-spoofing\"/> <boot order=\"1\"/> </interface> \"\"\").getElementsByTagName('interface')[0] print \"Interface before forcing network: %s\" % \\ interface.toxml(encoding='UTF-8') replaceSource(interface, 'yipee') print \"Interface after forcing network: %s\" % \\ interface.toxml(encoding='UTF-8') if __name__ == '__main__': try: if '--test' in sys.argv: test() else: main() except: hooking.exit_hook('extnet hook: [unexpected error]: %s\\n' % traceback.format_exc()) QEMU-CMD way: import os import sys import hooking import traceback import json import shutil def addQemuNs(domXML): domain = domXML.getElementsByTagName('domain')[0] domain.setAttribute('xmlns:qemu', 'http://libvirt.org/schemas/domain/qemu/1.0') def injectQemuCmdLine(domXML, qc): domain = domXML.getElementsByTagName('domain')[0] qctag = domXML.createElement('qemu:commandline') for cmd in qc: qatag = domXML.createElement('qemu:arg') qatag.setAttribute('value', cmd) qctag.appendChild(qatag) domain.appendChild(qctag) domxml = hooking.read_domxml() # Get vm uuid, just in case cur_vm_uuid = domxml.getElementsByTagName('uuid')[0].firstChild.nodeValue macaddr = \"94:de:80:ea:30:f5\" natname = \"nat0\" params = '[\"-netdev\",\"tap,ifname=%s,script=no,id=hostnet0,downscript=no\",\"-device\",\"virtio-net-pci,mac=%s,netdev=hostnet0,bus=pci.0,addr=0x10\"]' % (natname, macaddr) os.environ.__setitem__(\"qemu_cmdline\",params) # Modify Qemu Parameter if 'qemu_cmdline' in os.environ: try: domxml = hooking.read_domxml() qemu_cmdline = json.loads(os.environ['qemu_cmdline']) addQemuNs(domxml) injectQemuCmdLine(domxml, qemu_cmdline) hooking.write_domxml(domxml) except: sys.stderr.write('qemu_cmdline: [unexpected error]: %s\\n' % traceback.format_exc()) sys.exit(2) Then you should start the vm WITHOUT ANY NIC if you are using nat.py . "},{"title":"11. 搭建oVirt虚拟化平台","url":"/blog/2014/05/07/6-2-1-deploy-ovirt-admin/","date":"2014-05-07 00:00:00 +0800","categories":["云端日记"],"body":"对于初次使用oVirt的用户，建议使用此种搭建方式， 太折腾的话就吓走好多目标读者了 。 使用之前的四台机器，分别为gs1.lofyer.org，gs2.lofyer.org，gs3.lofyer.org和gs4.lofyer.org，其中，将gs1作为管理机安装ovirt-engine，其余三台作为节点（node），存储使用已经创建好的glusterfs。 准备 存储可以使用之前的glusterfs，方式为NFS_V3，注意将brick的权限设置为vdsm.kvm或者36:36。 # gluster volume create gluster-vol1 replica 2 gs1.example.com:/gluster_brick0 gs2.example.com:/gluster_brick0 gs3.example.com:/gluster_brick0 gs4.example.com:/gluster_brick0 gs1.example.com:/gluster_brick1 gs2.example.com:/gluster_brick1 gs3.example.com:/gluster_brick1 gs4.example.com:/gluster_brick1 force 由于engine以及node的网络服务依赖于network而非NetworkManager，我们需要启用前者禁用后者，在每一台服务器上都进行如下类似配置修改网络。 NAME=eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=static # 注意修改此处的IP IPADDR=192.168.10.101 NETMASK=255.255.255.0 GATEWAY=192.168.10.1 DNS1=192.168.10.1 # chkconfig NetworkManager off # chkconfig network on # service NetworkManager stop; service network restart 添加repo # yum localinstall http://resources.ovirt.org/releases/ovirt-release.noarch.rpm # yum install ovirt-hosted-engine-setup 或者手动添加： [ovirt-stable] name=Latest oVirt Releases baseurl=http://ovirt.org/releases/stable/rpm/EL/$releasever/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [ovirt-3.4-stable] name=Latest oVirt 3.4.z Releases baseurl=http://ovirt.org/releases/3.4/rpm/EL/$releasever/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [epel] name=Extra Packages for Enterprise Linux 6 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch failovermethod=priority enabled=1 includepkgs=epel-release,python-uinput,puppet,python-lockfile,python-cpopen,python-ordereddict,python-pthreading,python-inotify,python-argparse,novnc,python-ply,python-kitchen,python-daemon,python-websockify,livecd-tools,spice-html5,mom gpgcheck=0 [ovirt-glusterfs-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/ enabled=1 skip_if_unavailable=1 gpgcheck=0 [ovirt-glusterfs-noarch-epel] name=GlusterFS is a clustered file-system capable of scaling to several petabytes. baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch enabled=1 skip_if_unavailable=1 gpgcheck=0 安装管理节点。 在gs1上运行如下命令。 # yum install ovirt-engine # engine-setup --offline [ INFO ] Stage: Initializing [ INFO ] Stage: Environment setup Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging.conf'] Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20140508054649.log Version: otopi-1.2.0 (otopi-1.2.0-1.el6) [ INFO ] Stage: Environment packages setup [ INFO ] Stage: Programs detection [ INFO ] Stage: Environment setup [ INFO ] Stage: Environment customization --== PRODUCT OPTIONS ==-- --== PACKAGES ==-- --== NETWORK CONFIGURATION ==-- Host fully qualified DNS name of this server [gs1.lofyer.org]: Setup can automatically configure the firewall on this system. Note: automatic configuration of the firewall may overwrite current settings. Do you want Setup to configure the firewall? (Yes, No) [Yes]: The following firewall managers were detected on this system: iptables Firewall manager to configure (iptables): iptables [ INFO ] iptables will be configured as firewall manager. --== DATABASE CONFIGURATION ==-- Where is the Engine database located? (Local, Remote) [Local]: Setup can configure the local postgresql server automatically for the engine to run. This may conflict with existing applications. Would you like Setup to automatically configure postgresql and create Engine database, or prefer to perform that manually? (Automatic, Manual) [Automatic]: --== OVIRT ENGINE CONFIGURATION ==-- Application mode (Both, Virt, Gluster) [Both]: Default storage type: (NFS, FC, ISCSI, POSIXFS) [NFS]: Engine admin password: Confirm engine admin password: --== PKI CONFIGURATION ==-- Organization name for certificate [lofyer.org]: --== APACHE CONFIGURATION ==-- Setup can configure apache to use SSL using a certificate issued from the internal CA. Do you wish Setup to configure that, or prefer to perform that manually? (Automatic, Manual) [Automatic]: Setup can configure the default page of the web server to present the application home page. This may conflict with existing applications. Do you wish to set the application as the default page of the web server? (Yes, No) [Yes]: --== SYSTEM CONFIGURATION ==-- Configure WebSocket Proxy on this machine? (Yes, No) [Yes]: Configure an NFS share on this server to be used as an ISO Domain? (Yes, No) [Yes]: no --== MISC CONFIGURATION ==-- --== END OF CONFIGURATION ==-- [ INFO ] Stage: Setup validation --== CONFIGURATION PREVIEW ==-- Engine database name : engine Engine database secured connection : False Engine database host : localhost Engine database user name : engine Engine database host name validation : False Engine database port : 5432 PKI organization : lofyer.org Application mode : both Firewall manager : iptables Update Firewall : True Configure WebSocket Proxy : True Host FQDN : gs1.lofyer.org Datacenter storage type : nfs Configure local Engine database : True Set application as default page : True Configure Apache SSL : True Please confirm installation settings (OK, Cancel) [OK]: ok [ INFO ] Stage: Transaction setup [ INFO ] Stopping engine service [ INFO ] Stopping websocket-proxy service [ INFO ] Stage: Misc configuration [ INFO ] Stage: Package installation [ INFO ] Stage: Misc configuration [ INFO ] Initializing PostgreSQL [ INFO ] Creating PostgreSQL 'engine' database [ INFO ] Configuring PostgreSQL [ INFO ] Creating Engine database schema [ INFO ] Creating CA [ INFO ] Configuring WebSocket Proxy [ INFO ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf' [ INFO ] Stage: Transaction commit [ INFO ] Stage: Closing up --== SUMMARY ==-- SSH fingerprint: 1B:FD:08:A2:FD:83:20:8A:65:F5:0D:F6:CB:BF:46:C7 Internal CA 28:7E:D6:6B:F7:F2:6C:B5:60:27:44:C3:7F:3C:22:63:E5:68:DD:F4 Web access is enabled at: http://gs1.lofyer.org:80/ovirt-engine https://gs1.lofyer.org:443/ovirt-engine Please use the user \"admin\" and password specified in order to login into oVirt Engine --== END OF SUMMARY ==-- [ INFO ] Starting engine service [ INFO ] Restarting httpd [ INFO ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20140508054842-setup.conf' [ INFO ] Stage: Clean up Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20140508054649.log [ INFO ] Stage: Pre-termination [ INFO ] Stage: Termination [ INFO ] Execution of setup completed successfully 至此，管理节点安装结束。 接下来，加入节点以及存储域，请参考第13节。 "},{"title":"13. 完善平台","url":"/blog/2014/05/08/6-4-complete-ovirt/","date":"2014-05-08 00:00:00 +0800","categories":["云端日记"],"body":"我想，你看到这的话应该已经有了一个数据中心、几个宿主机，也可能有一个虚拟机（engine），还差一个存储虚拟机镜像的地方就可以具有基本功能的oVirt平台了。 Ok, here we go. 添加节点（宿主机） 对于第11节的普通oVirt、第12节的ha平台，你可能需要添加更多节点以支持更好的SLA（service level agreement）。 添加节点目前有三种方式，一种是通过oVirt的节点ISO直接安装再加入，另一种是直接将现有CentOS或者Fedora转化为节点，另外还可以指定使用外部节点（Foreman），在此我们使用第二种方法。 添加存储域 存储域有3种，Data（数据域）、ISO（ISO域）、Export（导出域）。 其中，数据域是为必需，在创建任何虚拟机之前需要有一个可用的数据域用于存储虚拟磁盘以及快照文件；ISO域中可以存放ISO和VFD格式的系统镜像或者驱动文件；导出域用于导出或导入OVF格式的虚机。 而根据数据域的存储类型，我们有5种（NFS、POSIX兼容、Glusterfs、iSCSI、光纤）可选，在此，建议（为什么？）选择glusterfs导出的NFS。 此图可以换掉 注意 ：确保存储域权限为36:36，也即vdsm.kvm。 "},{"title":"14. oVirt使用进阶","url":"/blog/2014/05/11/cloud-6-5-advanced-ovirt/","date":"2014-05-11 00:00:00 +0800","categories":["云端日记"],"body":"ovirt-shell 使用ovirt-shell在一定程度上适合于某些场景。 # ovirt-shell -I -u admin@internal -l https://server_ip/api ============================================================================ >>> connected to oVirt manager 3.4.0.0 <<< ============================================================================ ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ Welcome to oVirt shell ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ [oVirt shell (connected)]# 主机hooks 参考 vdsm-hooks 。 集群策略 参考这个PDF 。 libguestfs扩容 LVM扩容 普通扩容 UI plugin ShellInABox 平台插件 Foreman OpenStack Network OpenStack Image 手动创建导出域 构造目录，形如： # tree exports . ├── 37e0e64b-5445-4bc3-8675-ceff4637e8e3/ │   ├── dom_md/ │   │   ├── ids │   │   ├── inbox │   │   ├── leases │   │   ├── metadata │   │   └── outbox │   ├── images/ │   └── master/ │   ├── tasks/ │   └── vms/ └── __DIRECT_IO_TEST__ 创建 leases 文件： # echo 2d2d2d2d2d2d465245452d2d2d2d2d2d3030303030303030303030303030 303000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000 0000 | xxd -r -p > leases 添加如下内容至 metadata 文件： CLASS=Backup DESCRIPTION=Export IOOPTIMEOUTSEC=10 LEASERETRIES=3 LEASETIMESEC=60 LOCKPOLICY= LOCKRENEWALINTERVALSEC=5 MASTER_VERSION=0 POOL_UUID= REMOTE_PATH=192.168.1.108:/home/nfs_exports ROLE=Regular SDUUID=37e0e64b-5445-4bc3-8675-ceff4637e8e3 TYPE=NFS VERSION=0 #_SHA_CKSUM=5737f1270bf93fdd660fea819655b01a34c315b9 使用如下脚本（参考源码中packaging/setup/plugins/ovirt-engine-setup/config/iso_domain.py）计算SHA校验值，并将其填入 metadata 中的_SHA_CKSUM段： #!/usr/bin/python import hashlib from optparse import OptionParser if __name__ == \"__main__\": parser = OptionParser() (options, args) = parser.parse_args() if len(args) != 1: parser.error(\"Missing metadata file\") f = open(args[0], \"r\") mds = {} for line in f: line = line.strip() if not line or line.startswith('#'): continue try: key,value = line.split('=', 1) if key == '_SHA_CKSUM': continue mds[key] = value except Exception, e: continue f.close() #print mds csum = hashlib.sha1() keys = mds.keys() keys.sort() for key in keys: value = mds[key] line = \"%s=%s\" % (key, value) csum.update(line) print(csum.hexdigest()) 更改权限： # chown -R vdsm.kvm exports 然后可以作为空导出域进行导入。 "},{"title":"21. Hadoop/Storm 介绍","url":"/blog/2014/05/17/7-1-hadoop-storm-intro/","date":"2014-05-17 00:00:00 +0800","categories":["云端日记"],"body":"终于到这一章了。 期望这一章的读者不要盲目跟风，找到适合自己的便好。 "},{"title":"15. ovirt-shell","url":"/blog/2014/05/22/6-5-1-ovirt-shell/","date":"2014-05-22 00:00:00 +0800","categories":["云端日记"],"body":"和许多虚拟化平台一样，ovirt也有自己的shell，并且在功能上有自己的特点。 连接ovirt-shell # yum install ovirt-engine-cli # ovirt-shell -l https://192.168.1.190 -u admin@internal -I 连接以后，可双击tab以自动补全。 你可以看出来，在ovirt中，vm、host、cluster等均可以看作“对象”，而其操作比如“start”、“stop”等可看作方法。 "},{"title":"Gitlab quick deploy","url":"/blog/2014/06/09/gitlab-quick-deploy/","date":"2014-06-09 00:00:00 +0800","categories":["linux admin"],"body":"Well, Gitweb + ssh://git@host is out of date. Even we use it for almost 2 years. We are migrating our repositories to Gitlab which we benefit from its “issue” a lot. Please follow this scripts I wrote. https://raw.githubusercontent.com/lofyer/onekey-deploy/master/gitlab/install.sh "},{"title":"lunr search in octopress","url":"/blog/2014/06/26/lunr-search-in-octopress/","date":"2014-06-26 21:36:50 +0800","categories":["octopress"],"body":"After migrating my blog from wordpress to octopress on Github, I miss some features like search and easy-customized theme. This article is inspired by jekyll-lunr-js-search , octopress-lunr-js-search and this . Here we go. 1. Get essential files Download .rb jekyll_lunr_js_search.rb to directory ~/octopress/plugins/ . Download .js files below to directory ~/octopress/source/javascripts/ . lunr.min.js mustache.js date.format.js URI.min.js 2. Add search page Add a page of search 1 $ rake new_page[\"search\"] with following contents: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 --- layout: page title: \"Search\" comments: false sharing: false footer: false #exclude_from_search: false # with this parameter, this page won't be indexed --- <div id=\"search\"> <form action=\"/search\" method=\"get\"> <input type=\"text\" id=\"search-query\" name=\"q\" placeholder=\"Search\" autocomplete=\"off\"> </form> </div> <section id=\"search-results\" style=\"display: none;\"> <p>Search results</p> <div class=\"entries\"> </div> </section> <script src=\"/javascripts/libs/jquery.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script src=\"/javascripts/lunr.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script src=\"/javascripts/mustache.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script src=\"/javascripts/date.format.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script src=\"/javascripts/URI.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script src=\"/javascripts/jquery.lunr.search.js\" type=\"text/javascript\" charset=\"utf-8\"></script> <script id=\"search-results-template\" type=\"text/mustache\"> {{#entries}} <article> <h3> {{#date}}<small><time datetime=\"{{pubdate}}\" pubdate>{{displaydate}}</time></small>{{/date}} <a href=\"{{url}}\">{{title}}</a> </h3> </article> {{/entries}} </script> <script type=\"text/javascript\"> $(function() { $('#search-query').lunrSearch({ indexUrl: '/search.json', // URL of the `search.json` index data for your site results: '#search-results', // jQuery selector for the search results container entries: '.entries', // jQuery selector for the element to contain the results list, must be a child of the results element above. template: '#search-results-template' // jQuery selector for the Mustache.js template }); }); </script> Add <li><a href=\"/search\">Search</a></li> to ~/octopress/source/_includes/custom/navigation.html . 3. Modify octopress configuration . Add following lines to ~/octopress/_config.yml to block indexing. 1 2 lunr_search: excludes: [rss.xml, atom.xml] Add gem 'nokogiri' to ~/octopress/Gemfile to build the site then run 1 $ bundle 4. Test 1 2 3 $ rake clean $ rake generate $ rake preview "},{"title":"milestone","url":"/blog/2014/07/07/milestone/","date":"2014-07-07 23:26:17 +0800","categories":["生活杂记"],"body":"对于“成熟”，我们有时会刻意追求它，逐渐让自己靠近心中的标准。 我们不断的fail and try， try and fail， fail and try，希望让自己有些许成长，并且也期望提高周围事物，比如爱情、事业、愿景、交际等等。当人觉得事情跟不上自己的步伐时，不如好好休息一下，是自己跑快了还是跑偏了。 这些年来，一直期望自己能在人工智能或者人体机械方面有所成果，早些年是单纯的兴趣，而现在，觉得它可以让世界离文明更进一步。可是，不知现在是否在积累—— I want to see everything and people will benefit that。 或许，我这偏执的想法有些。。找不到合适的词了。 仍然，对于知识以及能力的追求目的还是为了知识和能力，就像资本之于某些商人。 不忧愁不该忧愁的，高兴本该高兴的，可能就该如此吧。 "},{"title":"octopress cheatsheet","url":"/blog/2014/07/15/octopress-cheatsheet/","date":"2014-07-15 08:12:16 +0800","categories":["octopress"],"body":"Here’s some useful tips of octopress. 1. rake deploy non-fast-forward error Please keep in mind this is not considered best practice, but it may work for you. The solution is to force a push on the master branch. Edit the Rakefile and look for this line: 1 system \"git push origin #{deploy_branch}\" Alter the line by adding a plus (+) before the #{deploy_branch} tag: 1 system \"git push origin +#{deploy_branch}\" Run the command 1 rake deploy It should succeed. Undo the edit you made to the Rakefile! 2. update octopress 1 2 3 4 git pull octopress master bundle install rake update_source rake update_style "},{"title":"机器学习常用算法","url":"/blog/2014/07/20/ji-qi-xue-xi-chang-yong-suan-fa/","date":"2014-07-20 23:57:00 +0800","categories":["data processing"],"body":"It will be in https://inthecloud.readthedocs.org "},{"title":"Get data distributely via scrapy","url":"/blog/2014/08/09/get-data-distributely-via-scrapy/","date":"2014-08-09 14:36:05 +0800","categories":["data processing"],"body":"It will be in https://inthecloud.readthedocs.org "},{"title":"Docker还有OpenShift","url":"/blog/2014/09/24/dockerhuan-you-openshift/","date":"2014-09-24 22:27:25 +0800","categories":["virtualization"],"body":"越来越懒了，Docker还有OpenShift的文档同样会展示在 https://inthecloud.readthedocs.org 中。 "},{"title":"bash漏洞-环境变量","url":"/blog/2014/09/26/bashlou-dong-huan-jing-bian-liang/","date":"2014-09-26 13:37:04 +0800","categories":["linux admin"],"body":"使用下列命令来检测。 1 env x='() { :;}; echo asdasd' bash -c \"echo asd\" 是否对Docker、LXC有影响？ "}]}